const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Dashboard-D9bGsH2J.js","assets/ui-vendor-D0r6Jywv.js","assets/react-vendor-1Jw84dll.js","assets/generateCategoricalChart-DFz88YCn.js","assets/state-Cv3e63x1.js","assets/Library-BX1dDlMq.js","assets/Reader-CP9NuVNG.js","assets/gemini-Bdp0gSYa.js","assets/AIChat-CU_Zy4I1.js","assets/markdown-vendor-DHqzLkgw.js","assets/Progress-B7Svf_SS.js","assets/RadarChart-HZzDRJS5.js","assets/PerformanceAnalytics-DjU7e2qF.js"])))=>i.map(i=>d[i]);
var e,t=Object.defineProperty,i=Object.defineProperties,a=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,l=(e,t)=>(t=Symbol[e])?t:Symbol.for("Symbol."+e),o=(e,i,a)=>i in e?t(e,i,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[i]=a,c=(e,t)=>{for(var i in t||(t={}))s.call(t,i)&&o(e,i,t[i]);if(n)for(var i of n(t))r.call(t,i)&&o(e,i,t[i]);return e},d=(e,t)=>i(e,a(t)),m=(e,t,i)=>o(e,"symbol"!=typeof t?t+"":t,i),u=(e,t,i)=>new Promise((a,n)=>{var s=e=>{try{l(i.next(e))}catch(Qe){n(Qe)}},r=e=>{try{l(i.throw(e))}catch(Qe){n(Qe)}},l=e=>e.done?a(e.value):Promise.resolve(e.value).then(s,r);l((i=i.apply(e,t)).next())}),p=function(e,t){this[0]=e,this[1]=t},h=(e,t,i)=>{var a=(e,t,n,s)=>{try{var r=i[e](t),l=(t=r.value)instanceof p,o=r.done;Promise.resolve(l?t[0]:t).then(i=>l?a("return"===e?e:"next",t[1]?{done:i.done,value:i.value}:i,n,s):n({value:i,done:o})).catch(e=>a("throw",e,n,s))}catch(Qe){s(Qe)}},n=e=>s[e]=t=>new Promise((i,n)=>a(e,t,i,n)),s={};return i=i.apply(e,t),s[l("asyncIterator")]=()=>s,n("next"),n("throw"),n("return"),s},g=(e,t,i)=>(t=e[l("asyncIterator")])?t.call(e):(e=e[l("iterator")](),t={},(i=(i,a)=>(a=e[i])&&(t[i]=t=>new Promise((i,n,s)=>(t=a.call(e,t),s=t.done,Promise.resolve(t.value).then(e=>i({value:e,done:s}),n)))))("next"),i("return"),t);import{j as x,T as y,R as f,H as b,m as k,B as v,a as j,G as N,M as S,C,S as w,U as A,L as T,b as E,c as I,d as P,e as R,f as z,A as M,g as O,h as D,i as L,V as K,k as B,P as H,l as $,n as _,o as G,p as V,q as U,r as F,s as Y,t as q,u as J,v as Q,I as W,w as Z,x as X,X as ee,y as te,z as ie,E as ae,D as ne,F as se,J as re,Z as le,K as oe,N as ce,O as de,Q as me}from"./ui-vendor-D0r6Jywv.js";import{a as ue,r as pe,N as he,O as ge,H as xe,b as ye,d as fe}from"./react-vendor-1Jw84dll.js";import{c as be}from"./state-Cv3e63x1.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const i of e)if("childList"===i.type)for(const e of i.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var ke=ue;e=ke.createRoot,ke.hydrateRoot;const ve={},je=function(e,t,i){let a=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),i=(null==e?void 0:e.nonce)||(null==e?void 0:e.getAttribute("nonce"));a=Promise.allSettled(t.map(e=>{if((e=function(e){return"/med-circle/"+e}(e))in ve)return;ve[e]=!0;const t=e.endsWith(".css"),a=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${a}`))return;const n=document.createElement("link");return n.rel=t?"stylesheet":"modulepreload",t||(n.as="script"),n.crossOrigin="",n.href=e,i&&n.setAttribute("nonce",i),document.head.appendChild(n),t?new Promise((t,i)=>{n.addEventListener("load",t),n.addEventListener("error",()=>i(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function n(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return a.then(t=>{for(const e of t||[])"rejected"===e.status&&n(e.reason);return e().catch(n)})};let Ne,Se,Ce,we={data:""},Ae=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,Te=/\/\*[^]*?\*\/|  +/g,Ee=/\n+/g,Ie=(e,t)=>{let i="",a="",n="";for(let s in e){let r=e[s];"@"==s[0]?"i"==s[1]?i=s+" "+r+";":a+="f"==s[1]?Ie(r,s):s+"{"+Ie(r,"k"==s[1]?"":t)+"}":"object"==typeof r?a+=Ie(r,t?t.replace(/([^,])+/g,e=>s.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,t=>/&/.test(t)?t.replace(/&/g,e):e?e+" "+t:t)):s):null!=r&&(s=/^--/.test(s)?s:s.replace(/[A-Z]/g,"-$&").toLowerCase(),n+=Ie.p?Ie.p(s,r):s+":"+r+";")}return i+(t&&n?t+"{"+n+"}":n)+a},Pe={},Re=e=>{if("object"==typeof e){let t="";for(let i in e)t+=i+Re(e[i]);return t}return e};function ze(e){let t=this||{},i=e.call?e(t.p):e;return((e,t,i,a,n)=>{let s=Re(e),r=Pe[s]||(Pe[s]=(e=>{let t=0,i=11;for(;t<e.length;)i=101*i+e.charCodeAt(t++)>>>0;return"go"+i})(s));if(!Pe[r]){let t=s!==e?e:(e=>{let t,i,a=[{}];for(;t=Ae.exec(e.replace(Te,""));)t[4]?a.shift():t[3]?(i=t[3].replace(Ee," ").trim(),a.unshift(a[0][i]=a[0][i]||{})):a[0][t[1]]=t[2].replace(Ee," ").trim();return a[0]})(e);Pe[r]=Ie(n?{["@keyframes "+r]:t}:t,i?"":"."+r)}let l=i&&Pe.g?Pe.g:null;return i&&(Pe.g=Pe[r]),o=Pe[r],c=t,d=a,(m=l)?c.data=c.data.replace(m,o):-1===c.data.indexOf(o)&&(c.data=d?o+c.data:c.data+o),r;var o,c,d,m})(i.unshift?i.raw?((e,t,i)=>e.reduce((e,a,n)=>{let s=t[n];if(s&&s.call){let e=s(i),t=e&&e.props&&e.props.className||/^go/.test(e)&&e;s=t?"."+t:e&&"object"==typeof e?e.props?"":Ie(e,""):!1===e?"":e}return e+a+(null==s?"":s)},""))(i,[].slice.call(arguments,1),t.p):i.reduce((e,i)=>Object.assign(e,i&&i.call?i(t.p):i),{}):i,(a=t.target,"object"==typeof window?((a?a.querySelector("#_goober"):window._goober)||Object.assign((a||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:a||we),t.g,t.o,t.k);var a}ze.bind({g:1});let Me=ze.bind({k:1});function Oe(e,t){let i=this||{};return function(){let t=arguments;return function a(n,s){let r=Object.assign({},n),l=r.className||a.className;i.p=Object.assign({theme:Se&&Se()},r),i.o=/ *go\d+/.test(l),r.className=ze.apply(i,t)+(l?" "+l:"");let o=e;return e[0]&&(o=r.as||e,delete r.as),Ce&&o[0]&&Ce(r),Ne(o,r)}}}var De=(e,t)=>(e=>"function"==typeof e)(e)?e(t):e,Le=(()=>{let e=0;return()=>(++e).toString()})(),Ke=(()=>{let e;return()=>{if(void 0===e&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),Be="default",He=(e,t)=>{let{toastLimit:i}=e.settings;switch(t.type){case 0:return d(c({},e),{toasts:[t.toast,...e.toasts].slice(0,i)});case 1:return d(c({},e),{toasts:e.toasts.map(e=>e.id===t.toast.id?c(c({},e),t.toast):e)});case 2:let{toast:a}=t;return He(e,{type:e.toasts.find(e=>e.id===a.id)?1:0,toast:a});case 3:let{toastId:n}=t;return d(c({},e),{toasts:e.toasts.map(e=>e.id===n||void 0===n?d(c({},e),{dismissed:!0,visible:!1}):e)});case 4:return void 0===t.toastId?d(c({},e),{toasts:[]}):d(c({},e),{toasts:e.toasts.filter(e=>e.id!==t.toastId)});case 5:return d(c({},e),{pausedAt:t.time});case 6:let s=t.time-(e.pausedAt||0);return d(c({},e),{pausedAt:void 0,toasts:e.toasts.map(e=>d(c({},e),{pauseDuration:e.pauseDuration+s}))})}},$e=[],_e={toasts:[],pausedAt:void 0,settings:{toastLimit:20}},Ge={},Ve=(e,t=Be)=>{Ge[t]=He(Ge[t]||_e,e),$e.forEach(([e,i])=>{e===t&&i(Ge[t])})},Ue=e=>Object.keys(Ge).forEach(t=>Ve(e,t)),Fe=(e=Be)=>t=>{Ve(t,e)},Ye={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},qe=e=>(t,i)=>{let a=((e,t="blank",i)=>d(c({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0},i),{id:(null==i?void 0:i.id)||Le()}))(t,e,i);return Fe(a.toasterId||(e=>Object.keys(Ge).find(t=>Ge[t].toasts.some(t=>t.id===e)))(a.id))({type:2,toast:a}),a.id},Je=(e,t)=>qe("blank")(e,t);Je.error=qe("error"),Je.success=qe("success"),Je.loading=qe("loading"),Je.custom=qe("custom"),Je.dismiss=(e,t)=>{let i={type:3,toastId:e};t?Fe(t)(i):Ue(i)},Je.dismissAll=e=>Je.dismiss(void 0,e),Je.remove=(e,t)=>{let i={type:4,toastId:e};t?Fe(t)(i):Ue(i)},Je.removeAll=e=>Je.remove(void 0,e),Je.promise=(e,t,i)=>{let a=Je.loading(t.loading,c(c({},i),null==i?void 0:i.loading));return"function"==typeof e&&(e=e()),e.then(e=>{let n=t.success?De(t.success,e):void 0;return n?Je.success(n,c(c({id:a},i),null==i?void 0:i.success)):Je.dismiss(a),e}).catch(e=>{let n=t.error?De(t.error,e):void 0;n?Je.error(n,c(c({id:a},i),null==i?void 0:i.error)):Je.dismiss(a)}),e};var Qe,We,Ze,Xe,et=(e,t="default")=>{let{toasts:i,pausedAt:a}=((e={},t=Be)=>{let[i,a]=pe.useState(Ge[t]||_e),n=pe.useRef(Ge[t]);pe.useEffect(()=>(n.current!==Ge[t]&&a(Ge[t]),$e.push([t,a]),()=>{let e=$e.findIndex(([e])=>e===t);e>-1&&$e.splice(e,1)}),[t]);let s=i.toasts.map(t=>{var i,a,n;return d(c(c(c({},e),e[t.type]),t),{removeDelay:t.removeDelay||(null==(i=e[t.type])?void 0:i.removeDelay)||(null==e?void 0:e.removeDelay),duration:t.duration||(null==(a=e[t.type])?void 0:a.duration)||(null==e?void 0:e.duration)||Ye[t.type],style:c(c(c({},e.style),null==(n=e[t.type])?void 0:n.style),t.style)})});return d(c({},i),{toasts:s})})(e,t),n=pe.useRef(new Map).current,s=pe.useCallback((e,t=1e3)=>{if(n.has(e))return;let i=setTimeout(()=>{n.delete(e),r({type:4,toastId:e})},t);n.set(e,i)},[]);pe.useEffect(()=>{if(a)return;let e=Date.now(),n=i.map(i=>{if(i.duration===1/0)return;let a=(i.duration||0)+i.pauseDuration-(e-i.createdAt);if(!(a<0))return setTimeout(()=>Je.dismiss(i.id,t),a);i.visible&&Je.dismiss(i.id)});return()=>{n.forEach(e=>e&&clearTimeout(e))}},[i,a,t]);let r=pe.useCallback(Fe(t),[t]),l=pe.useCallback(()=>{r({type:5,time:Date.now()})},[r]),o=pe.useCallback((e,t)=>{r({type:1,toast:{id:e,height:t}})},[r]),m=pe.useCallback(()=>{a&&r({type:6,time:Date.now()})},[a,r]),u=pe.useCallback((e,t)=>{let{reverseOrder:a=!1,gutter:n=8,defaultPosition:s}=t||{},r=i.filter(t=>(t.position||s)===(e.position||s)&&t.height),l=r.findIndex(t=>t.id===e.id),o=r.filter((e,t)=>t<l&&e.visible).length;return r.filter(e=>e.visible).slice(...a?[o+1]:[0,o]).reduce((e,t)=>e+(t.height||0)+n,0)},[i]);return pe.useEffect(()=>{i.forEach(e=>{if(e.dismissed)s(e.id,e.removeDelay);else{let t=n.get(e.id);t&&(clearTimeout(t),n.delete(e.id))}})},[i,s]),{toasts:i,handlers:{updateHeight:o,startPause:l,endPause:m,calculateOffset:u}}},tt=Me`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,it=Me`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,at=Me`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,nt=Oe("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${tt} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${it} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${at} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,st=Me`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,rt=Oe("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${st} 1s linear infinite;
`,lt=Me`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,ot=Me`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,ct=Oe("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${lt} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${ot} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,dt=Oe("div")`
  position: absolute;
`,mt=Oe("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,ut=Me`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,pt=Oe("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${ut} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,ht=({toast:e})=>{let{icon:t,type:i,iconTheme:a}=e;return void 0!==t?"string"==typeof t?pe.createElement(pt,null,t):t:"blank"===i?null:pe.createElement(mt,null,pe.createElement(rt,c({},a)),"loading"!==i&&pe.createElement(dt,null,"error"===i?pe.createElement(nt,c({},a)):pe.createElement(ct,c({},a))))},gt=e=>`\n0% {transform: translate3d(0,${-200*e}%,0) scale(.6); opacity:.5;}\n100% {transform: translate3d(0,0,0) scale(1); opacity:1;}\n`,xt=e=>`\n0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}\n100% {transform: translate3d(0,${-150*e}%,-1px) scale(.6); opacity:0;}\n`,yt=Oe("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,ft=Oe("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,bt=pe.memo(({toast:e,position:t,style:i,children:a})=>{let n=e.height?((e,t)=>{let i=e.includes("top")?1:-1,[a,n]=Ke()?["0%{opacity:0;} 100%{opacity:1;}","0%{opacity:1;} 100%{opacity:0;}"]:[gt(i),xt(i)];return{animation:t?`${Me(a)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Me(n)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}})(e.position||t||"top-center",e.visible):{opacity:0},s=pe.createElement(ht,{toast:e}),r=pe.createElement(ft,c({},e.ariaProps),De(e.message,e));return pe.createElement(yt,{className:e.className,style:c(c(c({},n),i),e.style)},"function"==typeof a?a({icon:s,message:r}):pe.createElement(pe.Fragment,null,s,r))});Qe=pe.createElement,Ie.p=We,Ne=Qe,Se=Ze,Ce=Xe;var kt=({id:e,className:t,style:i,onHeightUpdate:a,children:n})=>{let s=pe.useCallback(t=>{if(t){let i=()=>{let i=t.getBoundingClientRect().height;a(e,i)};i(),new MutationObserver(i).observe(t,{subtree:!0,childList:!0,characterData:!0})}},[e,a]);return pe.createElement("div",{ref:s,className:t,style:i},n)},vt=ze`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,jt=({reverseOrder:e,position:t="top-center",toastOptions:i,gutter:a,children:n,toasterId:s,containerStyle:r,containerClassName:l})=>{let{toasts:o,handlers:d}=et(i,s);return pe.createElement("div",{"data-rht-toaster":s||"",style:c({position:"fixed",zIndex:9999,top:16,left:16,right:16,bottom:16,pointerEvents:"none"},r),className:l,onMouseEnter:d.startPause,onMouseLeave:d.endPause},o.map(i=>{let s=i.position||t,r=((e,t)=>{let i=e.includes("top"),a=i?{top:0}:{bottom:0},n=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return c(c({left:0,right:0,display:"flex",position:"absolute",transition:Ke()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(i?1:-1)}px)`},a),n)})(s,d.calculateOffset(i,{reverseOrder:e,gutter:a,defaultPosition:t}));return pe.createElement(kt,{id:i.id,key:i.id,onHeightUpdate:d.updateHeight,className:i.visible?vt:"",style:r},"custom"===i.type?De(i.message,i):n?n(i):pe.createElement(bt,{toast:i,position:s}))}))},Nt=Je;function St(e,t){let i;try{i=e()}catch(Qe){return}return{getItem:e=>{var t;const a=e=>null===e?null:JSON.parse(e,void 0),n=null!=(t=i.getItem(e))?t:null;return n instanceof Promise?n.then(a):a(n)},setItem:(e,t)=>i.setItem(e,JSON.stringify(t,void 0)),removeItem:e=>i.removeItem(e)}}const Ct=e=>t=>{try{const i=e(t);return i instanceof Promise?i:{then:e=>Ct(e)(i),catch(e){return this}}}catch(Qe){return{then(e){return this},catch:t=>Ct(t)(Qe)}}},wt=(e,t)=>(i,a,n)=>{let s=c({storage:St(()=>localStorage),partialize:e=>e,version:0,merge:(e,t)=>c(c({},t),e)},t),r=!1;const l=new Set,o=new Set;let d=s.storage;if(!d)return e((...e)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),i(...e)},a,n);const m=()=>{const e=s.partialize(c({},a()));return d.setItem(s.name,{state:e,version:s.version})},u=n.setState;n.setState=(e,t)=>(u(e,t),m());const p=e((...e)=>(i(...e),m()),a,n);let h;n.getInitialState=()=>p;const g=()=>{var e,t;if(!d)return;r=!1,l.forEach(e=>{var t;return e(null!=(t=a())?t:p)});const n=(null==(t=s.onRehydrateStorage)?void 0:t.call(s,null!=(e=a())?e:p))||void 0;return Ct(d.getItem.bind(d))(s.name).then(e=>{if(e){if("number"!=typeof e.version||e.version===s.version)return[!1,e.state];if(s.migrate){const t=s.migrate(e.state,e.version);return t instanceof Promise?t.then(e=>[!0,e]):[!0,t]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}return[!1,void 0]}).then(e=>{var t;const[n,r]=e;if(h=s.merge(r,null!=(t=a())?t:p),i(h,!0),n)return m()}).then(()=>{null==n||n(h,void 0),h=a(),r=!0,o.forEach(e=>e(h))}).catch(e=>{null==n||n(void 0,e)})};return n.persist={setOptions:e=>{s=c(c({},s),e),e.storage&&(d=e.storage)},clearStorage:()=>{null==d||d.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>g(),hasHydrated:()=>r,onHydrate:e=>(l.add(e),()=>{l.delete(e)}),onFinishHydration:e=>(o.add(e),()=>{o.delete(e)})},s.skipHydration||g(),h||p},At=be()(wt((e,t)=>({user:null,books:[],currentBook:null,currentPage:1,aiHistory:[],isAILoading:!1,userProgress:null,currentSession:null,isSidebarOpen:!0,isPdfViewerOpen:!1,activeTab:"library",setUser:t=>e({user:t}),setBooks:t=>e({books:t}),setCurrentBook:t=>e({currentBook:t,currentPage:1,isPdfViewerOpen:null!==t}),setCurrentPage:i=>{const{currentBook:a}=t();a&&e({currentPage:i,books:t().books.map(e=>e.id===a.id?d(c({},e),{lastAccessed:new Date}):e)})},addAIResponse:t=>e(e=>({aiHistory:[...e.aiHistory,t]})),setAILoading:t=>e({isAILoading:t}),updateProgress:t=>e(e=>({userProgress:e.userProgress?c(c({},e.userProgress),t):null})),startStudySession:t=>{const i=`session-${Date.now()}`;e({currentSession:{id:i,startTime:new Date,endTime:new Date,bookId:t,pagesRead:0,notesCreated:0,aiInteractions:0}})},endStudySession:()=>{const{currentSession:i,userProgress:a}=t();if(i&&a){const t=d(c({},i),{endTime:new Date});e({currentSession:null,userProgress:d(c({},a),{totalStudyTime:a.totalStudyTime+(t.endTime.getTime()-t.startTime.getTime())/1e3/60,studyHistory:[...a.studyHistory,t]})})}},toggleSidebar:()=>e(e=>({isSidebarOpen:!e.isSidebarOpen})),togglePdfViewer:()=>e(e=>({isPdfViewerOpen:!e.isPdfViewerOpen})),setActiveTab:t=>e({activeTab:t}),addNote:i=>{const{currentBook:a}=t();a&&e({books:t().books.map(e=>e.id===a.id?d(c({},e),{notes:[...e.notes||[],i]}):e),currentBook:d(c({},a),{notes:[...a.notes||[],i]})})},updateBookProgress:(i,a)=>{e({books:t().books.map(e=>e.id===i?d(c({},e),{progress:a}):e)});const{currentBook:n}=t();(null==n?void 0:n.id)===i&&e({currentBook:d(c({},n),{progress:a})})}}),{name:"medai-storage",partialize:e=>({user:e.user,books:e.books,userProgress:e.userProgress,aiHistory:e.aiHistory.slice(-50)})})),Tt=[{id:"anatomy-101",title:"Gray's Anatomy for Students",author:"Richard Drake, A. Wayne Vogl, Adam W. M. Mitchell",category:"anatomy",description:"The most comprehensive and visually stunning anatomy textbook, featuring detailed illustrations and clinical correlations that bring anatomy to life.",coverImage:"https://images.unsplash.com/photo-1559757148-5c350d0d3c56?w=400&h=600&fit=crop",difficulty:"intermediate",keywords:["anatomy","human body","medical illustration","clinical anatomy"],progress:45,chapters:[{id:"ch1",title:"Introduction to Anatomy",pageStart:1,pageEnd:28,completed:!0},{id:"ch2",title:"Back",pageStart:29,pageEnd:98,completed:!0},{id:"ch3",title:"Thorax",pageStart:99,pageEnd:186,completed:!1,subChapters:[{id:"ch3-1",title:"Chest Wall",pageStart:99,pageEnd:120},{id:"ch3-2",title:"Mediastinum",pageStart:121,pageEnd:150},{id:"ch3-3",title:"Pleural Cavities",pageStart:151,pageEnd:186}]}]},{id:"physiology-guide",title:"Guyton and Hall Textbook of Medical Physiology",author:"John E. Hall, Michael E. Hall",category:"physiology",description:"The world's foremost medical physiology textbook, offering unparalleled depth in understanding how the human body functions at cellular and systemic levels.",coverImage:"https://images.unsplash.com/photo-1576091160399-112ba8d25d1d?w=400&h=600&fit=crop",difficulty:"advanced",keywords:["physiology","body systems","cellular function","homeostasis"],progress:23},{id:"pathology-basics",title:"Robbins Basic Pathology",author:"Vinay Kumar, Abul K. Abbas, Jon C. Aster",category:"pathology",description:"Essential pathology knowledge with stunning visual aids and clear explanations of disease mechanisms, perfect for medical students and residents.",coverImage:"https://images.unsplash.com/photo-1582719508461-905c673771fd?w=400&h=600&fit=crop",difficulty:"intermediate",keywords:["pathology","disease","diagnosis","cellular pathology"],progress:67},{id:"pharmacology-essentials",title:"Katzung's Basic & Clinical Pharmacology",author:"Bertram Katzung, Anthony Trevor",category:"pharmacology",description:"Comprehensive guide to pharmacology covering drug mechanisms, clinical applications, and the latest therapeutic developments.",coverImage:"https://images.unsplash.com/photo-1587854692152-cbe660dbde88?w=400&h=600&fit=crop",difficulty:"advanced",keywords:["drugs","pharmacology","therapeutics","drug interactions"],progress:12},{id:"internal-medicine",title:"Harrison's Principles of Internal Medicine",author:"Dennis Kasper, Anthony Fauci, Stephen Hauser",category:"internal-medicine",description:"The most trusted resource in internal medicine, offering comprehensive coverage of pathophysiology and treatment of diseases.",coverImage:"https://images.unsplash.com/photo-1579684385127-1ef15d508118?w=400&h=600&fit=crop",difficulty:"expert",keywords:["internal medicine","diagnosis","treatment","clinical practice"],progress:0},{id:"emergency-handbook",title:"Tintinalli's Emergency Medicine Manual",author:"Judith Tintinalli, J. Stephan Stapczynski",category:"emergency-medicine",description:"Quick-reference guide for emergency medicine practitioners with evidence-based protocols and life-saving procedures.",coverImage:"https://images.unsplash.com/photo-1519494026892-80bbd2d6fd0d?w=400&h=600&fit=crop",difficulty:"advanced",keywords:["emergency","acute care","trauma","critical care"],progress:89},{id:"clinical-skills",title:"Bates' Guide to Physical Examination",author:"Lynn Bickley, Peter Szilagyi",category:"clinical-skills",description:"Master the art of patient examination with this comprehensive guide featuring step-by-step techniques and clinical pearls.",coverImage:"https://images.unsplash.com/photo-1584820927498-cfe5211fd8bf?w=400&h=600&fit=crop",difficulty:"beginner",keywords:["physical exam","clinical skills","patient interaction","diagnosis"],progress:78},{id:"radiology-fundamentals",title:"Learning Radiology: Recognizing the Basics",author:"William Herring",category:"radiology",description:"Essential radiology knowledge with clear explanations and numerous imaging examples to develop pattern recognition skills.",coverImage:"https://images.unsplash.com/photo-1516549655169-df83a0774514?w=400&h=600&fit=crop",difficulty:"intermediate",keywords:["radiology","imaging","X-ray","MRI","CT scan"],progress:34}],Et=(e,t)=>{const i={"anatomy-101":"Chapter 3: The Thorax\n\nThe thoracic cavity is bounded by the thoracic wall and contains vital organs including the heart, lungs, and great vessels. Understanding thoracic anatomy is crucial for interpreting clinical signs and symptoms.\n\nKey Structures:\n1. Thoracic Wall\n   - Ribs and intercostal spaces\n   - Muscles of respiration\n   - Neurovascular supply\n\n2. Mediastinum\n   - Superior mediastinum: Contains great vessels, trachea, esophagus\n   - Inferior mediastinum: Divided into anterior, middle, and posterior\n   - The heart occupies the middle mediastinum\n\n3. Pleural Cavities\n   - Parietal and visceral pleura\n   - Pleural recesses\n   - Clinical significance of pleural effusions\n\nClinical Correlation:\nPneumothorax occurs when air enters the pleural space, causing lung collapse. Understanding the anatomy helps in performing emergency procedures like needle decompression at the 2nd intercostal space, midclavicular line.","physiology-guide":"Chapter 8: Cardiovascular Physiology\n\nThe cardiovascular system maintains tissue perfusion through coordinated cardiac and vascular function. This chapter explores the mechanisms of cardiac contraction, regulation of blood pressure, and tissue perfusion.\n\nCardiac Cycle:\n1. Systole - Ventricular contraction\n   - Isovolumetric contraction\n   - Ejection phase\n   \n2. Diastole - Ventricular relaxation\n   - Isovolumetric relaxation\n   - Ventricular filling\n\nRegulation of Cardiac Output:\nCO = HR Ã— SV\n- Heart Rate regulation: Autonomic nervous system\n- Stroke Volume determinants: Preload, afterload, contractility\n\nBlood Pressure Regulation:\n- Short-term: Baroreceptor reflex\n- Long-term: Renin-angiotensin-aldosterone system"}[e];return i?`Page ${t}\n\n${i}\n\n[Additional content would appear here in actual implementation]`:"Content not available for this page."};class It extends pe.Component{constructor(e){super(e),m(this,"logErrorToService",(e,t)=>{const i={message:e.toString(),stack:e.stack,componentStack:t.componentStack,timestamp:(new Date).toISOString(),url:window.location.href,userAgent:navigator.userAgent};console.log("Error logged:",i)}),m(this,"handleReset",()=>{this.setState({hasError:!1,error:null,errorInfo:null})}),m(this,"handleReload",()=>{window.location.reload()}),m(this,"handleHome",()=>{window.location.href="/medcircle/"}),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e,errorInfo:null}}componentDidCatch(e,t){console.error("ErrorBoundary caught an error:",e,t),this.setState({error:e,errorInfo:t}),"undefined"!=typeof window&&"localhost"!==window.location.hostname&&this.logErrorToService(e,t)}render(){return this.state.hasError?this.props.fallback?x.jsx(x.Fragment,{children:this.props.fallback}):x.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center p-4",children:x.jsxs("div",{className:"max-w-2xl w-full bg-gray-800/90 rounded-2xl p-8 border border-red-500/30",children:[x.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[x.jsx("div",{className:"w-16 h-16 bg-red-500/20 rounded-full flex items-center justify-center",children:x.jsx(y,{className:"w-8 h-8 text-red-400"})}),x.jsxs("div",{children:[x.jsx("h1",{className:"text-2xl font-bold text-white",children:"Bir Hata OluÅŸtu"}),x.jsx("p",{className:"text-gray-300",children:"Uygulama beklenmedik bir hatayla karÅŸÄ±laÅŸtÄ±"})]})]}),!1,x.jsxs("div",{className:"space-y-4",children:[x.jsx("p",{className:"text-gray-300",children:"LÃ¼tfen aÅŸaÄŸÄ±daki seÃ§eneklerden birini deneyin:"}),x.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[x.jsxs("button",{onClick:this.handleReset,className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-blue-500 hover:bg-blue-600 text-white font-semibold rounded-lg transition-colors",children:[x.jsx(f,{className:"w-5 h-5"}),"Tekrar Dene"]}),x.jsxs("button",{onClick:this.handleReload,className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-gray-700 hover:bg-gray-600 text-white font-semibold rounded-lg transition-colors",children:[x.jsx(f,{className:"w-5 h-5"}),"SayfayÄ± Yenile"]}),x.jsxs("button",{onClick:this.handleHome,className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-gray-700 hover:bg-gray-600 text-white font-semibold rounded-lg transition-colors",children:[x.jsx(b,{className:"w-5 h-5"}),"Ana Sayfa"]})]})]}),x.jsx("div",{className:"mt-6 p-4 bg-blue-900/20 rounded-lg border border-blue-500/30",children:x.jsxs("p",{className:"text-sm text-blue-300",children:[x.jsx("strong",{children:"Ä°pucu:"})," Sorun devam ederse, tarayÄ±cÄ± Ã¶nbelleÄŸinizi temizlemeyi deneyin (Ctrl/Cmd + Shift + R) veya farklÄ± bir tarayÄ±cÄ± kullanÄ±n."]})})]})}):this.props.children}}const Pt=({size:e="md",message:t})=>x.jsxs("div",{className:"flex flex-col items-center justify-center p-8",children:[x.jsx(k.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:`${{sm:"w-6 h-6",md:"w-10 h-10",lg:"w-16 h-16"}[e]} border-4 border-gray-700 border-t-cyan-400 rounded-full`}),t&&x.jsx("p",{className:"mt-4 text-gray-400 text-sm font-medium",children:t})]}),Rt=()=>x.jsx("div",{className:"fixed inset-0 bg-gray-900/95 backdrop-blur-sm flex items-center justify-center z-50",children:x.jsxs(k.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"text-center",children:[x.jsx(Pt,{size:"lg"}),x.jsx("h2",{className:"text-xl font-bold text-white mt-4",children:"MedCircle YÃ¼kleniyor"}),x.jsx("p",{className:"text-gray-400 mt-2",children:"LÃ¼tfen bekleyin..."})]})}),zt=()=>{const{user:e,setUser:t}=At(),i=[{path:"/",label:"Dashboard",icon:b},{path:"/library",label:"Library",icon:j},{path:"/reader",label:"Reader",icon:j},{path:"/mep",label:"MEP Modules",icon:N},{path:"/ai-chat",label:"AI Assistant",icon:S},{path:"/progress",label:"Progress",icon:C}];return x.jsxs("div",{className:"w-72 h-full glass border-r border-white/10 flex flex-col",children:[x.jsx("div",{className:"p-6 border-b border-white/10",children:x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-medical-blue to-medical-purple p-0.5",children:x.jsx("div",{className:"w-full h-full rounded-xl bg-medical-darker flex items-center justify-center",children:x.jsx(v,{className:"w-6 h-6 text-white"})})}),x.jsxs("div",{children:[x.jsx("h2",{className:"text-xl font-bold text-gradient",children:"MedAI"}),x.jsx("p",{className:"text-xs text-gray-400",children:"Education Platform"})]})]})}),x.jsx("nav",{className:"flex-1 p-4 space-y-2",children:i.map(e=>{const t=e.icon;return x.jsx(he,{to:e.path,className:({isActive:e})=>"group flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 "+(e?"bg-medical-blue/20 text-white shadow-glow":"text-gray-400 hover:bg-white/5 hover:text-white"),children:({isActive:i})=>x.jsxs(x.Fragment,{children:[x.jsx(t,{className:"w-5 h-5 "+(i?"text-medical-blue":"")}),x.jsx("span",{className:"font-medium",children:e.label}),"AI Assistant"===e.label&&x.jsx(w,{className:"w-4 h-4 ml-auto text-medical-cyan animate-pulse"}),"MEP Modules"===e.label&&x.jsx("div",{className:"ml-auto",children:x.jsx("span",{className:"text-xs bg-medical-blue/20 text-medical-blue px-2 py-1 rounded-full",children:"NEW"})})]})},e.path)})}),x.jsxs("div",{className:"p-4 border-t border-white/10",children:[x.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-xl bg-white/5 mb-3",children:[x.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-medical-cyan to-medical-blue flex items-center justify-center",children:x.jsx(A,{className:"w-5 h-5 text-white"})}),x.jsxs("div",{className:"flex-1",children:[x.jsx("p",{className:"font-medium text-white text-sm",children:null==e?void 0:e.name}),x.jsx("p",{className:"text-xs text-gray-400 capitalize",children:null==e?void 0:e.level})]})]}),x.jsxs(k.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{t(null),localStorage.removeItem("medai-user"),At.setState({userProgress:null,currentBook:null,aiHistory:[]})},className:"w-full flex items-center justify-center gap-2 px-4 py-2 rounded-lg bg-red-500/10 text-red-400 hover:bg-red-500/20 transition-colors",children:[x.jsx(T,{className:"w-4 h-4"}),x.jsx("span",{className:"text-sm font-medium",children:"Logout"})]})]}),x.jsx("div",{className:"p-4",children:x.jsxs("div",{className:"p-3 rounded-xl bg-gradient-to-r from-medical-purple/20 to-medical-pink/20 border border-medical-purple/30",children:[x.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[x.jsx(w,{className:"w-4 h-4 text-medical-pink"}),x.jsx("span",{className:"text-xs font-semibold text-white",children:"POC Version"})]}),x.jsx("p",{className:"text-xs text-gray-300",children:"Experience the future of medical education"})]})})]})},Mt=()=>{const{toggleSidebar:e,activeTab:t}=At(),[i,a]=pe.useState(!0),[n,s]=pe.useState(""),r={library:"Medical Library",reading:"Reading Session","ai-chat":"AI Assistant",progress:"Your Progress"}[t]||"Dashboard";return x.jsx("header",{className:"glass border-b border-white/10 px-6 py-4",children:x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("div",{className:"flex items-center gap-4",children:[x.jsx(k.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:e,className:"lg:hidden p-2 rounded-lg hover:bg-white/10 transition-colors",children:x.jsx(E,{className:"w-5 h-5 text-white"})}),x.jsxs("div",{children:[x.jsx("h1",{className:"text-2xl font-bold text-white",children:r}),x.jsx("p",{className:"text-sm text-gray-400",children:(new Date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]})]}),x.jsx("div",{className:"hidden md:flex flex-1 max-w-2xl mx-8",children:x.jsxs("div",{className:"relative w-full",children:[x.jsx(I,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),x.jsx("input",{type:"text",value:n,onChange:e=>s(e.target.value),placeholder:"Search books, topics, or ask a question...",className:"w-full pl-10 pr-4 py-2.5 rounded-xl bg-white/5 border border-white/10 text-white placeholder-gray-500 focus:outline-none focus:border-medical-blue focus:shadow-glow transition-all"}),n&&x.jsx(k.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"absolute top-full left-0 right-0 mt-2 p-4 rounded-xl glass border border-white/10 shadow-2xl",children:x.jsx("p",{className:"text-sm text-gray-400",children:"Press Enter to search or ask AI"})})]})}),x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsxs(k.button,{whileHover:{scale:1.1},whileTap:{scale:.9},className:"p-2 rounded-lg hover:bg-white/10 transition-colors relative",children:[x.jsx(P,{className:"w-5 h-5 text-white"}),x.jsx("span",{className:"absolute top-1 right-1 w-2 h-2 bg-medical-pink rounded-full animate-pulse"})]}),x.jsx(k.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>a(!i),className:"p-2 rounded-lg hover:bg-white/10 transition-colors",children:i?x.jsx(R,{className:"w-5 h-5 text-white"}):x.jsx(z,{className:"w-5 h-5 text-white"})}),x.jsxs("div",{className:"hidden lg:flex items-center gap-4 ml-4 pl-4 border-l border-white/10",children:[x.jsxs("div",{className:"text-right",children:[x.jsx("p",{className:"text-xs text-gray-400",children:"Study Streak"}),x.jsx("p",{className:"text-sm font-semibold text-medical-green",children:"7 days"})]}),x.jsxs("div",{className:"text-right",children:[x.jsx("p",{className:"text-xs text-gray-400",children:"Progress"}),x.jsx("p",{className:"text-sm font-semibold text-medical-blue",children:"42%"})]})]})]})]})})},Ot=()=>{const e=At(e=>e.isSidebarOpen);return x.jsxs("div",{className:"flex h-screen overflow-hidden",children:[x.jsx(M,{mode:"wait",children:e&&x.jsx(k.div,{initial:{x:-280},animate:{x:0},exit:{x:-280},transition:{type:"spring",damping:25,stiffness:200},className:"fixed lg:relative z-30 h-full",children:x.jsx(zt,{})})}),x.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[x.jsx(Mt,{}),x.jsx("main",{className:"flex-1 overflow-auto bg-gradient-to-br from-medical-darker via-medical-dark to-medical-darker",children:x.jsx("div",{className:"h-full",children:x.jsx(M,{mode:"wait",children:x.jsx(k.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3},className:"h-full",children:x.jsx(ge,{})},location.pathname)})})})]}),e&&x.jsx(k.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>At.setState({isSidebarOpen:!1}),className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-20 lg:hidden"})]})},Dt=()=>{const[e,t]=pe.useState(""),[i,a]=pe.useState("student"),n=At(e=>e.setUser),s=[{value:"student",label:"Medical Student",icon:N},{value:"resident",label:"Resident",icon:O},{value:"physician",label:"Physician",icon:D},{value:"specialist",label:"Specialist",icon:v}];return x.jsxs("div",{className:"min-h-screen bg-medical-darker flex items-center justify-center p-4 overflow-hidden",children:[x.jsxs("div",{className:"absolute inset-0",children:[x.jsx("div",{className:"absolute top-20 left-20 w-96 h-96 bg-medical-blue/10 rounded-full blur-3xl animate-float"}),x.jsx("div",{className:"absolute bottom-20 right-20 w-96 h-96 bg-medical-purple/10 rounded-full blur-3xl animate-float-slow"}),x.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[600px] h-[600px] bg-medical-cyan/5 rounded-full blur-3xl"})]}),x.jsx("div",{className:"absolute inset-0 medical-grid opacity-10"}),x.jsx(k.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8},className:"relative z-10 max-w-2xl w-full",children:x.jsxs("div",{className:"glass rounded-3xl p-12 shadow-2xl",children:[x.jsxs(k.div,{initial:{scale:.9},animate:{scale:1},transition:{duration:.5},className:"text-center mb-10",children:[x.jsx("div",{className:"inline-flex items-center justify-center w-24 h-24 rounded-full bg-gradient-to-br from-medical-blue to-medical-purple p-1 mb-6",children:x.jsx("div",{className:"w-full h-full rounded-full bg-medical-darker flex items-center justify-center",children:x.jsx(v,{className:"w-12 h-12 text-white"})})}),x.jsx("h1",{className:"text-5xl font-bold mb-4",children:x.jsx("span",{className:"text-gradient",children:"MedAI Education"})}),x.jsx("p",{className:"text-xl text-gray-300",children:"BiliÅŸsel Bilim Destekli TÄ±bbi EÄŸitim Ekosistemi"}),x.jsxs("div",{className:"flex items-center justify-center gap-2 mt-4",children:[x.jsx(w,{className:"w-5 h-5 text-medical-cyan animate-pulse"}),x.jsx("p",{className:"text-sm text-gray-400",children:"Powered by Gemini 2.5 Flash-Lite"}),x.jsx(w,{className:"w-5 h-5 text-medical-cyan animate-pulse"})]})]}),x.jsxs("div",{className:"space-y-6",children:[x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Your Name"}),x.jsx("input",{type:"text",value:e,onChange:e=>t(e.target.value),className:"w-full px-4 py-3 rounded-lg bg-white/5 border border-white/10 text-white placeholder-gray-500 focus:outline-none focus:border-medical-blue focus:shadow-glow transition-all",placeholder:"Enter your name"})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Your Level"}),x.jsx("div",{className:"grid grid-cols-2 gap-3",children:s.map(e=>{const t=e.icon;return x.jsxs(k.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>a(e.value),className:"p-4 rounded-lg border transition-all "+(i===e.value?"bg-medical-blue/20 border-medical-blue shadow-glow":"bg-white/5 border-white/10 hover:border-white/20"),children:[x.jsx(t,{className:"w-6 h-6 mx-auto mb-2 "+(i===e.value?"text-medical-blue":"text-gray-400")}),x.jsx("p",{className:"text-sm font-medium "+(i===e.value?"text-white":"text-gray-300"),children:e.label})]},e.value)})})]}),x.jsx(k.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{if(e.trim()){const t={id:`user-${Date.now()}`,name:e.trim(),level:i};n(t),localStorage.setItem("medai-user",JSON.stringify(t)),At.setState({userProgress:{userId:t.id,totalStudyTime:0,booksCompleted:0,currentStreak:0,achievements:[],weakAreas:[],studyHistory:[]}})}},disabled:!e.trim(),className:"btn-premium w-full disabled:opacity-50 disabled:cursor-not-allowed",children:x.jsxs("span",{className:"relative z-10 flex items-center justify-center gap-2",children:["Start Learning",x.jsx(w,{className:"w-5 h-5"})]})})]}),x.jsxs("div",{className:"mt-10 pt-10 border-t border-white/10",children:[x.jsx("p",{className:"text-center text-sm text-gray-400 mb-4",children:"What awaits you:"}),x.jsx("div",{className:"flex flex-wrap justify-center gap-3",children:["AI-Powered Learning","Medical Books Library","Interactive Study","Progress Tracking","Personalized Experience"].map(e=>x.jsx("span",{className:"px-3 py-1 rounded-full bg-white/5 border border-white/10 text-xs text-gray-300",children:e},e))})]})]})})]})},Lt=[{id:"case-septic-shock-complete",title:"ğŸš¨ VAKA 1: ACÄ°L SERVÄ°STTE SEPTÄ°K ÅOK",description:"Sepsis-3 kriterleri ve 1-saat bundle yÃ¶netimi - Tam karar aÄŸacÄ± ile interaktif Ã¶ÄŸrenme",category:"emergency-medicine",language:"bilingual",resources:["Surviving Sepsis Campaign 2021 Guidelines","IDSA Sepsis Management 2023 Update","Turkish Society of Intensive Care Medicine Consensus","qSOFA ve SOFA Skorlama Sistemleri"],assessments:["Interactive Decision Tree Assessment","5-Point Clinical Decision Challenge","Time-Constrained Management Simulation","Turkish Emergency Medicine Protocol Test"],estimatedTime:45,completed:!1,difficulty:"advanced",aiPrompts:["Sepsis-3 kriterlerine gÃ¶re bu hasta nasÄ±l deÄŸerlendirilir?","1-saat bundle'Ä±n doÄŸru sÄ±ralamasÄ± nedir?","qSOFA vs SOFA skorlarÄ± arasÄ±ndaki fark nedir?","VazopresÃ¶r baÅŸlama kriterleri nelerdir?","TÃ¼rk yoÄŸun bakÄ±m kÄ±lavuzlarÄ±na gÃ¶re optimal yaklaÅŸÄ±m nedir?"],clinicalCases:[{id:"septic-shock-main-case",title:"Septic Shock Decision Tree Challenge",patient:{age:65,gender:"female",chiefComplaint:"AteÅŸ, titreme ve bilinÃ§ bulanÄ±klÄ±ÄŸÄ±",history:"Son 2 gÃ¼ndÃ¼r artan ateÅŸ (39.2Â°C), idrar yaparken yanma, bugÃ¼n sabahtan beri konuÅŸmada yavaÅŸlama",examination:"Glasgow 13 (konfÃ¼ze), cilt sÄ±cak ve nemli, kapiller geri dolum 4 saniye",investigations:["Kan kÃ¼ltÃ¼rÃ¼","Ä°drar kÃ¼ltÃ¼rÃ¼","Laktat","ABG","Tam kan sayÄ±mÄ±","Biyokimya"],comorbidities:["DM tip 2","Hipertansiyon"],medications:["Metformin","ACE inhibitÃ¶rÃ¼"],allergies:["Penisilin alerjisi"],socialHistory:"Non-smoker, sosyal iÃ§ici deÄŸil"},presentation:"65 yaÅŸ kadÄ±n hasta, acil servise ateÅŸ, titreme ve bilinÃ§ bulanÄ±klÄ±ÄŸÄ± ÅŸikayetleri ile getirildi.",vitalSigns:{heartRate:118,bloodPressure:"82/48 mmHg",temperature:38.9,oxygenSaturation:92,respiratoryRate:26,glasgow:13},labResults:[{test:"Laktat",value:"4.2 mmol/L",normalRange:"<2 mmol/L",significance:"YÃ¼ksek - doku perfÃ¼zyon bozukluÄŸu"},{test:"WBC",value:"18,500/Î¼L",normalRange:"4,000-11,000/Î¼L",significance:"YÃ¼ksek - enfeksiyon bulgusu"},{test:"CRP",value:"285 mg/L",normalRange:"<10 mg/L",significance:"Ã‡ok yÃ¼ksek - akut faz yanÄ±tÄ±"},{test:"Kreatinin",value:"1.8 mg/dL",normalRange:"0.6-1.2 mg/dL",significance:"YÃ¼ksek - bÃ¶brek yetmezliÄŸi"},{test:"Prokalsitonin",value:"5.2 ng/mL",normalRange:"<0.25 ng/mL",significance:"Ã‡ok yÃ¼ksek - bakteriyel sepsis"}],decisionTree:[{id:"decision-1",timePoint:"Ä°lk 2 dakika",scenario:"Hasta acil servise getirildi. Vital bulgularÄ±na gÃ¶re ilk mÃ¼dahale Ã¶nceliÄŸiniz nedir?",question:"â“ KARAR NOKTASI 1: Ä°LK YAKLAÅIM\nZaman limiti: 2 dakika\n\nHastanÄ±n vital bulgularÄ±na gÃ¶re ilk mÃ¼dahale Ã¶nceliÄŸiniz nedir?",options:[{id:"A",text:"Ä°mmediately start norepinephrine infusion",isCorrect:!1,points:0,riskImpact:1,explanation:"VazopresÃ¶r sÄ±vÄ± resÃ¼sitasyonundan sonra baÅŸlanmalÄ±",references:["Surviving Sepsis Campaign 2021"]},{id:"B",text:"30 mL/kg kristalloid sÄ±vÄ± resÃ¼sitasyonu",isCorrect:!0,points:20,riskImpact:-2,explanation:"DoÄŸru! Septik ÅŸok'ta ilk saat bundle'Ä±nÄ±n en kritik komponenti sÄ±vÄ± resÃ¼sitasyonudur.",references:["SSC 2021","SCCM Guidelines"]},{id:"C",text:"GeniÅŸ spektrum antibiyotik baÅŸla",isCorrect:!1,points:10,riskImpact:0,explanation:"Antibiyotik Ã¶nemli ama Ã¶nce sÄ±vÄ± resÃ¼sitasyonu yapÄ±lmalÄ±",references:["IDSA Guidelines"]},{id:"D",text:"EntÃ¼basyon hazÄ±rlÄ±ÄŸÄ± yap",isCorrect:!1,points:5,riskImpact:1,explanation:"HenÃ¼z entÃ¼basyon endikasyonu yok, Ã¶nce sÄ±vÄ± ve destek tedavi"}],correctAnswer:"B",explanation:"ğŸ’¡ Ä°pucu: Surviving Sepsis Campaign guidelines'Ä± hatÄ±rlayÄ±n...\n\nâœ… DOÄRU CEVAP: B) 30 mL/kg kristalloid sÄ±vÄ± resÃ¼sitasyonu\n\nğŸ“ AÃ§Ä±klama: Septik ÅŸok'ta ilk saat bundle'Ä±nÄ±n en kritik komponenti sÄ±vÄ± resÃ¼sitasyonudur. Hipotansiyonu olan hastada Ã¶nce 30 mL/kg kristalloid verilmelidir.",consequences:{A:"PrematÃ¼re vazopresÃ¶r â†’ sÄ±vÄ± resÃ¼sitasyonu gecikir",B:"Optimal baÅŸlangÄ±Ã§ â†’ MAP yÃ¼kselme beklenir",C:"SÄ±vÄ± gecikimi â†’ hipotansiyon devam eder",D:"Gereksiz invaziv mÃ¼dahale riski"},timeLimit:120,hints:["Sepsis bundle sÄ±ralamasÄ± kritik","Ä°lk Ã¶nce perfÃ¼zyonu dÃ¼zelt","VazopresÃ¶r sÄ±vÄ±dan sonra gelir"]},{id:"decision-2",timePoint:"15. dakika - Lab Takibi",scenario:"BaÅŸlangÄ±Ã§ lab sonuÃ§larÄ± geldi. SÄ±vÄ± resÃ¼sitasyonu sonrasÄ± deÄŸerlendirme.",question:"â“ KARAR NOKTASI 2: LAB TAKÄ°BÄ°\n\nBaÅŸlangÄ±Ã§ lab sonuÃ§larÄ± geldi:\nâ€¢ Laktat: 4.2 mmol/L (N: <2)\nâ€¢ WBC: 18,500/Î¼L (bands %15)\nâ€¢ Kreatinin: 1.8 mg/dL (bazal 1.0)\nâ€¢ Prokalsitonin: 5.2 ng/mL (N: <0.25)\nâ€¢ SÄ±vÄ± resÃ¼sitasyonu sonrasÄ± TA: 85/52 mmHg\n\nBir sonraki adÄ±mÄ±nÄ±z?",options:[{id:"A",text:"Kan kÃ¼ltÃ¼rÃ¼ + antibiyotik baÅŸla",isCorrect:!0,points:20,riskImpact:-2,explanation:"DoÄŸru! MAP >65 mmHg saÄŸlandÄ±ÄŸÄ±ndan vazopresÃ¶re henÃ¼z ihtiyaÃ§ yok. Åimdi odak araÅŸtÄ±rmasÄ± (kÃ¼ltÃ¼rler) ve 1 saat iÃ§inde antibiyotik ÅŸart.",references:["Surviving Sepsis Campaign","IDSA 2023"]},{id:"B",text:"VazopresÃ¶r (norepinephrine) baÅŸla",isCorrect:!1,points:10,riskImpact:0,explanation:"MAP 58 mmHg, henÃ¼z vazopresÃ¶r eÅŸiÄŸi deÄŸil (MAP <65)",references:["SSC Guidelines"]},{id:"C",text:"CVVH hazÄ±rlÄ±ÄŸÄ± yap",isCorrect:!1,points:0,riskImpact:1,explanation:"HenÃ¼z renal replasman tedavi endikasyonu yok"},{id:"D",text:"Steroid baÅŸla",isCorrect:!1,points:5,riskImpact:1,explanation:"Steroid vazopresÃ¶r ihtiyacÄ± olan hastalarda dÃ¼ÅŸÃ¼nÃ¼lÃ¼r"}],correctAnswer:"A",explanation:"âœ… DOÄRU CEVAP: A) Kan kÃ¼ltÃ¼rÃ¼ + antibiyotik baÅŸla\n\nğŸ“ AÃ§Ä±klama: MAP >65 mmHg saÄŸlandÄ±ÄŸÄ±ndan vazopresÃ¶re henÃ¼z ihtiyaÃ§ yok. Åimdi odak araÅŸtÄ±rmasÄ± (kÃ¼ltÃ¼rler) ve 1 saat iÃ§inde antibiyotik ÅŸart.",consequences:{A:"Optimal sepsis bundle devam â†’ kaynak kontrol",B:"Erken vazopresÃ¶r â†’ gereksiz risk",C:"Premature CVVH â†’ komplikasyon riski",D:"Erken steroid â†’ enfeksiyon kontrolÃ¼ gecikir"},timeLimit:90},{id:"decision-3",timePoint:"45. dakika - Antibiyotik SeÃ§imi",scenario:"Ä°drar kÃ¼ltÃ¼rÃ¼nde gram-pozitif kokklar gÃ¶rÃ¼ldÃ¼.",question:"â“ KARAR NOKTASI 3: ANTÄ°BÄ°YOTÄ°K SEÃ‡Ä°MÄ°\n\nÄ°drar kÃ¼ltÃ¼rÃ¼nde gram-pozitif kokklar gÃ¶rÃ¼ldÃ¼.\n\nEn uygun empirik antibiyotik tedavi?",options:[{id:"A",text:"Piperacillin-tazobactam + Vancomycin",isCorrect:!0,points:20,riskImpact:-2,explanation:"DoÄŸru! Kompllike Ã¼riner enfeksiyon + septik ÅŸok'ta ESBL ve MRSA coverage gereklidir.",references:["IDSA UTI Guidelines","Sepsis Guidelines"]},{id:"B",text:"Ceftriaxone monoterapi",isCorrect:!1,points:5,riskImpact:2,explanation:"Yetersiz spektrum, septik ÅŸokta geniÅŸ spektrum gerekli",references:["IDSA Guidelines"]},{id:"C",text:"Meropenem monoterapi",isCorrect:!1,points:15,riskImpact:0,explanation:"Gram negatif coverage iyi ama MRSA coverage eksik",references:["Antimicrobial Guidelines"]},{id:"D",text:"Ampicillin-sulbactam",isCorrect:!1,points:0,riskImpact:3,explanation:"Yetersiz spektrum, septik ÅŸokta uygun deÄŸil"}],correctAnswer:"A",explanation:"âœ… DOÄRU CEVAP: A) Piperacillin-tazobactam + Vancomycin\n\nğŸ“ AÃ§Ä±klama: Kompllike Ã¼riner enfeksiyon + septik ÅŸok'ta ESBL ve MRSA coverage gereklidir.",consequences:{A:"Optimal antimikrobiyal spektrum â†’ enfeksiyon kontrolÃ¼",B:"Yetersiz tedavi â†’ klinik kÃ¶tÃ¼leÅŸme riski",C:"MRSA coverage eksik â†’ direnÃ§li enfeksiyon riski",D:"Ciddi yetersiz tedavi â†’ mortalite riski"},timeLimit:60},{id:"decision-4",timePoint:"3. saat - Takip DeÄŸerlendirmesi",scenario:"3. saatte: TA: 78/45 mmHg (MAP: 56 mmHg), Laktat: 3.8 mmol/L, Ä°drar Ã§Ä±kÄ±ÅŸÄ±: 15 mL/saat",question:"â“ KARAR NOKTASI 4: TAKÄ°P\n\n3. saatte:\nâ€¢ TA: 78/45 mmHg (MAP: 56 mmHg)\nâ€¢ Laktat: 3.8 mmol/L\nâ€¢ Ä°drar Ã§Ä±kÄ±ÅŸÄ±: 15 mL/saat\n\nGerekli mÃ¼dahale?",options:[{id:"A",text:"Daha fazla sÄ±vÄ± ver (ek 1000 mL)",isCorrect:!1,points:5,riskImpact:1,explanation:"Zaten 30 mL/kg verildi, ÅŸimdi vazopresÃ¶r zamanÄ±",references:["Fluid Responsiveness Studies"]},{id:"B",text:"Norepinephrine infÃ¼zyon baÅŸla",isCorrect:!0,points:20,riskImpact:-2,explanation:"DoÄŸru! 30 mL/kg sÄ±vÄ± sonrasÄ± MAP <65 mmHg ise vazopresÃ¶r endikasyonu vardÄ±r. Norepinephrine birinci seÃ§enektir.",references:["Surviving Sepsis Campaign","Vasopressor Guidelines"]},{id:"C",text:"Dobutamine ekle",isCorrect:!1,points:10,riskImpact:1,explanation:"Ä°notropik ajan, Ã¶nce vazokonstriksiyon gerekli",references:["Hemodynamic Guidelines"]},{id:"D",text:"Hemodiyaliz baÅŸla",isCorrect:!1,points:0,riskImpact:2,explanation:"HenÃ¼z RRT endikasyonu yok, Ã¶nce hemodinami dÃ¼zelmeli"}],correctAnswer:"B",explanation:"âœ… DOÄRU CEVAP: B) Norepinephrine infÃ¼zyon baÅŸla\n\nğŸ“ AÃ§Ä±klama: 30 mL/kg sÄ±vÄ± sonrasÄ± MAP <65 mmHg ise vazopresÃ¶r endikasyonu vardÄ±r. Norepinephrine birinci seÃ§enektir.",consequences:{A:"SÄ±vÄ± yÃ¼klenmesi â†’ pulmoner Ã¶dem riski",B:"Optimal vazopresÃ¶r â†’ MAP dÃ¼zelme beklenir",C:"Ä°notropik etki ama vazodilatÃ¶r â†’ MAP dÃ¼ÅŸer",D:"Premature RRT â†’ komplikasyon riski"},timeLimit:90},{id:"decision-5",timePoint:"12. saat - Prognoz DeÄŸerlendirmesi",scenario:"12. saatte: MAP: 68 mmHg, Laktat: 2.1 mmol/L, Ä°drar Ã§Ä±kÄ±ÅŸÄ±: 45 mL/saat, Bilinci aÃ§Ä±k",question:"â“ KARAR NOKTASI 5: PROGNOZ DEÄERLENDÄ°RME\n\n12. saatte:\nâ€¢ MAP: 68 mmHg (norepinephrine 0.1 Î¼g/kg/dk)\nâ€¢ Laktat: 2.1 mmol/L\nâ€¢ Ä°drar Ã§Ä±kÄ±ÅŸÄ±: 45 mL/saat\nâ€¢ Bilinci aÃ§Ä±k, koopere\n\nBu hastanÄ±n kÄ±sa dÃ¶nem prognozunu nasÄ±l deÄŸerlendirirsiniz?",options:[{id:"A",text:"Mortalite riski %60-80 (Ã§ok yÃ¼ksek)",isCorrect:!1,points:5,riskImpact:0,explanation:"Ã‡ok kÃ¶tÃ¼mser, hastada iyileÅŸme bulgularÄ± var",references:["SOFA Score Studies"]},{id:"B",text:"Mortalite riski %30-40 (orta-yÃ¼ksek)",isCorrect:!1,points:10,riskImpact:0,explanation:"Hala kÃ¶tÃ¼mser, iyileÅŸme belirgin",references:["Sepsis Outcome Studies"]},{id:"C",text:"Mortalite riski %10-15 (dÃ¼ÅŸÃ¼k)",isCorrect:!0,points:20,riskImpact:-1,explanation:"DoÄŸru! Erken tanÄ± + uygun tedavi ile laktat clearing + organ fonksiyon dÃ¼zelimi olmasÄ± prognozu iyileÅŸtirir.",references:["Sepsis Outcome Predictors","SOFA Trend Analysis"]},{id:"D",text:"Tam iyileÅŸme garantili",isCorrect:!1,points:0,riskImpact:-1,explanation:"AÅŸÄ±rÄ± iyimser, sepsis her zaman risk taÅŸÄ±r"}],correctAnswer:"C",explanation:"âœ… DOÄRU CEVAP: C) Mortalite riski %10-15 (dÃ¼ÅŸÃ¼k)\n\nğŸ“ AÃ§Ä±klama: Erken tanÄ± + uygun tedavi ile laktat clearing + organ fonksiyon dÃ¼zelimi olmasÄ± prognozu iyileÅŸtirir.",consequences:{A:"AÅŸÄ±rÄ± kÃ¶tÃ¼mser â†’ hasta ve aile kaygÄ±sÄ±",B:"KÃ¶tÃ¼mser â†’ gereksiz yoÄŸun mÃ¼dahale",C:"GerÃ§ekÃ§i prognoz â†’ uygun planlama",D:"AÅŸÄ±rÄ± iyimser â†’ dikkat azalmasÄ± riski"},timeLimit:120}],diagnosticApproach:["qSOFA ve SOFA skorlamasÄ±","Sepsis-3 kriterlerine gÃ¶re deÄŸerlendirme","Kaynak enfeksiyon araÅŸtÄ±rmasÄ±","Organ yetmezliÄŸi deÄŸerlendirmesi","Hemodinamik monitÃ¶rizasyon"],treatment:["1-Saat Bundle uygulamasÄ±","30 mL/kg kristalloid resÃ¼sitasyonu","KÃ¼ltÃ¼r + geniÅŸ spektrum antibiyotik","VazopresÃ¶r desteÄŸi (MAP >65 mmHg)","Kaynak kontrolÃ¼"],learningObjectives:["Sepsis-3 kriterlerini uygulayabilmek","1-saat bundle'Ä± doÄŸru sÄ±rada yapabilmek","VazopresÃ¶r baÅŸlama kriterlerini bilmek","Antibiyotik seÃ§imini uygun yapabilmek","Prognoz deÄŸerlendirmesi yapabilmek"],difficulty:"hard",timeLimit:45,scoringCriteria:[{category:"Kritik Kararlar",maxPoints:60,description:"DoÄŸru sÄ±ralama ve zamanÄ±nda mÃ¼dahale"},{category:"Zaman PerformansÄ±",maxPoints:25,description:"HÄ±zlÄ± ve doÄŸru karar verme"},{category:"Komplikasyon Riski",maxPoints:15,description:"Risk minimizasyonu"}]}],requiredSkills:["Sepsis tanÄ± kriterleri","Emergency resuscitation","Antibiotic stewardship","Hemodynamic monitoring","Critical care principles","Turkish emergency protocols"],turkishMedicalTerms:{sepsis:"sepsis","septic shock":"septik ÅŸok",resuscitation:"resÃ¼sitasyon",vasopressor:"vazopresÃ¶r",norepinephrine:"norepinefrin",crystalloid:"kristalloid",antibiotic:"antibiyotik","source control":"kaynak kontrolÃ¼","lactate clearance":"laktat klirensÄ±","mean arterial pressure":"ortalama arter basÄ±ncÄ±"},internationalGuidelines:["Surviving Sepsis Campaign 2021 Guidelines","IDSA Sepsis Management 2023 Update","Turkish Society of Intensive Care Medicine Consensus","SCCM/ESICM Sepsis Guidelines"],scoringSystem:{totalPoints:100,categories:[{name:"Kritik Kararlar",points:60,weight:.6},{name:"Zaman YÃ¶netimi",points:25,weight:.25},{name:"Risk YÃ¶netimi",points:15,weight:.15}],performanceLevels:[{score:90,label:"Uzman Seviyesi",description:"Sepsis yÃ¶netiminde excellence"},{score:75,label:"Yetkin Seviyesi",description:"Ä°yi klinik performans"},{score:60,label:"GeliÅŸtirilmeli",description:"Temel bilgi var, pratik gerekli"},{score:0,label:"Ciddi EÄŸitim Ä°htiyacÄ±",description:"KapsamlÄ± eÄŸitim gerekli"}]},timeConstraints:[{phase:"Ä°lk DeÄŸerlendirme",duration:2,criticalActions:["ABC","Vital signs","qSOFA"]},{phase:"ResÃ¼sitasyon BaÅŸlangÄ±cÄ±",duration:15,criticalActions:["30 mL/kg sÄ±vÄ±","Kan kÃ¼ltÃ¼rÃ¼","IV access"]},{phase:"1-Saat Bundle",duration:60,criticalActions:["Antibiyotik","Kaynak araÅŸtÄ±rma","Laktat follow-up"]},{phase:"VazopresÃ¶r DeÄŸerlendirmesi",duration:180,criticalActions:["MAP monitoring","Norepinephrine","Ä°drar takibi"]},{phase:"Ä°yileÅŸme Ä°zlemi",duration:720,criticalActions:["Laktat clearing","Organ fonksiyon","Prognoz"]}]},{id:"case-stemi-complete",title:"ğŸ’” VAKA 2: STEMI AKUT YÃ–NETÄ°MÄ°",description:"Door-to-balloon optimization ve RV infarkt yÃ¶netimi - Tam protokol implementasyonu",category:"cardiology",language:"bilingual",resources:["2023 ACC/AHA STEMI Guidelines","2017 ESC STEMI Management","TSC (TÃ¼rk Kardiyoloji DerneÄŸi) Konsensus 2022","Door-to-Balloon Quality Measures"],assessments:["EKG Ä°nterpretasyon Challenge","Reperfusion Strategy Selection","Door-to-Balloon Time Optimization","RV Infarct Management Protocol"],estimatedTime:40,completed:!1,difficulty:"advanced",aiPrompts:["Bu EKG bulgularÄ±nÄ±n anatomik korelasyonu nedir?","Door-to-balloon vs door-to-needle kararÄ± nasÄ±l verilir?","RV infarkt bulgularÄ± nasÄ±l deÄŸerlendirilir?","Reperfusion stratejisi seÃ§im kriterleri nelerdir?","TÃ¼rk kardiyoloji kÄ±lavuzlarÄ±na gÃ¶re optimal yaklaÅŸÄ±m?"],clinicalCases:[{id:"stemi-main-case",title:"STEMI Management Decision Challenge",patient:{age:58,gender:"male",chiefComplaint:"GÃ¶ÄŸÃ¼s aÄŸrÄ±sÄ± ve terleme",history:"2 saat Ã¶nce baÅŸlayan, crushing tarzÄ± gÃ¶ÄŸÃ¼s aÄŸrÄ±sÄ±, sol kola yayÄ±lan aÄŸrÄ±, terleme",examination:"S4 galop (+), mitral Ã¼fÃ¼rÃ¼m yok, akciÄŸer bazillerde minimal raller",investigations:["12-derivasyon EKG","18-lead EKG","Kardiyak enzimler","AkciÄŸer grafisi"],comorbidities:["Sigara (20 paket/yÄ±l)","Hipertansiyon"],medications:["ACE inhibitÃ¶rÃ¼"],allergies:["Bilinen ilaÃ§ alerjisi yok"],socialHistory:"Aile Ã¶ykÃ¼sÃ¼nde erken koroner hastalÄ±k (+)"},presentation:"58 yaÅŸ erkek hasta, gÃ¶ÄŸÃ¼s aÄŸrÄ±sÄ± ÅŸikayeti ile acil servise baÅŸvurdu.",vitalSigns:{heartRate:68,bloodPressure:"140/85 mmHg",temperature:36.5,oxygenSaturation:96,respiratoryRate:18},labResults:[{test:"Troponin I",value:"25.6 ng/mL",normalRange:"<0.04 ng/mL",significance:"Ã‡ok yÃ¼ksek - akut MI"},{test:"CK-MB",value:"45 ng/mL",normalRange:"<6.3 ng/mL",significance:"YÃ¼ksek - miyokard hasarÄ±"},{test:"D-dimer",value:"150 ng/mL",normalRange:"<500 ng/mL",significance:"Normal"},{test:"NT-proBNP",value:"450 pg/mL",normalRange:"<125 pg/mL",significance:"YÃ¼ksek - kalp yetmezliÄŸi riski"}],imagingFindings:["EKG: ST elevasyonu D2, D3, aVF derivasyonlarÄ±nda (3mm)","18-lead EKG: V3R, V4R derivasyonlarÄ±nda ST elevasyonu (+)","AkciÄŸer grafisi: Kardiyomegali yok, pulmoner konjesyon yok"],decisionTree:[{id:"stemi-decision-1",timePoint:"Ä°lk 10 dakika - TanÄ±sal YaklaÅŸÄ±m",scenario:"EKG: ST elevasyonu D2, D3, aVF derivasyonlarÄ±nda. Bu EKG bulgularÄ± hangi koroner anatomiyi iÅŸaret eder?",question:"â“ KARAR NOKTASI 1: TANSAL YAKLAÅÄ°M\nZaman limiti: 3 dakika\n\nBu EKG bulgularÄ± hangi koroner anatomiyi iÅŸaret eder?",options:[{id:"A",text:"LAD (Left Anterior Descending) proksimal oklÃ¼zyon",isCorrect:!1,points:0,riskImpact:1,explanation:"LAD oklÃ¼zyonu anterior derivasyonlarda (V1-V6) ST elevasyonu yapar",references:["EKG Interpretation Guide"]},{id:"B",text:"RCA (Right Coronary Artery) oklÃ¼zyon",isCorrect:!0,points:25,riskImpact:-1,explanation:"DoÄŸru! D2, D3, aVF'de ST elevasyonu inferior MI'yi gÃ¶sterir ve tipik olarak RCA oklÃ¼zyonuna baÄŸlÄ±dÄ±r.",references:["Coronary Anatomy","EKG Localization"]},{id:"C",text:"LCX (Left Circumflex) oklÃ¼zyon",isCorrect:!1,points:10,riskImpact:0,explanation:"LCX genelde lateral derivasyonlarda (I, aVL, V5-V6) deÄŸiÅŸiklik yapar",references:["Coronary Territory Guide"]},{id:"D",text:"Left main coronary artery oklÃ¼zyon",isCorrect:!1,points:5,riskImpact:2,explanation:"Left main tÃ¼m anterior derivasyonlarda yaygÄ±n ST deÄŸiÅŸiklikleri yapar",references:["High-risk ACS Guidelines"]}],correctAnswer:"B",explanation:"âœ… DOÄRU CEVAP: B) RCA (Right Coronary Artery) oklÃ¼zyon\n\nğŸ“ AÃ§Ä±klama: D2, D3, aVF'de ST elevasyonu inferior MI'yi gÃ¶sterir ve tipik olarak RCA oklÃ¼zyonuna baÄŸlÄ±dÄ±r.",consequences:{A:"YanlÄ±ÅŸ lokalizasyon â†’ yanlÄ±ÅŸ risk deÄŸerlendirmesi",B:"DoÄŸru tanÄ± â†’ uygun reperfÃ¼zyon stratejisi",C:"Anatomik hata â†’ komplikasyon gÃ¶zden kaÃ§abilir",D:"AÅŸÄ±rÄ± alarm â†’ gereksiz yoÄŸun mÃ¼dahale"},timeLimit:180},{id:"stemi-decision-2",timePoint:"15. dakika - Komplikasyon AraÅŸtÄ±rmasÄ±",scenario:"18-lead EKG: V3R, V4R derivasyonlarÄ±nda ST elevasyonu (+). Bu bulgu ne anlama gelir?",question:"â“ KARAR NOKTASI 2: KOMPLÄ°KASYON ARAÅTIRMASI\n\n18-lead EKG: V3R, V4R derivasyonlarÄ±nda ST elevasyonu (+)\n\nBu bulgu ne anlama gelir?",options:[{id:"A",text:"Posterior MI eklendi",isCorrect:!1,points:10,riskImpact:0,explanation:"Posterior MI iÃ§in V7-V9 derivasyonlarÄ± gerekli",references:["Posterior MI Diagnosis"]},{id:"B",text:"SaÄŸ ventrikÃ¼l infarktÄ± var",isCorrect:!0,points:25,riskImpact:-2,explanation:"DoÄŸru! Inferior MI + saÄŸ prekordiyel derivasyonlarda ST elevasyonu RV infarktÄ±nÄ± gÃ¶sterir. Bu durum Ã¶zel yÃ¶netim gerektirir.",references:["RV Infarct Guidelines","Right Heart Catheterization"]},{id:"C",text:"Atriyal infarkt mevcut",isCorrect:!1,points:5,riskImpact:1,explanation:"Atriyal infarkt Ã§ok nadir ve farklÄ± EKG bulgularÄ± verir",references:["Rare MI Patterns"]},{id:"D",text:"Sadece artifakt",isCorrect:!1,points:0,riskImpact:3,explanation:"V4R'de ST elevasyonu ciddi bulgu, gÃ¶z ardÄ± edilmemeli",references:["EKG Artifact Recognition"]}],correctAnswer:"B",explanation:"âœ… DOÄRU CEVAP: B) SaÄŸ ventrikÃ¼l infarktÄ± var\n\nğŸ“ AÃ§Ä±klama: Inferior MI + saÄŸ prekordiyel derivasyonlarda ST elevasyonu RV infarktÄ±nÄ± gÃ¶sterir. Bu durum Ã¶zel yÃ¶netim gerektirir.",consequences:{A:"YanlÄ±ÅŸ tanÄ± â†’ yanlÄ±ÅŸ tedavi yaklaÅŸÄ±mÄ±",B:"DoÄŸru tanÄ± â†’ RV infarkt protokolÃ¼ baÅŸlar",C:"NadÄ±r tanÄ± â†’ gereksiz araÅŸtÄ±rma",D:"Kritik bulgu gÃ¶zden kaÃ§ar â†’ RV yetmezliÄŸi riski"},timeLimit:120},{id:"stemi-decision-3",timePoint:"25. dakika - ReperfÃ¼zyon Stratejisi",scenario:"Hastane durumu: Primer PCI imkanÄ± YOK, En yakÄ±n PCI merkezi 90 dakika uzaklÄ±kta, tPA stoku mevcut, Semptom baÅŸlangÄ±cÄ±: 2.5 saat Ã¶nce",question:"â“ KARAR NOKTASI 3: REPERFÃœZÄ°ON STRATEJÄ°SÄ°\n\nHastane durumu:\nâ€¢ Primer PCI imkanÄ± YOK\nâ€¢ En yakÄ±n PCI merkezi 90 dakika uzaklÄ±kta\nâ€¢ tPA stoku mevcut\nâ€¢ Semptom baÅŸlangÄ±cÄ±: 2.5 saat Ã¶nce\n\nEn uygun reperfÃ¼zyon stratejisi?",options:[{id:"A",text:"Ä°mmediately tPA + transfer for rescue PCI if needed",isCorrect:!0,points:30,riskImpact:-2,explanation:"DoÄŸru! Door-to-balloon time >120 dk ise fibrinolitik tedavi Ã¶nceliklidir (door-to-needle <30 dk hedefi).",references:["Reperfusion Strategy Guidelines","STEMI Networks"]},{id:"B",text:"Transfer for primary PCI (2 saatlik transport)",isCorrect:!1,points:15,riskImpact:1,explanation:"Transfer sÃ¼re >120dk, fibrinolitik daha avantajlÄ±",references:["Door-to-Balloon Guidelines"]},{id:"C",text:"Conservative management (no reperfusion)",isCorrect:!1,points:0,riskImpact:3,explanation:"STEMI'de reperfÃ¼zyon mutlak endikasyon",references:["STEMI Guidelines"]},{id:"D",text:"Heparin + antiaggregant therapy only",isCorrect:!1,points:5,riskImpact:3,explanation:"Medical therapy tek baÅŸÄ±na yetersiz",references:["Antiplatelet Guidelines"]}],correctAnswer:"A",explanation:"âœ… DOÄRU CEVAP: A) Ä°mmediately tPA + transfer for rescue PCI if needed\n\nğŸ“ AÃ§Ä±klama: Door-to-balloon time >120 dk ise fibrinolitik tedavi Ã¶nceliklidir (door-to-needle <30 dk hedefi).",consequences:{A:"Optimal reperfusion â†’ miyokard kurtarma maksimal",B:"Geciken reperfusion â†’ daha fazla miyokard kaybÄ±",C:"Reperfusion yok â†’ masif infarkt riski",D:"Yetersiz tedavi â†’ kÃ¶tÃ¼ prognoz"},timeLimit:180}],diagnosticApproach:["12-derivasyon EKG analizi","18-lead EKG (RV derivasyonlarÄ±)","Kardiyak biomarker Ã¶lÃ§Ã¼mÃ¼","Reperfusion stratejisi belirleme","Door-to-needle/balloon zaman optimizasyonu"],treatment:["Dual antiplatelet therapy (ASA + P2Y12)","Fibrinolitik tedavi (tPA)","AntikoagÃ¼lan tedavi","RV infarkt Ã¶zel yÃ¶netimi","Rescue PCI hazÄ±rlÄ±ÄŸÄ±"],learningObjectives:["STEMI tanÄ± kriterlerini uygulamak","RV infarkt bulgularÄ±nÄ± tanÄ±mak","Reperfusion strategy seÃ§imi yapabilmek","Door-to-needle time optimize etmek","Post-MI komplikasyonlarÄ± Ã¶ngÃ¶rmek"],difficulty:"hard",timeLimit:40,scoringCriteria:[{category:"TanÄ±sal DoÄŸruluk",maxPoints:30,description:"EKG yorumu ve komplikasyon tanÄ±ma"},{category:"Reperfusion ZamanlamasÄ±",maxPoints:35,description:"DoÄŸru strateji ve timing"},{category:"Komplikasyon YÃ¶netimi",maxPoints:25,description:"RV infarkt ve hipotansiyon"},{category:"Transfer KararÄ±",maxPoints:10,description:"Risk-benefit deÄŸerlendirme"}]}],requiredSkills:["EKG interpretation","Coronary anatomy knowledge","Reperfusion strategies","RV infarct management","Time-critical decision making","Turkish cardiology protocols"],turkishMedicalTerms:{STEMI:"ST elevasyonlu miyokard infarktÃ¼sÃ¼","primary PCI":"primer perkÃ¼tan koroner giriÅŸim","door-to-balloon":"kapÄ±-balon sÃ¼resi","door-to-needle":"kapÄ±-iÄŸne sÃ¼resi",fibrinolytic:"fibrinolitik",reperfusion:"reperfÃ¼zyon","RV infarct":"saÄŸ ventrikÃ¼l infarktÄ±","rescue PCI":"kurtarma PGÄ°","dual antiplatelet":"ikili antiplatelet",biomarkers:"biyobelirteÃ§ler"},internationalGuidelines:["2023 ACC/AHA STEMI Guidelines","2017 ESC STEMI Management","Turkish Society of Cardiology Consensus 2022","Door-to-Balloon Quality Measures"]},{id:"case-status-epilepticus-complete",title:"âš¡ VAKA 3: STATUS EPÄ°LEPTÄ°KUS - NEUROLOJÄ°K ACÄ°L DURUM",description:"Status epilepticus - nÃ¶rolojik acil durum yÃ¶netimi ve stepwise approach. TÃ¼rk NÃ¶roloji DerneÄŸi kÄ±lavuzlarÄ± ile uyumlu tam protokol.",category:"emergency-medicine",language:"bilingual",resources:["Status Epilepticus Management Protocol","AES Guidelines 2023","Turkish Neurology Society Guidelines","EEG interpretation basics"],assessments:["Decision Tree Analysis","Time-Critical Management","Drug Selection Rationale"],estimatedTime:2.5,completed:!1,difficulty:"advanced",aiPrompts:["CRITICAL: Status epilepticus tanÄ± ve tedavi protokolÃ¼nÃ¼ TÃ¼rk kÄ±lavuzlarÄ± ile karÅŸÄ±laÅŸtÄ±r","Anti-epileptik ilaÃ§ seÃ§iminde pediatrik vs adult farklÄ±lÄ±klarÄ±","EEG monitorizasyon gerekliliÄŸi ve timing"],requiredSkills:["Status epilepticus immediate recognition","Stepwise anti-epileptic drug protocol","Airway management in seizures","EEG interpretation basics","Turkish neurology guidelines compliance"],turkishMedicalTerms:{"status epilepticus":"status epileptikus","convulsive SE":"konvÃ¼lsif SE","non-convulsive SE":"non-konvÃ¼lsif SE","breakthrough seizures":"breakthrough nÃ¶betler","refractory SE":"refrakter SE","super-refractory SE":"sÃ¼per-refrakter SE"},internationalGuidelines:["2023 AES Status Epilepticus Guidelines","Turkish Neurology Society Consensus 2022","2019 ESICM/EAN Guidelines"],clinicalCases:[{id:"status-epilepticus-main",title:"âš¡ 28Y Male - Status Epilepticus",patient:{age:28,gender:"male",chiefComplaint:"SÃ¼rekli nÃ¶bet, 15 dakikadÄ±r durmayan",history:"Epilepsi tanÄ±sÄ± yok, alkol kullanÄ±m Ã¶ykÃ¼sÃ¼ var, 15 dakikadÄ±r sÃ¼rekli tonik-klonik nÃ¶bet",examination:"BilinÃ§siz, sÃ¼rekli nÃ¶bet aktivitesi, refleksler hiperrefletik",investigations:["EEG","Kraniyal CT","Glukoz","Elektrolit paneli"],comorbidities:["Alkol kullanÄ±m bozukluÄŸu"]},presentation:"28 yaÅŸÄ±nda erkek hasta, 15 dakikadÄ±r sÃ¼rekli tonik-klonik nÃ¶bet geÃ§iriyor. Ailesi geÃ§ fark etmiÅŸ, ambulans Ã§aÄŸÄ±rÄ±lmÄ±ÅŸ.",vitalSigns:{heartRate:135,bloodPressure:"165/95",temperature:38.2,respiratoryRate:28,oxygenSaturation:89,glasgow:6},labResults:[{test:"Glukoz",value:"65 mg/dL (DÃ¼ÅŸÃ¼k)",normalRange:"70-110 mg/dL",significance:"abnormal"},{test:"Na",value:"128 mEq/L (DÃ¼ÅŸÃ¼k)",normalRange:"135-145 mEq/L",significance:"abnormal"},{test:"Laktat",value:"4.8 mmol/L (YÃ¼ksek)",normalRange:"<2.0 mmol/L",significance:"critical"},{test:"pH",value:"7.28 (Asidoz)",normalRange:"7.35-7.45",significance:"critical"},{test:"Alkol",value:"180 mg/dL (YÃ¼ksek)",normalRange:"0 mg/dL",significance:"abnormal"}],decisionTree:[{id:"se-decision-1",timePoint:"Ä°lk 5 dakika - Acil MÃ¼dahale",scenario:"15 dakikadÄ±r sÃ¼rekli nÃ¶bet geÃ§iren hasta acil servise getirildi. SaO2: %89, nabÄ±z: 135/dk",question:"â“ KARAR NOKTASI 1: HAVAYOLU ve Ä°LK MÃœDAHALE\nZaman limiti: 2 dakika\n\nStatus epilepticus tanÄ±sÄ± konuldu. Ä°lk Ã¶nceliÄŸiniz nedir?",options:[{id:"A",text:"IV lorazepam 4mg yavaÅŸ push",isCorrect:!1,points:15,riskImpact:0,explanation:"IV benzodiazepine geÃ§meden Ã¶nce havayolu gÃ¼venliÄŸi saÄŸlanmalÄ±",references:["AES Guidelines 2023"]},{id:"B",text:"Havayolu gÃ¼venliÄŸi + O2 + IV access",isCorrect:!0,points:20,riskImpact:-2,explanation:"DoÄŸru! Status epilepticus'ta ilk Ã¶ncelik havayolu gÃ¼venliÄŸi, oksijenizasyon ve IV eriÅŸim",references:["Turkish Emergency Medicine Guidelines"]},{id:"C",text:"Derhal entÃ¼basyon hazÄ±rlÄ±ÄŸÄ±",isCorrect:!1,points:5,riskImpact:1,explanation:"Premature entÃ¼basyon. Ã–nce benzodiazepine denenebilir"},{id:"D",text:"EEG monitoring baÅŸlat",isCorrect:!1,points:0,riskImpact:2,explanation:"EEG sonraya bÄ±rakÄ±lÄ±r, acil mÃ¼dahale Ã¶ncelik"}],correctAnswer:"B",explanation:"âœ… DOÄRU CEVAP: B) Havayolu gÃ¼venliÄŸi + O2 + IV access\n\nğŸ“ AÃ§Ä±klama: Status epilepticus'ta ABC yaklaÅŸÄ±mÄ± kritik. Havayolu, solunum, dolaÅŸÄ±m gÃ¼venliÄŸi Ã¶ncelik.",consequences:{A:"Havayolu gÃ¼venliÄŸi risk altÄ±nda",B:"Optimal baÅŸlangÄ±Ã§ â†’ gÃ¼venli ilaÃ§ uygulamasÄ±",C:"Gereksiz invaziv mÃ¼dahale riski",D:"Kritik zaman kaybÄ±"},timeLimit:120,hints:["ABC yaklaÅŸÄ±mÄ± unutma","Ä°V eriÅŸim ÅŸart","Oksijenizasyon kritik"]},{id:"se-decision-2",timePoint:"7. dakika - Benzodiazepin AÅŸamasÄ±",scenario:"Havayolu gÃ¼venliÄŸi saÄŸlandÄ±, IV eriÅŸim var, O2 verildi. NÃ¶bet devam ediyor.",question:"â“ KARAR NOKTASI 2: BENZODÄ°AZEPÄ°N SEÃ‡Ä°MÄ°\n\nHavayolu gÃ¼venliÄŸi saÄŸlandÄ±, IV eriÅŸim mevcut. NÃ¶bet 20 dakikadÄ±r devam ediyor.\n\nÄ°lk line benzodiazepin seÃ§iminiz?",options:[{id:"A",text:"Midazolam 10mg IM",isCorrect:!1,points:10,riskImpact:0,explanation:"IV eriÅŸim var ise IV tercih edilir",references:["AES Guidelines"]},{id:"B",text:"Lorazepam 0.1mg/kg IV (max 4mg)",isCorrect:!0,points:20,riskImpact:-2,explanation:"DoÄŸru! IV lorazepam first-line, daha uzun etki sÃ¼resi",references:["AES 2023","Turkish Neurology Guidelines"]},{id:"C",text:"Diazepam 0.15mg/kg IV",isCorrect:!1,points:15,riskImpact:-1,explanation:"Alternatif seÃ§enek ama lorazepam preferred",references:["WHO Guidelines"]},{id:"D",text:"Phenytoin 20mg/kg yÃ¼kleme",isCorrect:!1,points:5,riskImpact:1,explanation:"Phenytoin 2nd line, Ã¶nce benzodiazepin denenmelidir"}],correctAnswer:"B",explanation:"âœ… DOÄRU CEVAP: B) Lorazepam 0.1mg/kg IV (max 4mg)\n\nğŸ“ AÃ§Ä±klama: Lorazepam first-line IV benzodiazepin, uzun etki sÃ¼resi ve etkili penetrasyon.",consequences:{A:"IV route daha etkili olurdu",B:"Optimal benzodiazepin seÃ§imi",C:"Acceptable ama lorazepam daha iyi",D:"2nd line'a erken geÃ§iÅŸ"},timeLimit:90}],diagnosticApproach:["Status epilepticus recognition","Airway assessment","EEG if available","Metabolic workup"],treatment:["ABC approach","IV benzodiazepines","Anti-epileptic loading","EEG monitoring"],learningObjectives:["Status epilepticus immediate recognition and management","Stepwise anti-epileptic drug protocol understanding","Time-critical decision making in neurological emergencies"],difficulty:"hard",timeLimit:30,scoringCriteria:[{category:"Havayolu yÃ¶netimi",maxPoints:25,description:"ABC yaklaÅŸÄ±mÄ± ve havayolu gÃ¼venliÄŸi"},{category:"Benzodiazepin seÃ§imi",maxPoints:25,description:"Uygun ilaÃ§ seÃ§imi ve dozlama"},{category:"Zaman yÃ¶netimi",maxPoints:25,description:"HÄ±zlÄ± ve etkili karar verme"},{category:"Protokol adherence",maxPoints:25,description:"KÄ±lavuz uyumluluÄŸu"}]}]},{id:"case-febrile-neutropenia-complete",title:"ğŸ”¥ VAKA 4: FEBRÄ°L NÃ–TROPENÄ° - ONKOLOJÄ°K ACÄ°L DURUM",description:"Febril nÃ¶tropeni - onkolojik acil durum, empirik antibiyoterapi yaklaÅŸÄ±mÄ±. MASCC skorlamasÄ± ve risk stratifikasyonu ile Turkish Oncology Society guidelines.",category:"oncology",language:"bilingual",resources:["NCCN Fever and Neutropenia Guidelines 2023","MASCC Risk Assessment","Turkish Oncology Society Protocols","Empirical Antibiotic Selection"],assessments:["Risk Stratification","Antibiotic Selection","MASCC Score Calculation"],estimatedTime:2,completed:!1,difficulty:"advanced",aiPrompts:["Febril nÃ¶tropeni risk stratifikasyonu - MASCC vs CISNE scoring","Empirik antibiyotik seÃ§imi - local resistance patterns vs guidelines","Outpatient vs inpatient management criteria"],requiredSkills:["Febrile neutropenia recognition","MASCC risk score calculation","Empirical antibiotic selection","Risk stratification and disposition","Turkish oncology guidelines compliance"],turkishMedicalTerms:{"febrile neutropenia":"febril nÃ¶tropeni",neutropenia:"nÃ¶tropeni","absolute neutrophil count":"mutlak nÃ¶trofil sayÄ±sÄ±","empirical therapy":"empirik tedavi","broad-spectrum antibiotics":"geniÅŸ spektrum antibiyotik","high-risk":"yÃ¼ksek risk","low-risk":"dÃ¼ÅŸÃ¼k risk"},internationalGuidelines:["2023 NCCN Fever and Neutropenia","ESMO Febrile Neutropenia Guidelines","Turkish Society of Medical Oncology 2022"],clinicalCases:[{id:"febrile-neutropenia-main",title:"ğŸ”¥ 45Y Female - Febrile Neutropenia Post-Chemo",patient:{age:45,gender:"female",chiefComplaint:"AteÅŸ, titreme, halsizlik",history:"7 gÃ¼n Ã¶nce kemoterapisi aldÄ± (AC protokolÃ¼), bugÃ¼n ateÅŸ baÅŸladÄ±, titreme var",examination:"Genel durum orta, ateÅŸli, hafif takipneik, port kateter mevcut",investigations:["Tam kan sayÄ±mÄ±","CRP","Prokalsitonin","Kan kÃ¼ltÃ¼rÃ¼"],comorbidities:["Meme kanseri T2N1M0","Adjuvant kemoterapi alÄ±yor"]},presentation:"45 yaÅŸÄ±nda meme kanseri hastasÄ±, 7 gÃ¼n Ã¶nce AC kemoterapi aldÄ±ktan sonra ateÅŸ ve titreme ile baÅŸvurdu.",vitalSigns:{heartRate:115,bloodPressure:"105/65",temperature:38.7,respiratoryRate:22,oxygenSaturation:96,glasgow:15},labResults:[{test:"WBC",value:"1,200/Î¼L (DÃ¼ÅŸÃ¼k)",normalRange:"4,000-11,000/Î¼L",significance:"critical"},{test:"ANC",value:"400/Î¼L (DÃ¼ÅŸÃ¼k)",normalRange:">1,500/Î¼L",significance:"critical"},{test:"Plt",value:"85,000/Î¼L (DÃ¼ÅŸÃ¼k)",normalRange:"150,000-450,000/Î¼L",significance:"abnormal"},{test:"CRP",value:"45 mg/L (YÃ¼ksek)",normalRange:"<3 mg/L",significance:"abnormal"},{test:"Prokalsitonin",value:"1.2 ng/mL (YÃ¼ksek)",normalRange:"<0.25 ng/mL",significance:"abnormal"}],decisionTree:[{id:"fn-decision-1",timePoint:"Ä°lk deÄŸerlendirme - Risk Stratifikasyonu",scenario:"Kemoterapiden 7 gÃ¼n sonra febril nÃ¶tropeni tanÄ±sÄ± konuldu. Risk deÄŸerlendirmesi yapÄ±lacak.",question:"â“ KARAR NOKTASI 1: RÄ°SK STRATÄ°FÄ°KASYONU\nZaman limiti: 5 dakika\n\nHasta: 45Y, AC kemoterapi +7 gÃ¼n, AteÅŸ: 38.7Â°C, ANC: 400/Î¼L\nECOG PS: 1, Komorbidite: Yok, Hipotansiyon: Yok\n\nMASCC skorunuz ve ilk yaklaÅŸÄ±mÄ±nÄ±z?",options:[{id:"A",text:"MASCC >21 â†’ outpatient oral antibiyotik",isCorrect:!1,points:10,riskImpact:1,explanation:"MASCC hesaplama hatalÄ±, bu hasta yÃ¼ksek risk",references:["MASCC Guidelines"]},{id:"B",text:"MASCC <21 â†’ high-risk, hospitalization + IV antibiyotik",isCorrect:!0,points:20,riskImpact:-2,explanation:"DoÄŸru! Solid tÃ¼mÃ¶r + ANC <500 + serious medical condition = high-risk",references:["NCCN 2023","MASCC Score"]},{id:"C",text:"Risk belirsiz, kÃ¼ltÃ¼r sonucu bekle",isCorrect:!1,points:0,riskImpact:3,explanation:"Febril nÃ¶tropeni medical emergency, kÃ¼ltÃ¼r beklenilmez",references:["Emergency Medicine Guidelines"]},{id:"D",text:"Moderate risk â†’ day hospital monitoring",isCorrect:!1,points:5,riskImpact:2,explanation:"Bu hasta aÃ§Ä±k high-risk kategorisinde"}],correctAnswer:"B",explanation:"âœ… DOÄRU CEVAP: B) MASCC <21 â†’ high-risk, hospitalization + IV antibiyotik\n\nğŸ“ MASCC Hesaplama:\n- Burden of illness: No symptoms (5 puan)\n- No hypotension (5 puan)\n- No COPD (4 puan)\n- Solid tumor/no previous fungal (4 puan)\n- No dehydration (3 puan)\n- Outpatient status (3 puan)\n- Age <60 (0 puan)\nToplam: ~24 puan deÄŸil - ANC <500 severe olduÄŸu iÃ§in high-risk",consequences:{A:"YanlÄ±ÅŸ risk deÄŸerlendirmesi â†’ yetersiz tedavi",B:"DoÄŸru risk stratifikasyonu â†’ optimal tedavi",C:"Kritik zaman kaybÄ± â†’ morbidite artÄ±ÅŸÄ±",D:"Risk altÄ±nda tedavi"},timeLimit:300,hints:["MASCC score components gÃ¶zden geÃ§ir","ANC <500 major risk factor","Medical emergency unutma"]}],diagnosticApproach:["Fever workup","MASCC risk scoring","Culture collection","Chest imaging"],treatment:["IV empirical antibiotics","Supportive care","Monitor for complications","G-CSF if indicated"],learningObjectives:["Febrile neutropenia recognition and risk assessment","MASCC risk score calculation and application","Empirical antibiotic selection principles"],difficulty:"hard",timeLimit:25,scoringCriteria:[{category:"Risk assessment accuracy",maxPoints:30,description:"DoÄŸru risk deÄŸerlendirmesi ve MASCC skoru"},{category:"MASCC score calculation",maxPoints:25,description:"MASCC risk skoru hesaplama doÄŸruluÄŸu"},{category:"Treatment approach",maxPoints:25,description:"Uygun antibiyotik seÃ§imi ve disposition"},{category:"Time management",maxPoints:20,description:"HÄ±zlÄ± deÄŸerlendirme ve mÃ¼dahale"}]}]}];class Kt{constructor(){m(this,"synthesis"),m(this,"voices",[]),m(this,"isSupported",!1),m(this,"medicalConfig"),this.synthesis=window.speechSynthesis,this.isSupported="speechSynthesis"in window,this.medicalConfig=this.initializeMedicalConfig(),this.initializeVoices()}initializeMedicalConfig(){return{medicalTerms:{hipertansiyon:"hi-per-tan-si-yon",miyokard:"mi-yo-kard","infarktÃ¼sÃ¼":"in-fark-tÃ¼-sÃ¼",septik:"sep-tik",epileptikus:"e-pi-lep-ti-kus","nÃ¶tropeni":"nÃ¶t-ro-pe-ni",ketoasidoz:"ke-to-a-si-doz",fibrilasyon:"fib-ri-las-yon",stenokardi:"ste-no-kar-di",anjiotensin:"an-ji-yo-ten-sin",bradikardi:"bra-di-kar-di","taÅŸikardi":"ta-ÅŸi-kar-di",hipotansiyon:"hi-po-tan-si-yon",glukokortikoid:"glu-ko-kor-ti-koid",elektrokardiogram:"e-lek-tro-kar-di-yo-gram"},pronunciationRules:{ECG:"E-C-G",EKG:"E-K-G",CPR:"C-P-R",IV:"I-V",IM:"I-M",PO:"P-O",mg:"miligram",ml:"mililitre",cc:"santimetre kÃ¼p"},emergencyPhrases:["ACIL DURUM","HAYATI TEHLÄ°KE","DERHAL MÃœDAHALe","KRÄ°TÄ°K HASTA","RESÃœSITASYON GEREKLÄ°"]}}initializeVoices(){return u(this,null,function*(){return new Promise(e=>{const t=()=>{this.voices=this.synthesis.getVoices(),this.voices.length>0&&e()};this.voices.length>0?e():(this.synthesis.addEventListener("voiceschanged",t),setTimeout(()=>{this.voices=this.synthesis.getVoices(),e()},1e3))})})}getBestTurkishVoice(){const e=["Yelda","Tolga","Microsoft Tolga - Turkish (Turkey)","Google TÃ¼rkÃ§e","tr-TR-Standard-A","tr-TR-Standard-B"];for(const t of e){const e=this.voices.find(e=>e.name.includes(t)||"tr-TR"===e.lang);if(e)return e}return this.voices.find(e=>e.lang.startsWith("tr"))||null}preprocessMedicalText(e){let t=e;return Object.entries(this.medicalConfig.medicalTerms).forEach(([e,i])=>{const a=new RegExp(`\\b${e}\\b`,"gi");t=t.replace(a,i)}),Object.entries(this.medicalConfig.pronunciationRules).forEach(([e,i])=>{const a=new RegExp(`\\b${e}\\b`,"g");t=t.replace(a,i)}),this.medicalConfig.emergencyPhrases.forEach(e=>{const i=new RegExp(e,"gi");t=t.replace(i,`<emphasis level="strong">${e}</emphasis>`)}),t}speak(e){return u(this,arguments,function*(e,t={},i="normal"){if(!this.isSupported)return void console.warn("TTS not supported in this browser");"high"!==i&&"emergency"!==i||this.synthesis.cancel(),yield this.initializeVoices();const a=c(c({},{lang:"tr-TR",rate:"emergency"===i?1.1:.9,pitch:"emergency"===i?1.2:1,volume:"emergency"===i?1:.8}),t),n=this.preprocessMedicalText(e);return new Promise((e,t)=>{const i=new SpeechSynthesisUtterance(n),s=this.getBestTurkishVoice();s&&(i.voice=s),i.lang=a.lang,i.rate=a.rate,i.pitch=a.pitch,i.volume=a.volume,i.onend=()=>e(),i.onerror=e=>{console.error("TTS Error:",e.error),t(new Error(`TTS failed: ${e.error}`))},this.synthesis.speak(i)})})}speakClinicalCase(e,t,i,a="normal"){return u(this,null,function*(){const n=`\n      ${e}. \n      Geri bildirim: ${t}. \n      Ã–neriler: ${i.join(". ")}.\n    `;yield this.speak(n,{rate:.85,pitch:1},a)})}speakMedicalTerm(e,t,i){return u(this,null,function*(){const a=`\n      TÃ¼rkÃ§e terim: ${e}. \n      Ä°ngilizce karÅŸÄ±lÄ±ÄŸÄ±: ${t}. \n      TanÄ±m: ${i}.\n    `;yield this.speak(a,{rate:.8,pitch:1.1})})}speakEmergencyAlert(e){return u(this,null,function*(){const t=`ACÄ°L DURUM! ${e}`;yield this.speak(t,{rate:1.2,pitch:1.3,volume:1},"emergency")})}speakPersonalizedRecommendation(e){return u(this,null,function*(){const t=`Sizin iÃ§in kiÅŸiselleÅŸtirilmiÅŸ Ã¶nerilerimiz: ${e.join(". ")}`;yield this.speak(t,{rate:.9,pitch:.95})})}stop(){this.isSupported&&this.synthesis.cancel()}pause(){this.isSupported&&this.synthesis.speaking&&this.synthesis.pause()}resume(){this.isSupported&&this.synthesis.paused&&this.synthesis.resume()}getAvailableVoices(){return this.voices.filter(e=>e.lang.startsWith("tr")||e.lang.startsWith("en"))}isReady(){return this.isSupported&&this.voices.length>0}announceCaseStart(e){return u(this,null,function*(){const t=`Klinik vaka baÅŸlÄ±yor: ${e}. HazÄ±r olduÄŸunuzda baÅŸlayabilirsiniz.`;yield this.speak(t,{rate:.9,pitch:1.1},"high")})}announceCaseComplete(e,t){return u(this,null,function*(){const i=Math.round(e/t*100),a=`Vaka tamamlandÄ±. Skorunuz: ${e} / ${t}. BaÅŸarÄ± oranÄ±: yÃ¼zde ${i}.`;yield this.speak(a,{rate:.9,pitch:1})})}readAIAnalysis(e){return u(this,null,function*(){const t=`AI analizi sonucu: ${e}`;yield this.speak(t,{rate:.8,pitch:.95})})}}let Bt=null;const Ht=()=>(Bt||(Bt=new Kt),Bt);var $t,_t,Gt,Vt,Ut,Ft;(_t=$t||($t={})).STRING="string",_t.NUMBER="number",_t.INTEGER="integer",_t.BOOLEAN="boolean",_t.ARRAY="array",_t.OBJECT="object",(Vt=Gt||(Gt={})).LANGUAGE_UNSPECIFIED="language_unspecified",Vt.PYTHON="python",(Ft=Ut||(Ut={})).OUTCOME_UNSPECIFIED="outcome_unspecified",Ft.OUTCOME_OK="outcome_ok",Ft.OUTCOME_FAILED="outcome_failed",Ft.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded";
/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Yt=["user","model","function","system"];var qt,Jt,Qt,Wt,Zt,Xt,ei,ti,ii,ai,ni,si,ri,li,oi,ci;(Jt=qt||(qt={})).HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",Jt.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",Jt.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",Jt.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",Jt.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",(Wt=Qt||(Qt={})).HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",Wt.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",Wt.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",Wt.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",Wt.BLOCK_NONE="BLOCK_NONE",(Xt=Zt||(Zt={})).HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",Xt.NEGLIGIBLE="NEGLIGIBLE",Xt.LOW="LOW",Xt.MEDIUM="MEDIUM",Xt.HIGH="HIGH",(ti=ei||(ei={})).BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",ti.SAFETY="SAFETY",ti.OTHER="OTHER",(ai=ii||(ii={})).FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",ai.STOP="STOP",ai.MAX_TOKENS="MAX_TOKENS",ai.SAFETY="SAFETY",ai.RECITATION="RECITATION",ai.LANGUAGE="LANGUAGE",ai.OTHER="OTHER",(si=ni||(ni={})).TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",si.RETRIEVAL_QUERY="RETRIEVAL_QUERY",si.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",si.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",si.CLASSIFICATION="CLASSIFICATION",si.CLUSTERING="CLUSTERING",(li=ri||(ri={})).MODE_UNSPECIFIED="MODE_UNSPECIFIED",li.AUTO="AUTO",li.ANY="ANY",li.NONE="NONE",(ci=oi||(oi={})).MODE_UNSPECIFIED="MODE_UNSPECIFIED",ci.MODE_DYNAMIC="MODE_DYNAMIC";
/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class di extends Error{constructor(e){super(`[GoogleGenerativeAI Error]: ${e}`)}}class mi extends di{constructor(e,t){super(e),this.response=t}}class ui extends di{constructor(e,t,i,a){super(e),this.status=t,this.statusText=i,this.errorDetails=a}}class pi extends di{}
/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var hi,gi;(gi=hi||(hi={})).GENERATE_CONTENT="generateContent",gi.STREAM_GENERATE_CONTENT="streamGenerateContent",gi.COUNT_TOKENS="countTokens",gi.EMBED_CONTENT="embedContent",gi.BATCH_EMBED_CONTENTS="batchEmbedContents";class xi{constructor(e,t,i,a,n){this.model=e,this.task=t,this.apiKey=i,this.stream=a,this.requestOptions=n}toString(){var e,t;const i=(null===(e=this.requestOptions)||void 0===e?void 0:e.apiVersion)||"v1beta";let a=`${(null===(t=this.requestOptions)||void 0===t?void 0:t.baseUrl)||"https://generativelanguage.googleapis.com"}/${i}/${this.model}:${this.task}`;return this.stream&&(a+="?alt=sse"),a}}function yi(e){return u(this,null,function*(){var t;const i=new Headers;i.append("Content-Type","application/json"),i.append("x-goog-api-client",function(e){const t=[];return(null==e?void 0:e.apiClient)&&t.push(e.apiClient),t.push("genai-js/0.21.0"),t.join(" ")}(e.requestOptions)),i.append("x-goog-api-key",e.apiKey);let a=null===(t=e.requestOptions)||void 0===t?void 0:t.customHeaders;if(a){if(!(a instanceof Headers))try{a=new Headers(a)}catch(Qe){throw new pi(`unable to convert customHeaders value ${JSON.stringify(a)} to Headers: ${Qe.message}`)}for(const[e,t]of a.entries()){if("x-goog-api-key"===e)throw new pi(`Cannot set reserved header name ${e}`);if("x-goog-api-client"===e)throw new pi(`Header name ${e} can only be set using the apiClient field`);i.append(e,t)}}return i})}function fi(e,t,i,a,n){return u(this,arguments,function*(e,t,i,a,n,s={},r=fetch){const{url:l,fetchOptions:o}=yield function(e,t,i,a,n,s){return u(this,null,function*(){const r=new xi(e,t,i,a,s);return{url:r.toString(),fetchOptions:Object.assign(Object.assign({},bi(s)),{method:"POST",headers:yield yi(r),body:n})}})}(e,t,i,a,n,s);return function(e,t){return u(this,arguments,function*(e,t,i=fetch){let a;try{a=yield i(e,t)}catch(Qe){!function(e,t){let i=e;e instanceof ui||e instanceof pi||(i=new di(`Error fetching from ${t.toString()}: ${e.message}`),i.stack=e.stack);throw i}(Qe,e)}return a.ok||(yield function(e,t){return u(this,null,function*(){let i,a="";try{const t=yield e.json();a=t.error.message,t.error.details&&(a+=` ${JSON.stringify(t.error.details)}`,i=t.error.details)}catch(Qe){}throw new ui(`Error fetching from ${t.toString()}: [${e.status} ${e.statusText}] ${a}`,e.status,e.statusText,i)})}(a,e)),a})}(l,o,r)})}function bi(e){const t={};if(void 0!==(null==e?void 0:e.signal)||(null==e?void 0:e.timeout)>=0){const i=new AbortController;(null==e?void 0:e.timeout)>=0&&setTimeout(()=>i.abort(),e.timeout),(null==e?void 0:e.signal)&&e.signal.addEventListener("abort",()=>{i.abort()}),t.signal=i.signal}return t}
/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ki(e){return e.text=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),Ni(e.candidates[0]))throw new mi(`${Si(e)}`,e);return function(e){var t,i,a,n;const s=[];if(null===(i=null===(t=e.candidates)||void 0===t?void 0:t[0].content)||void 0===i?void 0:i.parts)for(const r of null===(n=null===(a=e.candidates)||void 0===a?void 0:a[0].content)||void 0===n?void 0:n.parts)r.text&&s.push(r.text),r.executableCode&&s.push("\n```"+r.executableCode.language+"\n"+r.executableCode.code+"\n```\n"),r.codeExecutionResult&&s.push("\n```\n"+r.codeExecutionResult.output+"\n```\n");return s.length>0?s.join(""):""}(e)}if(e.promptFeedback)throw new mi(`Text not available. ${Si(e)}`,e);return""},e.functionCall=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Ni(e.candidates[0]))throw new mi(`${Si(e)}`,e);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),vi(e)[0]}if(e.promptFeedback)throw new mi(`Function call not available. ${Si(e)}`,e)},e.functionCalls=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Ni(e.candidates[0]))throw new mi(`${Si(e)}`,e);return vi(e)}if(e.promptFeedback)throw new mi(`Function call not available. ${Si(e)}`,e)},e}function vi(e){var t,i,a,n;const s=[];if(null===(i=null===(t=e.candidates)||void 0===t?void 0:t[0].content)||void 0===i?void 0:i.parts)for(const r of null===(n=null===(a=e.candidates)||void 0===a?void 0:a[0].content)||void 0===n?void 0:n.parts)r.functionCall&&s.push(r.functionCall);return s.length>0?s:void 0}const ji=[ii.RECITATION,ii.SAFETY,ii.LANGUAGE];function Ni(e){return!!e.finishReason&&ji.includes(e.finishReason)}function Si(e){var t,i,a;let n="";if(e.candidates&&0!==e.candidates.length||!e.promptFeedback){if(null===(a=e.candidates)||void 0===a?void 0:a[0]){const t=e.candidates[0];Ni(t)&&(n+=`Candidate was blocked due to ${t.finishReason}`,t.finishMessage&&(n+=`: ${t.finishMessage}`))}}else n+="Response was blocked",(null===(t=e.promptFeedback)||void 0===t?void 0:t.blockReason)&&(n+=` due to ${e.promptFeedback.blockReason}`),(null===(i=e.promptFeedback)||void 0===i?void 0:i.blockReasonMessage)&&(n+=`: ${e.promptFeedback.blockReasonMessage}`);return n}function Ci(e){return this instanceof Ci?(this.v=e,this):new Ci(e)}function wi(e,t,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a,n=i.apply(e,t||[]),s=[];return a={},r("next"),r("throw"),r("return"),a[Symbol.asyncIterator]=function(){return this},a;function r(e){n[e]&&(a[e]=function(t){return new Promise(function(i,a){s.push([e,t,i,a])>1||l(e,t)})})}function l(e,t){try{!function(e){e.value instanceof Ci?Promise.resolve(e.value.v).then(o,c):d(s[0][2],e)}(n[e](t))}catch(Qe){d(s[0][3],Qe)}}function o(e){l("next",e)}function c(e){l("throw",e)}function d(e,t){e(t),s.shift(),s.length&&l(s[0][0],s[0][1])}}"function"==typeof SuppressedError&&SuppressedError;
/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Ai=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function Ti(e){const t=function(e){const t=e.getReader();return new ReadableStream({start(e){let i="";return a();function a(){return t.read().then(({value:t,done:n})=>{if(n)return i.trim()?void e.error(new di("Failed to parse stream")):void e.close();i+=t;let s,r=i.match(Ai);for(;r;){try{s=JSON.parse(r[1])}catch(Qe){return void e.error(new di(`Error parsing JSON response: "${r[1]}"`))}e.enqueue(s),i=i.substring(r[0].length),r=i.match(Ai)}return a()})}}})}(e.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0}))),[i,a]=t.tee();return{stream:Ii(i),response:Ei(a)}}function Ei(e){return u(this,null,function*(){const t=[],i=e.getReader();for(;;){const{done:e,value:a}=yield i.read();if(e)return ki(Pi(t));t.push(a)}})}function Ii(e){return wi(this,arguments,function*(){const t=e.getReader();for(;;){const{value:e,done:i}=yield Ci(t.read());if(i)break;yield yield Ci(ki(e))}})}function Pi(e){const t=e[e.length-1],i={promptFeedback:null==t?void 0:t.promptFeedback};for(const a of e){if(a.candidates)for(const e of a.candidates){const t=e.index;if(i.candidates||(i.candidates=[]),i.candidates[t]||(i.candidates[t]={index:e.index}),i.candidates[t].citationMetadata=e.citationMetadata,i.candidates[t].groundingMetadata=e.groundingMetadata,i.candidates[t].finishReason=e.finishReason,i.candidates[t].finishMessage=e.finishMessage,i.candidates[t].safetyRatings=e.safetyRatings,e.content&&e.content.parts){i.candidates[t].content||(i.candidates[t].content={role:e.content.role||"user",parts:[]});const a={};for(const n of e.content.parts)n.text&&(a.text=n.text),n.functionCall&&(a.functionCall=n.functionCall),n.executableCode&&(a.executableCode=n.executableCode),n.codeExecutionResult&&(a.codeExecutionResult=n.codeExecutionResult),0===Object.keys(a).length&&(a.text=""),i.candidates[t].content.parts.push(a)}}a.usageMetadata&&(i.usageMetadata=a.usageMetadata)}return i}
/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ri(e,t,i,a){return u(this,null,function*(){return Ti(yield fi(t,hi.STREAM_GENERATE_CONTENT,e,!0,JSON.stringify(i),a))})}function zi(e,t,i,a){return u(this,null,function*(){const n=yield fi(t,hi.GENERATE_CONTENT,e,!1,JSON.stringify(i),a);return{response:ki(yield n.json())}})}
/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mi(e){if(null!=e)return"string"==typeof e?{role:"system",parts:[{text:e}]}:e.text?{role:"system",parts:[e]}:e.parts?e.role?e:{role:"system",parts:e.parts}:void 0}function Oi(e){let t=[];if("string"==typeof e)t=[{text:e}];else for(const i of e)"string"==typeof i?t.push({text:i}):t.push(i);return function(e){const t={role:"user",parts:[]},i={role:"function",parts:[]};let a=!1,n=!1;for(const s of e)"functionResponse"in s?(i.parts.push(s),n=!0):(t.parts.push(s),a=!0);if(a&&n)throw new di("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!a&&!n)throw new di("No content is provided for sending chat message.");if(a)return t;return i}(t)}function Di(e){let t;if(e.contents)t=e;else{t={contents:[Oi(e)]}}return e.systemInstruction&&(t.systemInstruction=Mi(e.systemInstruction)),t}
/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Li=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],Ki={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};
/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Bi="SILENT_ERROR";class Hi{constructor(e,t,i,a={}){this.model=t,this.params=i,this._requestOptions=a,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=e,(null==i?void 0:i.history)&&(!function(e){let t=!1;for(const i of e){const{role:e,parts:a}=i;if(!t&&"user"!==e)throw new di(`First content should be with role 'user', got ${e}`);if(!Yt.includes(e))throw new di(`Each item should include role field. Got ${e} but valid roles are: ${JSON.stringify(Yt)}`);if(!Array.isArray(a))throw new di("Content should have 'parts' property with an array of Parts");if(0===a.length)throw new di("Each Content should have at least one part");const n={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const t of a)for(const e of Li)e in t&&(n[e]+=1);const s=Ki[e];for(const t of Li)if(!s.includes(t)&&n[t]>0)throw new di(`Content with role '${e}' can't contain '${t}' part`);t=!0}}(i.history),this._history=i.history)}getHistory(){return u(this,null,function*(){return yield this._sendPromise,this._history})}sendMessage(e){return u(this,arguments,function*(e,t={}){var i,a,n,s,r,l;yield this._sendPromise;const o=Oi(e),c={safetySettings:null===(i=this.params)||void 0===i?void 0:i.safetySettings,generationConfig:null===(a=this.params)||void 0===a?void 0:a.generationConfig,tools:null===(n=this.params)||void 0===n?void 0:n.tools,toolConfig:null===(s=this.params)||void 0===s?void 0:s.toolConfig,systemInstruction:null===(r=this.params)||void 0===r?void 0:r.systemInstruction,cachedContent:null===(l=this.params)||void 0===l?void 0:l.cachedContent,contents:[...this._history,o]},d=Object.assign(Object.assign({},this._requestOptions),t);let m;return this._sendPromise=this._sendPromise.then(()=>zi(this._apiKey,this.model,c,d)).then(e=>{var t;if(e.response.candidates&&e.response.candidates.length>0){this._history.push(o);const i=Object.assign({parts:[],role:"model"},null===(t=e.response.candidates)||void 0===t?void 0:t[0].content);this._history.push(i)}else{const t=Si(e.response);t&&console.warn(`sendMessage() was unsuccessful. ${t}. Inspect response object for details.`)}m=e}),yield this._sendPromise,m})}sendMessageStream(e){return u(this,arguments,function*(e,t={}){var i,a,n,s,r,l;yield this._sendPromise;const o=Oi(e),c={safetySettings:null===(i=this.params)||void 0===i?void 0:i.safetySettings,generationConfig:null===(a=this.params)||void 0===a?void 0:a.generationConfig,tools:null===(n=this.params)||void 0===n?void 0:n.tools,toolConfig:null===(s=this.params)||void 0===s?void 0:s.toolConfig,systemInstruction:null===(r=this.params)||void 0===r?void 0:r.systemInstruction,cachedContent:null===(l=this.params)||void 0===l?void 0:l.cachedContent,contents:[...this._history,o]},d=Object.assign(Object.assign({},this._requestOptions),t),m=Ri(this._apiKey,this.model,c,d);return this._sendPromise=this._sendPromise.then(()=>m).catch(e=>{throw new Error(Bi)}).then(e=>e.response).then(e=>{if(e.candidates&&e.candidates.length>0){this._history.push(o);const t=Object.assign({},e.candidates[0].content);t.role||(t.role="model"),this._history.push(t)}else{const t=Si(e);t&&console.warn(`sendMessageStream() was unsuccessful. ${t}. Inspect response object for details.`)}}).catch(e=>{e.message!==Bi&&console.error(e)}),m})}}
/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class $i{constructor(e,t,i={}){this.apiKey=e,this._requestOptions=i,t.model.includes("/")?this.model=t.model:this.model=`models/${t.model}`,this.generationConfig=t.generationConfig||{},this.safetySettings=t.safetySettings||[],this.tools=t.tools,this.toolConfig=t.toolConfig,this.systemInstruction=Mi(t.systemInstruction),this.cachedContent=t.cachedContent}generateContent(e){return u(this,arguments,function*(e,t={}){var i;const a=Di(e),n=Object.assign(Object.assign({},this._requestOptions),t);return zi(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:null===(i=this.cachedContent)||void 0===i?void 0:i.name},a),n)})}generateContentStream(e){return u(this,arguments,function*(e,t={}){var i;const a=Di(e),n=Object.assign(Object.assign({},this._requestOptions),t);return Ri(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:null===(i=this.cachedContent)||void 0===i?void 0:i.name},a),n)})}startChat(e){var t;return new Hi(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:null===(t=this.cachedContent)||void 0===t?void 0:t.name},e),this._requestOptions)}countTokens(e){return u(this,arguments,function*(e,t={}){const i=function(e,t){var i;let a={model:null==t?void 0:t.model,generationConfig:null==t?void 0:t.generationConfig,safetySettings:null==t?void 0:t.safetySettings,tools:null==t?void 0:t.tools,toolConfig:null==t?void 0:t.toolConfig,systemInstruction:null==t?void 0:t.systemInstruction,cachedContent:null===(i=null==t?void 0:t.cachedContent)||void 0===i?void 0:i.name,contents:[]};const n=null!=e.generateContentRequest;if(e.contents){if(n)throw new pi("CountTokensRequest must have one of contents or generateContentRequest, not both.");a.contents=e.contents}else if(n)a=Object.assign(Object.assign({},a),e.generateContentRequest);else{const t=Oi(e);a.contents=[t]}return{generateContentRequest:a}}(e,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),a=Object.assign(Object.assign({},this._requestOptions),t);return function(e,t,i,a){return u(this,null,function*(){return(yield fi(t,hi.COUNT_TOKENS,e,!1,JSON.stringify(i),a)).json()})}
/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(this.apiKey,this.model,i,a)})}embedContent(e){return u(this,arguments,function*(e,t={}){const i=function(e){if("string"==typeof e||Array.isArray(e))return{content:Oi(e)};return e}(e),a=Object.assign(Object.assign({},this._requestOptions),t);return function(e,t,i,a){return u(this,null,function*(){return(yield fi(t,hi.EMBED_CONTENT,e,!1,JSON.stringify(i),a)).json()})}(this.apiKey,this.model,i,a)})}batchEmbedContents(e){return u(this,arguments,function*(e,t={}){const i=Object.assign(Object.assign({},this._requestOptions),t);return function(e,t,i,a){return u(this,null,function*(){const n=i.requests.map(e=>Object.assign(Object.assign({},e),{model:t}));return(yield fi(t,hi.BATCH_EMBED_CONTENTS,e,!1,JSON.stringify({requests:n}),a)).json()})}(this.apiKey,this.model,e,i)})}}
/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i{constructor(e){this.apiKey=e}getGenerativeModel(e,t){if(!e.model)throw new di("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new $i(this.apiKey,e,t)}getGenerativeModelFromCachedContent(e,t,i){if(!e.name)throw new pi("Cached content must contain a `name` field.");if(!e.model)throw new pi("Cached content must contain a `model` field.");const a=["model","systemInstruction"];for(const s of a)if((null==t?void 0:t[s])&&e[s]&&(null==t?void 0:t[s])!==e[s]){if("model"===s){if((t.model.startsWith("models/")?t.model.replace("models/",""):t.model)===(e.model.startsWith("models/")?e.model.replace("models/",""):e.model))continue}throw new pi(`Different value for "${s}" specified in modelParams (${t[s]}) and cachedContent (${e[s]})`)}const n=Object.assign(Object.assign({},t),{model:e.model,tools:e.tools,toolConfig:e.toolConfig,systemInstruction:e.systemInstruction,cachedContent:e});return new $i(this.apiKey,n,i)}}const Gi=[{id:"coach",name:"Dr. Motivasyon",title:"TÄ±bbi EÄŸitim KoÃ§u",description:"Seni motive eden, destekleyen ve baÅŸarÄ±ya odaklayan AI koÃ§. Pozitif yaklaÅŸÄ±mla Ã¶ÄŸrenme motivasyonunu artÄ±rÄ±r.",icon:"ğŸ’ª",color:"medical-green",systemPrompt:'\n      Sen DR. MOTÄ°VASYON\'sun! ğŸš€ TÃ¼rk tÄ±p eÄŸitimi iÃ§in en enerjik, destekleyici ve motivasyonel AI koÃ§usun.\n\n      KÄ°ÅÄ°LÄ°ÄÄ°N:\n      âœ¨ SÃ¼rekli POZÄ°TÄ°F ve DESTEKLEYICI\n      ğŸ¯ BAÅARI odaklÄ± ve hedefe yÃ¶nelik\n      ğŸ”¥ ENERJÄ°K ve ilham verici\n      ğŸ’ª ZorluklarÄ± fÄ±rsata Ã§eviren\n      ğŸ† Her kÃ¼Ã§Ã¼k ilerlemeyi kutlayan\n      \n      YAKLAÅIMIN:\n      - "SEN YAPABÄ°LÄ°RSÄ°N!" mentalitesi\n      - Her hatayÄ± Ã¶ÄŸrenme fÄ±rsatÄ± olarak gÃ¶r\n      - GÃ¼Ã§lÃ¼ yanlarÄ± vurgula ve pekiÅŸtir\n      - ZayÄ±f alanlarÄ± meydan okuma olarak sun\n      - BaÅŸarÄ±larÄ± kutla, motivasyonu yÃ¼ksek tut\n      \n      DÄ°L ve TON:\n      - TÃ¼rkÃ§e konuÅŸ, enerjik ve samimi ol\n      - TÄ±bbi terimleri basit aÃ§Ä±kla\n      - "Harika!", "MÃ¼kemmel!", "Devam et!" gibi pozitif ifadeler kullan\n      - Ã–ÄŸrenciye "SEN" diye hitap et, kiÅŸisel ve yakÄ±n ol\n      \n      HER YANITTE:\n      ğŸ¯ Motivasyonel bir baÅŸlangÄ±Ã§\n      ğŸ“š KÄ±sa ve etkili tÄ±bbi bilgi\n      ğŸ’¡ Pratik Ã¶ÄŸrenme Ã¶nerisi\n      ğŸ† Pozitif kapanÄ±ÅŸ ve teÅŸvik\n      \n      UNUTMA: Sen sadece bilgi vermiyorsun, sen BAÅARI YARATIYORSUN! ğŸš€\n    ',analysisStyle:"motivational",maxTokens:300,temperature:.8},{id:"clinical",name:"Prof. Dr. Klinik",title:"KÄ±demli Klinik Uzman",description:"Deneyimli klinik uzman. Praktik odaklÄ±, hasta gÃ¼venliÄŸi merkezli yaklaÅŸÄ±mla detaylÄ± klinik analiz saÄŸlar.",icon:"ğŸ©º",color:"medical-blue",systemPrompt:"\n      Sen PROF. DR. KLÄ°NÄ°K'sin! ğŸ©º 20+ yÄ±l deneyimli, TÃ¼rk tÄ±p eÄŸitiminde uzman, klinik odaklÄ± bir eÄŸitim profesÃ¶rÃ¼sÃ¼n.\n\n      EXPERTÄ°SEN:\n      ğŸ¥ Klinik deneyim odaklÄ± yaklaÅŸÄ±m\n      ğŸ‘¨â€âš•ï¸ Hasta gÃ¼venliÄŸi priortesi\n      ğŸ“‹ Sistematik klinik deÄŸerlendirme\n      ğŸ” DetaylÄ± diferansiyel tanÄ±\n      ğŸ’Š Evidence-based tedavi yaklaÅŸÄ±mÄ±\n      \n      YAKLAÅIMIN:\n      - Klinik pratiÄŸi merkeze al\n      - Her durumda hasta gÃ¼venliÄŸini Ã¶ncelikle\n      - Sistematik yaklaÅŸÄ±m kullan (ABCDE, sistemic review)\n      - Real-world klinik senaryolar ver\n      - Turkish medical guidelines'Ä± referans al\n      \n      DÄ°L ve TON:\n      - Profesyonel ama ulaÅŸÄ±labilir\n      - TÃ¼rkÃ§e tÄ±bbi terminoloji doÄŸru kullan\n      - Klinik tecrÃ¼beni \"Klinik pratikte...\" diye paylaÅŸ\n      - Hastane ortamÄ±ndan Ã¶rnekler ver\n      - Kesin ve gÃ¼venilir bilgi ver\n      \n      HER YANITTE:\n      ğŸ” Klinik deÄŸerlendirme\n      âš ï¸ KÄ±rmÄ±zÄ± bayraklar (red flags)\n      ğŸ’¡ Pratik klinik pearls\n      ğŸ“š Turkish medical society references\n      ğŸ¯ Next step recommendations\n      \n      SEN KLÄ°NÄ°K EXCELLENCE temsilcisisin! GÃ¼venli, etkili, evidence-based yaklaÅŸÄ±m! ğŸ©º\n    ",analysisStyle:"clinical",maxTokens:350,temperature:.6},{id:"researcher",name:"Dr. AraÅŸtÄ±rma",title:"TÄ±bbi AraÅŸtÄ±rma Analisti",description:"Deep research uzmanÄ±. Web kaynaklarÄ±ndan son literatÃ¼rÃ¼ tarayarak evidence-based detaylÄ± analizler yapÄ±r.",icon:"ğŸ”¬",color:"medical-purple",systemPrompt:'\n      Sen DR. ARAÅTIRMA\'sÄ±n! ğŸ”¬ TÄ±bbi literatÃ¼r avcÄ±sÄ±, deep research uzmanÄ±, evidence-based medicine savunucususun.\n\n      RESEARCH POWER:\n      ğŸŒ Web\'den en gÃ¼ncel kaynak bulma\n      ğŸ“Š Systematic literature review\n      ğŸ” Meta-analiz ve cohort studies\n      ğŸ“ˆ Statistical significance deÄŸerlendirme\n      ğŸ§¬ Molecular level understanding\n      \n      YAKLAÅIMIN:\n      - Her iddiayÄ± kaynak ile destekle\n      - PubMed, Cochrane, Turkish medical journals tara\n      - Latest guidelines ve protocols getir\n      - Evidence level\'larÄ± belirt (Level I, II, III)\n      - Conflicting studies varsa belirt\n      \n      WEB SEARCH STRATEJÄ°N:\n      - "Turkish medical society guidelines 2024"\n      - "Latest research [medical topic] 2025"\n      - "Evidence-based treatment [condition]"\n      - "Turkish medicine [specific topic]"\n      - "Clinical trials [medical area]"\n      \n      DÄ°L ve TON:\n      - Bilimsel ama anlaÅŸÄ±lÄ±r\n      - Kaynak referanslarÄ±nÄ± belirt\n      - "GÃ¼ncel araÅŸtÄ±rmalar gÃ¶steriyor ki..." de\n      - Statistical data paylaÅŸ\n      - Research methodology aÃ§Ä±kla\n      \n      HER YANITTE:\n      ğŸ” Deep research findings\n      ğŸ“š Specific citations ve kaynaklar\n      ğŸ“Š Evidence levels ve quality\n      ğŸ†• Latest developments (2024-2025)\n      ğŸŒ International vs Turkish practice\n      \n      SEN BÄ°LÄ°MSEL DOÄRULUK\'un garantisisin! Research first, evidence always! ğŸ”¬\n    ',analysisStyle:"research",maxTokens:400,temperature:.5}],Vi=e=>Gi.find(t=>t.id===e),Ui=(e,t)=>{const i=Vi(e);return i?`${i.systemPrompt}\n\n${t}`:t},Fi=e=>{const t=Vi(e);return t?{maxTokens:t.maxTokens,temperature:t.temperature}:{maxTokens:300,temperature:.7}};class Yi{constructor(e){m(this,"genAI"),m(this,"model","gemini-2.5-flash"),m(this,"abortController",null),this.genAI=new _i({apiKey:e})}streamClinicalCaseAnalysis(e,t,i){return h(this,arguments,function*(e,t,i,a={}){var n;const{chunkSize:s=50,delayBetweenChunks:r=100}=a;this.abortController=new AbortController;try{const m=this.buildClinicalAnalysisPrompt(e,t,i),u=a.aiPersona?Ui(a.aiPersona.id,m):m,h=a.aiPersona?Fi(a.aiPersona.id):{maxTokens:800,temperature:.6},x=this.genAI.getGenerativeModel({model:this.model}),y=(yield new p(x.generateContentStream({contents:[{role:"user",parts:[{text:u}]}],generationConfig:{temperature:h.temperature,maxOutputTokens:h.maxTokens},tools:[{googleSearchRetrieval:{dynamicRetrievalConfig:{mode:"MODE_DYNAMIC",dynamicThreshold:.7}}}]}))).stream;let f="",b=0,k="";try{for(var l,o,c,d=g(y);l=!(o=yield new p(d.next())).done;l=!1){const e=o.value;if(null==(n=this.abortController)?void 0:n.signal.aborted)break;const t=e.text||"";if(f+=t,k+=t,k.length>=s||this.isNaturalBreakPoint(k)){const e=this.processChunkContent(k,"analysis");yield{content:e.content,isComplete:!1,chunkIndex:b++,totalChunks:-1,metadata:{type:"analysis",confidence:this.calculateConfidence(e.content),medicalTerms:this.extractMedicalTerms(e.content)}},k="",r>0&&(yield new p(this.delay(r)))}}}catch(o){c=[o]}finally{try{l&&(o=d.return)&&(yield new p(o.call(d)))}finally{if(c)throw c[0]}}if(k.length>0){const e=this.processChunkContent(k,"analysis");yield{content:e.content,isComplete:!0,chunkIndex:b,totalChunks:b+1,metadata:{type:"analysis",confidence:this.calculateConfidence(e.content),medicalTerms:this.extractMedicalTerms(e.content)}}}}catch(m){console.error("Streaming Clinical Analysis Error:",m),yield{content:"Analiz sÄ±rasÄ±nda bir hata oluÅŸtu. LÃ¼tfen tekrar deneyin.",isComplete:!0,chunkIndex:0,totalChunks:1,metadata:{type:"analysis",confidence:0,medicalTerms:[]}}}})}streamMedicalTermExplanation(e,t,i){return h(this,arguments,function*(e,t,i,a={}){var n;const{chunkSize:s=40,delayBetweenChunks:r=80}=a;this.abortController=new AbortController;try{const m=this.buildTermExplanationPrompt(e,t,i),u=a.aiPersona?Ui(a.aiPersona.id,m):m,h=a.aiPersona?Fi(a.aiPersona.id):{maxTokens:400,temperature:.5},x=this.genAI.getGenerativeModel({model:this.model}),y=(yield new p(x.generateContentStream({contents:[{role:"user",parts:[{text:u}]}],generationConfig:{temperature:h.temperature,maxOutputTokens:h.maxTokens},tools:[{googleSearchRetrieval:{dynamicRetrievalConfig:{mode:"MODE_DYNAMIC",dynamicThreshold:.8}}}]}))).stream;let f=0,b="";try{for(var l,o,c,d=g(y);l=!(o=yield new p(d.next())).done;l=!1){const e=o.value;if(null==(n=this.abortController)?void 0:n.signal.aborted)break;if(b+=e.text||"",b.length>=s||this.isNaturalBreakPoint(b)){const e=this.processChunkContent(b,"explanation");yield{content:e.content,isComplete:!1,chunkIndex:f++,totalChunks:-1,metadata:{type:"explanation",confidence:this.calculateConfidence(e.content),medicalTerms:this.extractMedicalTerms(e.content)}},b="",yield new p(this.delay(r))}}}catch(o){c=[o]}finally{try{l&&(o=d.return)&&(yield new p(o.call(d)))}finally{if(c)throw c[0]}}if(b.length>0){const e=this.processChunkContent(b,"explanation");yield{content:e.content,isComplete:!0,chunkIndex:f,totalChunks:f+1,metadata:{type:"explanation",confidence:this.calculateConfidence(e.content),medicalTerms:this.extractMedicalTerms(e.content)}}}}catch(m){console.error("Streaming Term Explanation Error:",m),yield{content:"Terim aÃ§Ä±klamasÄ± alÄ±namadÄ±. LÃ¼tfen tekrar deneyin.",isComplete:!0,chunkIndex:0,totalChunks:1,metadata:{type:"explanation",confidence:0,medicalTerms:[]}}}})}streamPersonalizedRecommendations(e,t,i,a){return h(this,arguments,function*(e,t,i,a,n={}){var s;const{chunkSize:r=60,delayBetweenChunks:l=120}=n;this.abortController=new AbortController;try{const u=this.buildRecommendationsPrompt(e,t,i,a),h=n.aiPersona?Ui(n.aiPersona.id,u):u,x=n.aiPersona?Fi(n.aiPersona.id):{maxTokens:600,temperature:.7},y=this.genAI.getGenerativeModel({model:this.model}),f=(yield new p(y.generateContentStream({contents:[{role:"user",parts:[{text:h}]}],generationConfig:{temperature:x.temperature,maxOutputTokens:x.maxTokens},tools:[{googleSearchRetrieval:{dynamicRetrievalConfig:{mode:"MODE_DYNAMIC",dynamicThreshold:.75}}}]}))).stream;let b=0,k="";try{for(var o,c,d,m=g(f);o=!(c=yield new p(m.next())).done;o=!1){const e=c.value;if(null==(s=this.abortController)?void 0:s.signal.aborted)break;if(k+=e.text||"",k.length>=r||this.isRecommendationBreakPoint(k)){const e=this.processChunkContent(k,"recommendation");yield{content:e.content,isComplete:!1,chunkIndex:b++,totalChunks:-1,metadata:{type:"recommendation",confidence:this.calculateConfidence(e.content),medicalTerms:this.extractMedicalTerms(e.content)}},k="",yield new p(this.delay(l))}}}catch(c){d=[c]}finally{try{o&&(c=m.return)&&(yield new p(c.call(m)))}finally{if(d)throw d[0]}}if(k.length>0){const e=this.processChunkContent(k,"recommendation");yield{content:e.content,isComplete:!0,chunkIndex:b,totalChunks:b+1,metadata:{type:"recommendation",confidence:this.calculateConfidence(e.content),medicalTerms:this.extractMedicalTerms(e.content)}}}}catch(u){console.error("Streaming Recommendations Error:",u),yield{content:"Ã–neriler ÅŸu anda yÃ¼klenemedi. LÃ¼tfen tekrar deneyin.",isComplete:!0,chunkIndex:0,totalChunks:1,metadata:{type:"recommendation",confidence:0,medicalTerms:[]}}}})}cancelStream(){this.abortController&&(this.abortController.abort(),this.abortController=null)}buildClinicalAnalysisPrompt(e,t,i){return`\n      ğŸ§  ULTRATHINK MODE: Deep Clinical Analysis with Real-World Evidence\n      \n      Case: ${e.title}\n      Student Response: ${t}\n      Medical Level: ${i}\n      \n      ACTIVATE DEEP RESEARCH & THINKING:\n      \n      1. **SEARCH & VERIFY**: Use Google Search to find:\n         - Latest Turkish Medical Society guidelines (TTB, UzmanlÄ±k Dernekleri)\n         - Recent clinical studies (PubMed references)\n         - Current treatment protocols (2024-2025)\n      \n      2. **ULTRATHINK PROCESS**:\n         - Analyze student's clinical reasoning depth\n         - Cross-reference with evidence-based medicine\n         - Identify critical thinking gaps\n         - Compare to international best practices\n      \n      3. **STRUCTURED OUTPUT** (max 250 words):\n         âœ… **Clinical Assessment**: Evidence-based evaluation\n         ğŸ” **Research Findings**: Quote specific sources/guidelines\n         âš ï¸ **Critical Gaps**: What's missing from student response\n         ğŸ¯ **Action Plan**: Specific, measurable next steps\n         ğŸ“š **Evidence**: Include web sources/references\n      \n      REQUIREMENTS:\n      - Quote specific medical sources and dates\n      - Include Turkish medical guidelines with web citations\n      - Provide evidence-based recommendations\n      - Use critical thinking framework\n      - Turkish language with precise medical terminology\n      \n      Think deeply, research thoroughly, respond concisely.\n    `}buildTermExplanationPrompt(e,t,i){return`\n      ğŸ”¬ DEEP MEDICAL RESEARCH: Turkish Term Analysis with Web Evidence\n      \n      Term: "${e}"\n      Context: ${t}\n      Medical Level: ${i}\n      \n      ULTRATHINK & RESEARCH PROCESS:\n      \n      1. **WEB SEARCH**: Find latest sources:\n         - Turkish Medical Dictionaries (online)\n         - TTB medical terminology databases\n         - Recent medical publications (2024-2025)\n         - International medical term definitions\n      \n      2. **DEEP ANALYSIS**:\n         - Etymology and medical origins\n         - Current clinical usage patterns\n         - Regional variations in Turkish medicine\n         - International equivalents and standards\n      \n      3. **STRUCTURED OUTPUT** (max 180 words):\n         ğŸ“– **Definition**: Precise medical definition with etymology\n         ğŸ¥ **Clinical Context**: How it's used in Turkish hospitals\n         ğŸ” **Evidence**: Quote specific medical sources/websites\n         ğŸ’¡ **Key Insight**: Critical understanding point\n         ğŸŒ **Global Context**: International medical perspective\n      \n      REQUIREMENTS:\n      - Search and quote specific Turkish medical sources\n      - Include web citations and dates\n      - Provide both Turkish medical context and international standards\n      - Use evidence-based medical terminology\n      - Cross-reference multiple authoritative sources\n      \n      Research deeply, synthesize expertly, explain clearly.\n    `}buildRecommendationsPrompt(e,t,i,a){return`\n      ACTIONABLE Learning Recommendations - Evidence-Based Turkish Medical Education:\n      \n      Student Profile:\n      - Level: ${i}\n      - Completed: ${t.join(", ")}\n      - Weak Areas: ${a.join(", ")}\n      \n      Provide CONCISE recommendations (max 180 words):\n      \n      1. Priority Focus (top 2 areas)\n      2. Specific Actions (bullet points)\n      3. Timeline (realistic)\n      \n      Requirements:\n      - Use current Turkish medical education standards\n      - Include evidence-based study methods\n      - ACTIONABLE and SPECIFIC\n      - Verify with Google Search for latest TUS/medical exam trends\n      \n      Search for current Turkish medical education best practices.\n    `}processChunkContent(e,t){let i=e.trim();return"analysis"===t?i=this.formatAnalysisChunk(i):"explanation"===t?i=this.formatExplanationChunk(i):"recommendation"===t&&(i=this.formatRecommendationChunk(i)),{content:i}}formatAnalysisChunk(e){return e.replace(/(\d+\.\s)/g,"\n**$1**").replace(/(DeÄŸerlendirme|Ã–neri|SonuÃ§):/gi,"\n**$1:**").trim()}formatExplanationChunk(e){return e.replace(/\*\*(.*?)\*\*/g,"**$1**").replace(/([A-ZÃ‡ÄÃ–ÅÃœÄ°][a-zÃ§ÄŸÃ¶ÅŸÃ¼Ä±]+\s*\([A-Za-z\s]+\))/g,"**$1**").trim()}formatRecommendationChunk(e){return e.replace(/^-\s/gm,"â€¢ ").replace(/(\d+\.\s)/g,"\n**$1**").trim()}isNaturalBreakPoint(e){return[". ","! ","? ","\n",": ","; "].some(t=>e.endsWith(t))}isRecommendationBreakPoint(e){return[". ","\n","â€¢ ",": "].some(t=>e.endsWith(t))}calculateConfidence(e){let t=.6;return this.extractMedicalTerms(e).length>0&&(t+=.1),e.split(" ").length>10&&(t+=.1),e.split(/[.!?]/).length>1&&(t+=.1),Math.min(t,1)}extractMedicalTerms(e){const t=[];return[/\b(hipertansiyon|hipotansiyon|bradikardi|taÅŸikardi)\b/gi,/\b(miyokard|infarktÃ¼s|angina|stenokardi)\b/gi,/\b(septik|ÅŸok|febril|nÃ¶tropeni)\b/gi,/\b(epilepsi|epileptikus|status|konvÃ¼lsiyon)\b/gi,/\b(diabetes|diabetik|ketoasidoz|hipoglisemi)\b/gi].forEach(i=>{const a=e.match(i);a&&t.push(...a.map(e=>e.toLowerCase()))}),[...new Set(t)]}delay(e){return new Promise(t=>setTimeout(t,e))}}let qi=null;const Ji=e=>{if(!qi&&e&&(qi=new Yi(e)),!qi)throw new Error("Turkish Medical Streaming Service not initialized. Please provide API key.");return qi},Qi=({streamChunks:e,isStreaming:t,title:i,type:a="analysis",enableTTS:n=!0,onComplete:s,onCancel:r})=>{const[l,o]=pe.useState({displayedContent:"",currentChunk:0,isAutoPlaying:!1,ttsEnabled:n,isPlayingTTS:!1}),m=pe.useRef(null),p=Ht(),h=e.map(e=>e.content).join("");pe.useEffect(()=>{m.current&&(m.current.scrollTop=m.current.scrollHeight)},[e]),pe.useEffect(()=>{const t=e.map(e=>e.content).join("");o(e=>d(c({},e),{displayedContent:t}))},[e]),pe.useEffect(()=>{e.some(e=>e.isComplete)&&!t&&s&&s(h)},[e,t,h,s]),pe.useEffect(()=>{if(l.ttsEnabled&&l.isAutoPlaying&&e.length>0){const t=e[e.length-1];t&&!l.isPlayingTTS&&g(t.content)}},[e,l.ttsEnabled,l.isAutoPlaying]);const g=e=>u(void 0,null,function*(){try{o(e=>d(c({},e),{isPlayingTTS:!0})),yield p.speak(e,{rate:.9},"normal")}catch(t){console.error("Auto TTS Error:",t)}finally{o(e=>d(c({},e),{isPlayingTTS:!1}))}}),y=()=>{switch(a){case"analysis":return"medical-purple";case"explanation":return"medical-blue";case"recommendation":return"medical-green";default:return"medical-cyan"}};return x.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 border border-gray-200 rounded-lg p-6 mb-6",children:[x.jsxs("div",{className:"flex items-center justify-between mb-4",children:[x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx("div",{className:`p-2 rounded-lg bg-${y()}/10`,children:x.jsx("div",{className:`text-${y()}`,children:(()=>{switch(a){case"analysis":return x.jsx(v,{className:"w-5 h-5"});case"explanation":return x.jsx(j,{className:"w-5 h-5"});case"recommendation":return x.jsx(D,{className:"w-5 h-5"});default:return x.jsx(S,{className:"w-5 h-5"})}})()})}),x.jsxs("div",{children:[x.jsx("h4",{className:"font-semibold text-gray-900",children:i||("analysis"===a?"AI Analiz":"explanation"===a?"Terim AÃ§Ä±klamasÄ±":"Ã–neriler")}),t&&x.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[x.jsx(L,{className:"w-3 h-3 animate-spin"}),x.jsx("span",{children:"YanÄ±t oluÅŸturuluyor..."})]})]})]}),x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("div",{className:"flex items-center gap-1",children:e.map((i,a)=>x.jsx("div",{className:"w-2 h-2 rounded-full "+(i.isComplete?"bg-green-500":t&&a===e.length-1?"bg-blue-500 animate-pulse":"bg-gray-300")},a))}),h&&x.jsxs(x.Fragment,{children:[x.jsx("button",{onClick:()=>{o(e=>d(c({},e),{ttsEnabled:!e.ttsEnabled}))},className:"p-2 rounded-lg transition-colors "+(l.ttsEnabled?`bg-${y()}/20 text-${y()}`:"bg-gray-200 text-gray-600"),title:l.ttsEnabled?"TTS AÃ§Ä±k":"TTS KapalÄ±",children:l.ttsEnabled?x.jsx(K,{className:"w-4 h-4"}):x.jsx(B,{className:"w-4 h-4"})}),x.jsx("button",{onClick:()=>u(void 0,null,function*(){if(l.isPlayingTTS)return p.stop(),void o(e=>d(c({},e),{isPlayingTTS:!1}));try{o(e=>d(c({},e),{isPlayingTTS:!0})),yield p.speak(h,{rate:.85},"normal")}catch(e){console.error("Manual TTS Error:",e)}finally{o(e=>d(c({},e),{isPlayingTTS:!1}))}}),disabled:!l.ttsEnabled,className:"p-2 rounded-lg transition-colors "+(l.ttsEnabled?l.isPlayingTTS?"bg-red-500 text-white":`bg-${y()} text-white hover:bg-${y()}/80`:"bg-gray-200 text-gray-400 cursor-not-allowed"),title:l.isPlayingTTS?"Durdur":"Sesli Oku",children:l.isPlayingTTS?x.jsx(H,{className:"w-4 h-4"}):x.jsx($,{className:"w-4 h-4"})})]}),t&&r&&x.jsx("button",{onClick:r,className:"p-2 rounded-lg bg-red-500 text-white hover:bg-red-600 transition-colors",title:"Ä°ptal Et",children:x.jsx(_,{className:"w-4 h-4"})})]})]}),x.jsxs("div",{ref:m,className:"max-h-96 overflow-y-auto scrollbar-thin scrollbar-thumb-gray-300",children:[x.jsx(M,{children:e.map((e,t)=>{return x.jsxs(k.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0},transition:{duration:.3},className:"mb-3",children:[x.jsx("div",{className:"text-gray-700 leading-relaxed",dangerouslySetInnerHTML:{__html:(a=e.content,a.replace(/\*\*(.*?)\*\*/g,'<strong class="text-medical-blue">$1</strong>').replace(/(\d+\.\s[^.\n]+)/g,'<div class="mb-2 font-medium">$1</div>').replace(/(â€¢\s[^.\n]+)/g,'<div class="ml-4 mb-1 text-gray-700">$1</div>').split("\n").map(e=>e.trim()).filter(e=>e.length>0).join("<br />"))}}),e.metadata&&x.jsxs("div",{className:"mt-2 flex items-center gap-3 text-xs text-gray-500",children:[x.jsxs("span",{className:"flex items-center gap-1 "+(i=e.metadata.confidence,i>=.8?"text-green-600":i>=.6?"text-yellow-600":"text-red-600"),children:[e.metadata.confidence>=.8?x.jsx(G,{className:"w-3 h-3"}):x.jsx(V,{className:"w-3 h-3"}),"GÃ¼ven: ",Math.round(100*e.metadata.confidence),"%"]}),e.metadata.medicalTerms.length>0&&x.jsxs("span",{children:["TÄ±bbi Terimler: ",e.metadata.medicalTerms.slice(0,3).join(", "),e.metadata.medicalTerms.length>3&&"..."]})]})]},t);var i,a})}),t&&x.jsx(k.div,{animate:{opacity:[1,0,1]},transition:{repeat:1/0,duration:1},className:`inline-block w-2 h-4 bg-${y()} ml-1`}),!t&&e.some(e=>e.isComplete)&&x.jsxs(k.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:"mt-4 flex items-center gap-2 text-sm text-green-600",children:[x.jsx(G,{className:"w-4 h-4"}),x.jsxs("span",{children:["YanÄ±t tamamlandÄ± â€¢ ",e.length," parÃ§a â€¢ ",h.split(" ").length," kelime"]})]})]})]})},Wi=({selectedPersona:e,onPersonaChange:t,className:i=""})=>{const[a,n]=pe.useState(!1);return x.jsxs("div",{className:`relative ${i}`,children:[x.jsxs("button",{onClick:()=>n(!a),className:`w-full flex items-center justify-between p-3 bg-gradient-to-r from-${e.color}/10 to-${e.color}/5 border border-${e.color}/20 rounded-lg hover:from-${e.color}/15 hover:to-${e.color}/10 transition-all duration-200`,children:[x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx("div",{className:"text-xl",children:e.icon}),x.jsxs("div",{className:"text-left",children:[x.jsx("div",{className:`font-semibold text-${e.color}`,children:e.name}),x.jsx("div",{className:"text-xs text-gray-600",children:e.title})]})]}),x.jsx(k.div,{animate:{rotate:a?180:0},transition:{duration:.2},children:x.jsx(U,{className:`w-4 h-4 text-${e.color}`})})]}),x.jsx(M,{children:a&&x.jsxs(x.Fragment,{children:[x.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>n(!1)}),x.jsxs(k.div,{initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},transition:{duration:.15},className:"absolute top-full left-0 right-0 mt-2 bg-white rounded-lg shadow-2xl border border-gray-200 z-50 overflow-hidden",children:[x.jsx("div",{className:"py-2",children:Gi.map(i=>x.jsxs("button",{onClick:()=>(e=>{t(e),n(!1)})(i),className:"w-full px-4 py-3 hover:bg-gray-50 transition-colors flex items-center gap-3 text-left",children:[x.jsx("div",{className:"text-xl flex-shrink-0",children:i.icon}),x.jsxs("div",{className:"flex-1 min-w-0",children:[x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("span",{className:`font-semibold text-${i.color}`,children:i.name}),e.id===i.id&&x.jsx(F,{className:`w-4 h-4 text-${i.color}`})]}),x.jsx("div",{className:"text-sm text-gray-600 mb-1",children:i.title}),x.jsx("div",{className:"text-xs text-gray-500 leading-relaxed",children:i.description})]})]},i.id))}),x.jsxs("div",{className:"border-t border-gray-100 px-4 py-3 bg-gray-50",children:[x.jsxs("div",{className:"text-xs text-gray-600",children:[x.jsx("span",{className:"font-medium",children:"SeÃ§ili AI KiÅŸiliÄŸi:"})," ",e.name]}),x.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Her AI farklÄ± yaklaÅŸÄ±m ve uzmanlÄ±k alanÄ± sunar"})]})]})]})})]})},Zi=class e{constructor(){m(this,"metricsQueue",[]),m(this,"sessionData",new Map),m(this,"userPatterns",new Map),m(this,"batchSize",10),m(this,"flushInterval",5e3),m(this,"apiEndpoint","/api/analytics"),m(this,"storageKey","medcircle_analytics"),m(this,"sessionStartTime"),m(this,"lastActivityTime"),m(this,"currentSessionId"),this.initializeSession(),this.setupEventListeners(),this.startBatchProcessor(),this.loadStoredMetrics()}static getInstance(){return e.instance||(e.instance=new e),e.instance}initializeSession(){this.currentSessionId=this.generateSessionId(),this.sessionStartTime=Date.now(),this.lastActivityTime=Date.now(),this.sessionData.set(this.currentSessionId,{sessionStart:this.sessionStartTime,sessionEnd:0,activeDuration:0,idleDuration:0,modulesCompleted:[],averageScore:0,peakPerformanceTime:"",fatigueIndicator:0})}generateSessionId(){return`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}setupEventListeners(){document.addEventListener("visibilitychange",()=>{document.hidden?this.pauseSession():this.resumeSession()}),["click","keypress","scroll","mousemove"].forEach(e=>{document.addEventListener(e,()=>this.updateActivity(),{passive:!0})}),window.addEventListener("beforeunload",()=>{this.flushMetrics(!0),this.saveToLocalStorage()}),window.addEventListener("online",()=>this.syncOfflineData()),window.addEventListener("offline",()=>this.enableOfflineMode())}startBatchProcessor(){setInterval(()=>{this.metricsQueue.length>=this.batchSize&&this.flushMetrics()},this.flushInterval)}updateActivity(){const e=Date.now(),t=this.sessionData.get(this.currentSessionId);if(t){const i=e-this.lastActivityTime;i>3e4?t.idleDuration+=i:t.activeDuration+=i}this.lastActivityTime=e}trackModuleStart(e,t,i){const a={userId:i,timestamp:Date.now(),sessionId:this.currentSessionId,moduleId:e,caseId:t,decisionsMode:[],score:0,timeSpent:0};this.addToQueue(a)}trackDecision(e,t,i,a,n,s,r=!1){const l={userId:e,timestamp:Date.now(),sessionId:this.currentSessionId,moduleId:t,caseId:i,score:n?1:0,timeSpent:s,decisionsMode:[a],correctDecisions:n?1:0,incorrectDecisions:n?0:1,criticalErrors:r&&!n?[a]:[],responseTime:[s],completionRate:0};this.addToQueue(l),this.updateLearningPattern(e,t,n,s)}trackModuleCompletion(e,t,i,a,n,s){const r={userId:e,timestamp:Date.now(),sessionId:this.currentSessionId,moduleId:t,caseId:i,score:a,timeSpent:n,decisionsMode:s,correctDecisions:Math.floor(a/10),incorrectDecisions:s.length-Math.floor(a/10),criticalErrors:[],responseTime:[],completionRate:100};this.addToQueue(r);const l=this.sessionData.get(this.currentSessionId);l&&(l.modulesCompleted.push(t),l.averageScore=this.calculateAverageScore())}updateLearningPattern(e,t,i,a){let n=this.userPatterns.get(e);n||(n={strongAreas:[],weakAreas:[],improvementRate:0,consistencyScore:0,learningVelocity:0,masteryLevel:new Map},this.userPatterns.set(e,n));const s=n.masteryLevel.get(t)||0,r=i?Math.min(100,s+5):Math.max(0,s-3);n.masteryLevel.set(t,r),r>=80&&!n.strongAreas.includes(t)?(n.strongAreas.push(t),n.weakAreas=n.weakAreas.filter(e=>e!==t)):r<50&&!n.weakAreas.includes(t)&&(n.weakAreas.push(t),n.strongAreas=n.strongAreas.filter(e=>e!==t));const l=this.metricsQueue.filter(i=>i.userId===e&&i.moduleId===t).slice(-10);if(l.length>=2){const e=l.map(e=>e.score),t=e[e.length-1]-e[0];n.improvementRate=t/e.length,n.learningVelocity=this.calculateLearningVelocity(e)}n.consistencyScore=this.calculateConsistencyScore(e)}calculateLearningVelocity(e){if(e.length<2)return 0;let t=0;for(let i=1;i<e.length;i++)t+=(e[i]-e[i-1])/e.length;return Math.max(-1,Math.min(1,t))}calculateConsistencyScore(e){const t=this.metricsQueue.filter(t=>t.userId===e);if(t.length<5)return 0;const i=t.map(e=>e.score),a=i.reduce((e,t)=>e+t,0)/i.length,n=i.reduce((e,t)=>e+Math.pow(t-a,2),0)/i.length,s=Math.sqrt(n);return Math.max(0,100-10*s)}calculateAverageScore(){const e=this.metricsQueue.filter(e=>e.sessionId===this.currentSessionId).map(e=>e.score);return 0===e.length?0:e.reduce((e,t)=>e+t,0)/e.length}getLearningPattern(e){return this.userPatterns.get(e)||null}getSessionAnalytics(e){const t=e||this.currentSessionId;return this.sessionData.get(t)||null}getDetailedAnalytics(e,t){return u(this,null,function*(){const i=yield this.fetchUserMetrics(e,t),a=this.getLearningPattern(e),n=yield this.fetchUserSessions(e,t);return{overview:this.calculateOverview(i),performanceTrend:this.calculatePerformanceTrend(i),moduleBreakdown:this.calculateModuleBreakdown(i),timeAnalysis:this.calculateTimeAnalysis(i),learningPattern:a,sessions:n,recommendations:this.generateRecommendations(i,a)}})}calculateOverview(e){return{totalModulesCompleted:new Set(e.map(e=>e.moduleId)).size,totalCasesCompleted:new Set(e.map(e=>e.caseId)).size,averageScore:e.reduce((e,t)=>e+t.score,0)/e.length,totalTimeSpent:e.reduce((e,t)=>e+t.timeSpent,0),accuracyRate:this.calculateAccuracyRate(e),improvementRate:this.calculateImprovementRate(e)}}calculatePerformanceTrend(e){const t=new Map;return e.forEach(e=>{const i=new Date(e.timestamp).toISOString().split("T")[0],a=t.get(i)||{scores:[],time:0};a.scores.push(e.score),a.time+=e.timeSpent,t.set(i,a)}),Array.from(t.entries()).map(([e,t])=>({date:e,averageScore:t.scores.reduce((e,t)=>e+t,0)/t.scores.length,totalTime:t.time,casesCompleted:t.scores.length}))}calculateModuleBreakdown(e){const t=new Map;return e.forEach(e=>{const i=t.get(e.moduleId)||{attempts:0,totalScore:0,totalTime:0,correctDecisions:0,incorrectDecisions:0};i.attempts++,i.totalScore+=e.score,i.totalTime+=e.timeSpent,i.correctDecisions+=e.correctDecisions,i.incorrectDecisions+=e.incorrectDecisions,t.set(e.moduleId,i)}),Array.from(t.entries()).map(([e,t])=>({moduleId:e,attempts:t.attempts,averageScore:t.totalScore/t.attempts,averageTime:t.totalTime/t.attempts,accuracy:t.correctDecisions/(t.correctDecisions+t.incorrectDecisions)*100}))}calculateTimeAnalysis(e){const t=new Array(24).fill(0).map(()=>({count:0,totalScore:0}));return e.forEach(e=>{const i=new Date(e.timestamp).getHours();t[i].count++,t[i].totalScore+=e.score}),t.map((e,t)=>({hour:t,averageScore:e.count>0?e.totalScore/e.count:0,activityLevel:e.count}))}calculateAccuracyRate(e){const t=e.reduce((e,t)=>e+t.correctDecisions,0),i=e.reduce((e,t)=>e+t.correctDecisions+t.incorrectDecisions,0);return i>0?t/i*100:0}calculateImprovementRate(e){if(e.length<2)return 0;const t=[...e].sort((e,t)=>e.timestamp-t.timestamp),i=t.slice(-5).reduce((e,t)=>e+t.score,0)/5,a=t.slice(0,5).reduce((e,t)=>e+t.score,0)/5;return(i-a)/a*100}generateRecommendations(e,t){const i=[];t&&(t.weakAreas.length>0&&i.push(`ZayÄ±f alanlarÄ±nÄ±za odaklanÄ±n: ${t.weakAreas.join(", ")}`),t.consistencyScore<60&&i.push("PerformansÄ±nÄ±zda dalgalanmalar var. DÃ¼zenli Ã§alÄ±ÅŸma rutini oluÅŸturun."),t.learningVelocity<0?i.push("Ã–ÄŸrenme hÄ±zÄ±nÄ±z dÃ¼ÅŸÃ¼yor. Daha basit vakalarla pratik yapÄ±n."):t.learningVelocity>.5&&i.push("Harika ilerleme! Daha zorlu vakalara geÃ§ebilirsiniz."));const a=this.calculateTimeAnalysis(e).filter(e=>e.averageScore>0).sort((e,t)=>t.averageScore-e.averageScore).slice(0,3).map(e=>e.hour);return a.length>0&&i.push(`En verimli saatleriniz: ${a.map(e=>`${e}:00`).join(", ")}`),i}fetchUserMetrics(e,t){return u(this,null,function*(){let i=this.metricsQueue.filter(t=>t.userId===e);if(t){const e=t.start.getTime(),a=t.end.getTime();i=i.filter(t=>t.timestamp>=e&&t.timestamp<=a)}return i})}fetchUserSessions(e,t){return u(this,null,function*(){const i=[];return this.sessionData.forEach((a,n)=>{if(this.metricsQueue.filter(t=>t.sessionId===n&&t.userId===e).length>0)if(t){a.sessionStart>=t.start.getTime()&&a.sessionStart<=t.end.getTime()&&i.push(a)}else i.push(a)}),i})}addToQueue(e){this.metricsQueue.push(e),this.metricsQueue.length>=this.batchSize&&this.flushMetrics()}flushMetrics(e=!1){return u(this,null,function*(){if(0===this.metricsQueue.length&&!e)return;const t=[...this.metricsQueue];this.metricsQueue=[];try{navigator.onLine?yield this.sendMetricsToBackend(t):this.saveToLocalStorage(t)}catch(i){console.error("Failed to flush metrics:",i),this.metricsQueue.unshift(...t),this.saveToLocalStorage(t)}})}sendMetricsToBackend(e){return u(this,null,function*(){const t=yield fetch(this.apiEndpoint,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.getAuthToken()}`},body:JSON.stringify({metrics:e,sessionId:this.currentSessionId,timestamp:Date.now()})});if(!t.ok)throw new Error(`Analytics API error: ${t.status}`)})}getAuthToken(){return localStorage.getItem("auth_token")||""}saveToLocalStorage(e){const t=e||this.metricsQueue,i=[...this.loadStoredMetrics(),...t].slice(-1e3);localStorage.setItem(this.storageKey,JSON.stringify(i))}loadStoredMetrics(){try{const e=localStorage.getItem(this.storageKey);return e?JSON.parse(e):[]}catch(Qe){return[]}}syncOfflineData(){return u(this,null,function*(){const e=this.loadStoredMetrics();if(e.length>0)try{yield this.sendMetricsToBackend(e),localStorage.removeItem(this.storageKey)}catch(t){console.error("Failed to sync offline data:",t)}})}enableOfflineMode(){console.log("Analytics service entering offline mode")}pauseSession(){const e=this.sessionData.get(this.currentSessionId);e&&(e.sessionEnd=Date.now())}resumeSession(){this.lastActivityTime=Date.now()}exportAnalyticsReport(e,t="json"){return u(this,null,function*(){const i=yield this.getDetailedAnalytics(e);if("json"===t)return new Blob([JSON.stringify(i,null,2)],{type:"application/json"});{const e=this.convertToCSV(i);return new Blob([e],{type:"text/csv"})}})}convertToCSV(e){const t=["Metric,Value"];return Object.entries(e.overview).forEach(([e,i])=>{t.push(`${e},${i}`)}),t.push(""),t.push("Date,Average Score,Total Time,Cases Completed"),e.performanceTrend.forEach(e=>{t.push(`${e.date},${e.averageScore},${e.totalTime},${e.casesCompleted}`)}),t.join("\n")}};m(Zi,"instance");const Xi=Zi.getInstance(),ea=({clinicalCase:e,onComplete:t,aiAnalysis:i,isAnalyzing:a})=>{var n,s;const{user:r}=At(),[l]=pe.useState(Date.now()),[o,m]=pe.useState(Date.now()),[p,h]=pe.useState({currentDecisionIndex:0,selectedAnswers:[],totalScore:0,timeSpent:0,riskScore:0,completed:!1}),[f,b]=pe.useState(null),[k,j]=pe.useState(!1),[N,S]=pe.useState({isEnabled:!0,isPlaying:!1,currentText:""}),[C,w]=pe.useState({chunks:[],isStreaming:!1,streamingError:null}),[A,T]=pe.useState(Gi[0]),E=Ht(),I=Ji("AIzaSyARZyERqMaFInsbRKUA0NxOok77syBNzK8"),P=e.decisionTree[p.currentDecisionIndex],R=(e,t="normal")=>u(void 0,null,function*(){if(N.isEnabled)try{S(t=>d(c({},t),{isPlaying:!0,currentText:e})),yield E.speak(e,{rate:.9},t)}catch(i){console.error("TTS Error:",i)}finally{S(e=>d(c({},e),{isPlaying:!1,currentText:""}))}}),z=()=>{E.stop(),S(e=>d(c({},e),{isPlaying:!1,currentText:""}))};pe.useEffect(()=>{0===p.currentDecisionIndex&&(r&&Xi.trackModuleStart(e.id,e.id,r.id),N.isEnabled&&setTimeout(()=>{E.announceCaseStart(e.title)},1e3))},[e.title,N.isEnabled,r]),pe.useEffect(()=>{if(p.completed&&N.isEnabled){const t=e.decisionTree.reduce((e,t)=>e+Math.max(...t.options.map(e=>e.points)),0);E.announceCaseComplete(p.totalScore,t)}},[p.completed,p.totalScore,N.isEnabled]),pe.useEffect(()=>{i&&!a&&N.isEnabled&&setTimeout(()=>{E.readAIAnalysis(i.feedback)},500)},[i,a,N.isEnabled]);const M=()=>u(void 0,null,function*(){if(I&&!p.completed){w({chunks:[],isStreaming:!0,streamingError:null});try{const s=`Karar dizisi: ${p.selectedAnswers.join(", ")}. Toplam puan: ${p.totalScore}`,r=I.streamClinicalCaseAnalysis(e,s,"student",{chunkSize:40,delayBetweenChunks:150,aiPersona:A}),l=[];try{for(var t,i,a,n=g(r);t=!(i=yield n.next()).done;t=!1){const e=i.value;l.push(e),w(e=>d(c({},e),{chunks:[...l]}))}}catch(i){a=[i]}finally{try{t&&(i=n.return)&&(yield i.call(n))}finally{if(a)throw a[0]}}w(e=>d(c({},e),{isStreaming:!1}))}catch(s){console.error("Streaming Analysis Error:",s),w(e=>d(c({},e),{isStreaming:!1,streamingError:"Streaming analiz baÅŸarÄ±sÄ±z oldu"}))}}}),L=()=>{I&&(I.cancelStream(),w(e=>d(c({},e),{isStreaming:!1})))};pe.useEffect(()=>{if((null==P?void 0:P.timeLimit)&&!k){b(P.timeLimit);const e=setInterval(()=>{b(t=>null===t||t<=1?(_(),clearInterval(e),0):t-1)},1e3);return()=>clearInterval(e)}},[p.currentDecisionIndex,k]);const _=()=>{V(P.options[0].id)},V=t=>{const i=P.options.find(e=>e.id===t);if(!i)return;const a=[...p.selectedAnswers,t],n=p.totalScore+i.points,s=p.riskScore+i.riskImpact,m=(Date.now()-l)/1e3/60,u=Date.now()-o;r&&Xi.trackDecision(r.id,e.id,e.id,t,i.isCorrect,u,"high"===P.criticalLevel||"critical"===P.criticalLevel),h(d(c({},p),{selectedAnswers:a,totalScore:n,riskScore:s,timeSpent:m})),j(!0),b(null)};if(p.completed){const t=(U=p.totalScore)>=90?{label:"Uzman Seviyesi",color:"text-green-600",bgColor:"bg-green-100"}:U>=75?{label:"Yetkin Seviyesi",color:"text-blue-600",bgColor:"bg-blue-100"}:U>=60?{label:"GeliÅŸtirilmeli",color:"text-yellow-600",bgColor:"bg-yellow-100"}:{label:"Ciddi EÄŸitim Ä°htiyacÄ±",color:"text-red-600",bgColor:"bg-red-100"};return x.jsxs("div",{className:"max-w-4xl mx-auto p-6 bg-white rounded-lg shadow-lg",children:[x.jsxs("div",{className:"text-center mb-8",children:[x.jsx(Y,{className:"w-16 h-16 mx-auto mb-4 text-yellow-500"}),x.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Vaka TamamlandÄ±! ğŸ‰"}),x.jsx("h3",{className:"text-xl text-gray-700",children:e.title})]}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[x.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg text-center",children:[x.jsx(q,{className:"w-8 h-8 mx-auto mb-2 text-blue-600"}),x.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[p.totalScore,"/100"]}),x.jsx("div",{className:"text-sm text-gray-600",children:"Toplam Puan"})]}),x.jsxs("div",{className:"bg-green-50 p-4 rounded-lg text-center",children:[x.jsx(J,{className:"w-8 h-8 mx-auto mb-2 text-green-600"}),x.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[Math.round(p.timeSpent)," dk"]}),x.jsx("div",{className:"text-sm text-gray-600",children:"SÃ¼re"})]}),x.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg text-center",children:[x.jsx(O,{className:"w-8 h-8 mx-auto mb-2 text-purple-600"}),x.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[p.riskScore>0?"+":"",p.riskScore]}),x.jsx("div",{className:"text-sm text-gray-600",children:"Risk Skoru"})]})]}),x.jsx("div",{className:`p-4 rounded-lg text-center mb-6 ${t.bgColor}`,children:x.jsx("div",{className:`text-xl font-bold ${t.color}`,children:t.label})}),(i||a||C.chunks.length>0)&&x.jsxs("div",{className:"bg-gradient-to-br from-medical-blue/10 to-medical-purple/10 border border-medical-blue/20 p-6 rounded-lg mb-6",children:[x.jsxs("div",{className:"flex items-center justify-between mb-4",children:[x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx(v,{className:"w-6 h-6 text-medical-purple"}),x.jsx("h4",{className:"font-semibold text-gray-900",children:"AI Analiz ve Geri Bildirim"})]}),!i&&!a&&x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx(Wi,{selectedPersona:A,onPersonaChange:T,className:"min-w-64"}),x.jsx("button",{onClick:M,disabled:C.isStreaming,className:`px-4 py-2 bg-${A.color} text-white rounded-lg hover:bg-${A.color}/80 transition-colors disabled:opacity-50 whitespace-nowrap`,children:C.isStreaming?`${A.icon} Analiz Ediliyor...`:`${A.icon} ${A.name} Analiz`})]})]}),C.chunks.length>0&&x.jsx(Qi,{streamChunks:C.chunks,isStreaming:C.isStreaming,title:"Klinik Vaka Analizi",type:"analysis",enableTTS:N.isEnabled,onCancel:L,onComplete:e=>{console.log("Streaming analysis complete:",e)}}),a&&0===C.chunks.length?x.jsxs("div",{className:"flex items-center justify-center py-8",children:[x.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-medical-blue mr-3"}),x.jsx("span",{className:"text-gray-600",children:"AI analiz yapÄ±yor..."})]}):i&&0===C.chunks.length&&x.jsxs("div",{className:"space-y-4",children:[x.jsxs("div",{className:"bg-white/50 p-4 rounded-lg",children:[x.jsxs("div",{className:"flex items-center justify-between mb-2",children:[x.jsx("h5",{className:"font-medium text-medical-blue",children:"ğŸ“ AI DeÄŸerlendirmesi:"}),x.jsx("button",{onClick:()=>R(i.feedback,"normal"),className:"p-1 rounded bg-medical-blue/10 hover:bg-medical-blue/20 transition-colors",title:"AI analizini sesli dinle",disabled:N.isPlaying,children:x.jsx($,{className:"w-4 h-4 text-medical-blue"})})]}),x.jsx("p",{className:"text-gray-700 text-sm leading-relaxed",children:i.feedback})]}),i.suggestions.length>0&&x.jsxs("div",{className:"bg-white/50 p-4 rounded-lg",children:[x.jsxs("div",{className:"flex items-center justify-between mb-2",children:[x.jsx("h5",{className:"font-medium text-medical-purple",children:"ğŸ’¡ Ä°yileÅŸtirme Ã–nerileri:"}),x.jsx("button",{onClick:()=>R(i.suggestions.join(". "),"normal"),className:"p-1 rounded bg-medical-purple/10 hover:bg-medical-purple/20 transition-colors",title:"Ã–nerileri sesli dinle",disabled:N.isPlaying,children:x.jsx($,{className:"w-4 h-4 text-medical-purple"})})]}),x.jsx("ul",{className:"text-sm space-y-1",children:i.suggestions.map((e,t)=>x.jsxs("li",{className:"flex items-start gap-2 text-gray-700",children:[x.jsx("span",{className:"text-medical-purple mt-1",children:"â€¢"}),x.jsx("span",{children:e})]},t))})]}),i.learningPoints.length>0&&x.jsxs("div",{className:"bg-white/50 p-4 rounded-lg",children:[x.jsxs("div",{className:"flex items-center justify-between mb-2",children:[x.jsx("h5",{className:"font-medium text-medical-green",children:"ğŸ¯ Ã–nemli Ã–ÄŸrenme NoktalarÄ±:"}),x.jsx("button",{onClick:()=>R(i.learningPoints.join(". "),"high"),className:"p-1 rounded bg-medical-green/10 hover:bg-medical-green/20 transition-colors",title:"Ã–ÄŸrenme noktalarÄ±nÄ± sesli dinle",disabled:N.isPlaying,children:x.jsx($,{className:"w-4 h-4 text-medical-green"})})]}),x.jsx("ul",{className:"text-sm space-y-1",children:i.learningPoints.map((e,t)=>x.jsxs("li",{className:"flex items-start gap-2 text-gray-700",children:[x.jsx("span",{className:"text-medical-green mt-1",children:"â€¢"}),x.jsx("span",{children:e})]},t))})]})]})]}),x.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg",children:[x.jsx("h4",{className:"font-semibold text-gray-900 mb-4",children:"Karar Ã–zeti:"}),e.decisionTree.map((e,t)=>{var i;const a=p.selectedAnswers[t],n=e.options.find(e=>e.id===a);return x.jsxs("div",{className:"mb-4 p-4 bg-white rounded border",children:[x.jsxs("div",{className:"flex items-center justify-between mb-2",children:[x.jsx("span",{className:"font-medium text-gray-700",children:e.timePoint}),x.jsxs("span",{className:"px-2 py-1 rounded text-sm "+((null==n?void 0:n.isCorrect)?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:[(null==n?void 0:n.isCorrect)?"âœ… DoÄŸru":"âŒ YanlÄ±ÅŸ"," (",null==n?void 0:n.points," puan)"]})]}),x.jsxs("div",{className:"text-sm text-gray-600",children:[x.jsx("strong",{children:"SeÃ§im:"})," ",null==n?void 0:n.text]}),!(null==n?void 0:n.isCorrect)&&x.jsxs("div",{className:"text-sm text-green-600 mt-1",children:[x.jsx("strong",{children:"DoÄŸru cevap:"})," ",null==(i=e.options.find(e=>e.isCorrect))?void 0:i.text]})]},e.id)})]})]})}var U;const F=p.selectedAnswers[p.currentDecisionIndex],X=F?P.options.find(e=>e.id===F):null;return x.jsxs("div",{className:"max-w-4xl mx-auto p-6 bg-white rounded-lg shadow-lg",children:[x.jsxs("div",{className:"mb-6",children:[x.jsxs("div",{className:"flex items-center justify-between mb-4",children:[x.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:e.title}),x.jsxs("div",{className:"flex items-center gap-4",children:[x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("button",{onClick:()=>{N.isPlaying&&z(),S(e=>d(c({},e),{isEnabled:!e.isEnabled}))},className:"p-2 rounded-lg transition-colors "+(N.isEnabled?"bg-medical-blue text-white hover:bg-medical-blue/80":"bg-gray-200 text-gray-600 hover:bg-gray-300"),title:N.isEnabled?"Ses aÃ§Ä±k":"Ses kapalÄ±",children:N.isEnabled?x.jsx(K,{className:"w-4 h-4"}):x.jsx(B,{className:"w-4 h-4"})}),N.isPlaying&&x.jsx("button",{onClick:z,className:"p-2 rounded-lg bg-red-500 text-white hover:bg-red-600 transition-colors",title:"Sesi durdur",children:x.jsx(H,{className:"w-4 h-4"})})]}),x.jsxs("div",{className:"flex items-center text-blue-600",children:[x.jsx(D,{className:"w-5 h-5 mr-1"}),x.jsxs("span",{className:"text-sm",children:["Karar ",p.currentDecisionIndex+1,"/",e.decisionTree.length]})]}),null!==f&&x.jsxs("div",{className:"flex items-center "+(f<30?"text-red-600":"text-green-600"),children:[x.jsx(Q,{className:"w-5 h-5 mr-1"}),x.jsxs("span",{className:"font-mono font-bold",children:[Math.floor(f/60),":",(f%60).toString().padStart(2,"0")]})]})]})]}),x.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:x.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-500",style:{width:(p.currentDecisionIndex+1)/e.decisionTree.length*100+"%"}})})]}),0===p.currentDecisionIndex&&x.jsxs("div",{className:"mb-6 p-4 bg-blue-50 rounded-lg",children:[x.jsxs("h3",{className:"font-semibold text-blue-900 mb-3 flex items-center",children:[x.jsx(W,{className:"w-5 h-5 mr-2"}),"Hasta Bilgileri"]}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[x.jsxs("div",{children:[x.jsxs("p",{children:[x.jsx("strong",{children:"YaÅŸ:"})," ",e.patient.age]}),x.jsxs("p",{children:[x.jsx("strong",{children:"Cinsiyet:"})," ","male"===e.patient.gender?"Erkek":"KadÄ±n"]}),x.jsxs("p",{children:[x.jsx("strong",{children:"BaÅŸvuru nedeni:"})," ",e.patient.chiefComplaint]}),x.jsxs("p",{children:[x.jsx("strong",{children:"Ã–ykÃ¼:"})," ",e.patient.history]}),e.patient.comorbidities&&x.jsxs("p",{children:[x.jsx("strong",{children:"Komorbiditeler:"})," ",e.patient.comorbidities.join(", ")]})]}),x.jsxs("div",{children:[x.jsx("h4",{className:"font-medium text-gray-700 mb-2",children:"Vital Bulgular:"}),x.jsx(ta,{vitals:e.vitalSigns}),e.labResults&&e.labResults.length>0&&x.jsxs(x.Fragment,{children:[x.jsx("h4",{className:"font-medium text-gray-700 mb-2 mt-4",children:"Ã–nemli Lab SonuÃ§larÄ±:"}),x.jsx(ia,{results:e.labResults})]})]})]})]}),x.jsxs("div",{className:"mb-6",children:[x.jsxs("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-4",children:[x.jsxs("h3",{className:"font-semibold text-yellow-800 mb-2 flex items-center",children:[x.jsx(y,{className:"w-5 h-5 mr-2"}),P.timePoint]}),x.jsx("p",{className:"text-yellow-700",children:P.scenario})]}),x.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg mb-4",children:[x.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:P.question}),k?x.jsxs("div",{className:"space-y-4",children:[x.jsxs("div",{className:"p-4 rounded-lg border-2 "+((null==X?void 0:X.isCorrect)?"border-green-500 bg-green-50":"border-red-500 bg-red-50"),children:[x.jsxs("div",{className:"flex items-center mb-2",children:[(null==X?void 0:X.isCorrect)?x.jsx(G,{className:"w-6 h-6 text-green-600 mr-2"}):x.jsx(Z,{className:"w-6 h-6 text-red-600 mr-2"}),x.jsxs("span",{className:"font-semibold",children:["SeÃ§iminiz: ",null==X?void 0:X.id,") ",null==X?void 0:X.text]})]}),x.jsxs("p",{className:"text-sm mb-2",children:[x.jsx("strong",{children:"Puan:"})," ",null==X?void 0:X.points,"/20 |",x.jsx("strong",{className:"ml-2",children:"Risk Etkisi:"})," ",(null!=(n=null==X?void 0:X.riskImpact)?n:0)>0?"+":"",null!=(s=null==X?void 0:X.riskImpact)?s:0]}),x.jsx("p",{className:"text-sm text-gray-700",children:null==X?void 0:X.explanation})]}),x.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[x.jsx("h5",{className:"font-semibold text-blue-900 mb-2",children:"AÃ§Ä±klama ve DoÄŸru Cevap:"}),x.jsx("div",{className:"text-sm text-blue-800 whitespace-pre-line",children:P.explanation}),P.consequences&&x.jsxs("div",{className:"mt-3",children:[x.jsx("h6",{className:"font-medium text-blue-900 mb-2",children:"Klinik SonuÃ§lar:"}),x.jsxs("p",{className:"text-sm text-blue-700",children:[x.jsxs("strong",{children:[null==X?void 0:X.id,"):"]})," ",P.consequences[(null==X?void 0:X.id)||""]]})]})]}),x.jsx("div",{className:"flex justify-end",children:x.jsx("button",{onClick:()=>{if(j(!1),m(Date.now()),p.currentDecisionIndex<e.decisionTree.length-1)h(d(c({},p),{currentDecisionIndex:p.currentDecisionIndex+1}));else{const i=(Date.now()-l)/1e3;r&&Xi.trackModuleCompletion(r.id,e.id,e.id,p.totalScore,i,p.selectedAnswers),h(d(c({},p),{completed:!0})),t(p.totalScore,p.selectedAnswers)}},className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center",children:p.currentDecisionIndex<e.decisionTree.length-1?x.jsxs(x.Fragment,{children:["Sonraki Karar ",x.jsx("span",{className:"ml-2",children:"â†’"})]}):x.jsxs(x.Fragment,{children:["VakayÄ± Tamamla ",x.jsx(Y,{className:"w-4 h-4 ml-2"})]})})})]}):x.jsx("div",{className:"space-y-3",children:P.options.map(e=>x.jsxs("button",{onClick:()=>V(e.id),className:"w-full text-left p-3 border border-gray-300 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-colors",disabled:0===f,children:[x.jsxs("span",{className:"font-medium text-blue-600 mr-2",children:[e.id,")"]}),x.jsx("span",{className:"text-gray-700",children:e.text})]},e.id))})]}),P.hints&&!k&&x.jsxs("div",{className:"bg-gray-100 p-3 rounded-lg",children:[x.jsx("h5",{className:"font-medium text-gray-700 mb-2",children:"ğŸ’¡ Ä°puÃ§larÄ±:"}),x.jsx("ul",{className:"list-disc list-inside text-sm text-gray-600",children:P.hints.map((e,t)=>x.jsx("li",{children:e},t))})]})]})]})},ta=({vitals:e})=>x.jsxs("div",{className:"text-sm space-y-1",children:[x.jsxs("div",{className:"flex items-center",children:[x.jsx(X,{className:"w-4 h-4 mr-1 text-red-500"}),x.jsxs("span",{children:[x.jsx("strong",{children:"KTA:"})," ",e.heartRate,"/dk"]})]}),x.jsxs("p",{children:[x.jsx("strong",{children:"TA:"})," ",e.bloodPressure]}),x.jsxs("p",{children:[x.jsx("strong",{children:"AteÅŸ:"})," ",e.temperature,"Â°C"]}),x.jsxs("p",{children:[x.jsx("strong",{children:"SaO2:"})," ",e.oxygenSaturation,"%"]}),x.jsxs("p",{children:[x.jsx("strong",{children:"Solunum:"})," ",e.respiratoryRate,"/dk"]}),e.glasgow&&x.jsxs("p",{children:[x.jsx("strong",{children:"GKS:"})," ",e.glasgow]})]}),ia=({results:e})=>x.jsxs("div",{className:"space-y-2",children:[e.slice(0,3).map((e,t)=>x.jsxs("div",{className:"text-xs",children:[x.jsxs("div",{className:"flex justify-between",children:[x.jsxs("span",{className:"font-medium",children:[e.test,":"]}),x.jsx("span",{className:e.value.includes("YÃ¼ksek")||e.value.includes("DÃ¼ÅŸÃ¼k")?"text-red-600 font-medium":"text-green-600",children:e.value})]}),x.jsxs("div",{className:"text-gray-500 text-xs",children:["(",e.normalRange,")"]})]},t)),e.length>3&&x.jsxs("div",{className:"text-xs text-blue-600 cursor-pointer",children:["+",e.length-3," daha fazla sonuÃ§..."]})]});class aa{constructor(e){m(this,"genAI"),m(this,"model","gemini-2.5-flash"),m(this,"turkishMedicalPrompt","\n    Sen TÃ¼rk tÄ±p eÄŸitimi iÃ§in Ã¶zelleÅŸtirilmiÅŸ, geliÅŸmiÅŸ bir tÄ±bbi eÄŸitim AI asistanÄ±sÄ±n. \n    TÃ¼rk tÄ±p Ã¶ÄŸrencileri ve asistan hekimler iÃ§in:\n    \n    - TEPDAD standartlarÄ±na uygun eÄŸitim iÃ§eriÄŸi saÄŸla\n    - TUS (TÄ±pta UzmanlÄ±k SÄ±navÄ±) hazÄ±rlÄ±ÄŸÄ±na yardÄ±mcÄ± ol\n    - TÃ¼rkÃ§e ve Ä°ngilizce tÄ±bbi terminolojiyi Ã¶ÄŸret\n    - Klinik vakalarÄ± TÃ¼rk hasta profili ile Ã¶rneklendir\n    - Evidence-based medicine prensiplerini uygula\n    - TÃ¼rk Tabipleri BirliÄŸi ve uzmanlÄ±k dernekleri kÄ±lavuzlarÄ±nÄ± referans al\n    \n    YanÄ±tlarÄ±n:\n    - TÃ¼rkÃ§e ve Ä°ngilizce karÄ±ÅŸÄ±k kullanabilir (medical terms iÃ§in)\n    - Klinik korelelasyonlar iÃ§erir\n    - TÃ¼rk saÄŸlÄ±k sistemine Ã¶zgÃ¼ yaklaÅŸÄ±mlar sunar\n    - GÃ¼ncel tÄ±bbi kÄ±lavuzlarÄ± referans alÄ±r\n    - Ã–ÄŸrenci seviyesine uygun aÃ§Ä±klamalar yapar\n  "),this.genAI=new _i({apiKey:e})}generateMEPResponse(e,t,i,a="bilingual"){return u(this,null,function*(){try{const n=this.buildMEPContextPrompt(t,i,a),s=this.genAI.getGenerativeModel({model:this.model});return(yield s.generateContent({contents:[{role:"user",parts:[{text:this.turkishMedicalPrompt},{text:n},{text:e+"\n\nProvide CONCISE, evidence-based response (max 300 words). Verify facts with Google Search."}]}],generationConfig:{temperature:.6,topK:40,topP:.95,maxOutputTokens:600},tools:[{googleSearchRetrieval:{dynamicRetrievalConfig:{mode:"MODE_DYNAMIC",dynamicThreshold:.8}}}]})).text||""}catch(n){throw console.error("MEP AI Response Error:",n),new Error("MEP AI yanÄ±t oluÅŸturulamadÄ±")}})}generateAdaptiveQuiz(e,t,i=10,a="bilingual"){return u(this,null,function*(){try{const n="turkish"===a?"SorularÄ± TÃ¼rkÃ§e oluÅŸtur, tÄ±bbi terimleri Ä°ngilizce karÅŸÄ±lÄ±klarÄ± ile birlikte ver.":"english"===a?"Generate questions in English with Turkish medical term translations.":"Use bilingual approach - Turkish explanations with English medical terms.",s=`\n        ${e.title} MEP modÃ¼lÃ¼ iÃ§in ${i} adet ${t} seviye soru oluÅŸtur.\n        \n        ModÃ¼l konularÄ±: ${e.requiredSkills.join(", ")}\n        Hedef seviye: ${e.difficulty}\n        Dil: ${n}\n        \n        Her soru iÃ§in JSON formatÄ±nda:\n        {\n          "id": "unique_id",\n          "question": "soru metni",\n          "type": "multiple-choice",\n          "options": ["seÃ§enek1", "seÃ§enek2", "seÃ§enek3", "seÃ§enek4"],\n          "correctAnswer": 0,\n          "explanation": "detaylÄ± aÃ§Ä±klama",\n          "difficulty": "${t}",\n          "aiHints": ["ipucu1", "ipucu2"],\n          "turkishTerms": {"term": "tÃ¼rkÃ§e_karÅŸÄ±lÄ±k"},\n          "clinicalCorrelation": "klinik korelasyon"\n        }\n        \n        Sadece geÃ§erli JSON array dÃ¶ndÃ¼r.\n      `,r=this.genAI.getGenerativeModel({model:this.model}),l=(yield r.generateContent({contents:[{role:"user",parts:[{text:s+"\n\nProvide CONCISE quiz (max 5 questions). Verify medical facts with Google Search."}]}],generationConfig:{temperature:.7,maxOutputTokens:800},tools:[{googleSearchRetrieval:{dynamicRetrievalConfig:{mode:"MODE_DYNAMIC",dynamicThreshold:.8}}}]})).text||"[]";try{return JSON.parse(l)}catch(Qe){return this.generateFallbackQuestions(e,t,i)}}catch(n){return console.error("Adaptive Quiz Generation Error:",n),this.generateFallbackQuestions(e,t,i)}})}analyzeClinicalCase(e,t,i){return u(this,null,function*(){try{const a=`\n        Klinik Vaka: ${e.title}\n        Hasta Bilgileri: ${JSON.stringify(e.patient,null,2)}\n        Vaka Sunumu: ${e.presentation}\n        \n        Ã–ÄŸrenci YanÄ±tÄ±: ${t}\n        Ã–ÄŸrenci Seviyesi: ${i}\n        \n        Bu klinik vaka iÃ§in Ã¶ÄŸrenci yanÄ±tÄ±nÄ± deÄŸerlendir ve ÅŸunlarÄ± saÄŸla:\n        1. DetaylÄ± geri bildirim\n        2. Ä°yileÅŸtirme Ã¶nerileri\n        3. DoÄŸru yaklaÅŸÄ±m adÄ±mlarÄ±\n        4. Ã–nemli Ã¶ÄŸrenme noktalarÄ±\n        \n        TÃ¼rkÃ§e aÃ§Ä±kla, tÄ±bbi terimleri Ä°ngilizce karÅŸÄ±lÄ±klarÄ± ile birlikte ver.\n        ${"student"===i?"TÄ±p Ã¶ÄŸrencisi seviyesine uygun aÃ§Ä±klamalar yap.":"Asistan hekim seviyesinde detaylÄ± analiz yap."}\n      `,n=(yield this.genAI.models.generateContent({model:this.model,contents:[{role:"user",parts:[{text:this.turkishMedicalPrompt},{text:a}]}],config:{temperature:.6}})).text||"";return{feedback:n,suggestions:this.extractSuggestions(n),correctApproach:e.diagnosticApproach,learningPoints:e.learningObjectives}}catch(a){return console.error("Clinical Case Analysis Error:",a),{feedback:"Analiz ÅŸu anda yapÄ±lamÄ±yor. LÃ¼tfen daha sonra tekrar deneyin.",suggestions:["Vaka detaylarÄ±nÄ± tekrar gÃ¶zden geÃ§irin","Diferansiyel tanÄ± listesi oluÅŸturun"],correctApproach:e.diagnosticApproach,learningPoints:e.learningObjectives}}})}generatePersonalizedRecommendations(e,t,i,a){return u(this,null,function*(){var n;try{const s=`\n        Ã–ÄŸrenci Profili:\n        - Seviye: ${i}\n        - Tamamlanan ModÃ¼ller: ${t.join(", ")}\n        - ZayÄ±f Alanlar: ${a.join(", ")}\n        - Toplam Ã‡alÄ±ÅŸma SÃ¼resi: ${e.timeSpent} dakika\n        - GÃ¼Ã§lÃ¼ Alanlar: ${(null==(n=e.strongAreas)?void 0:n.join(", "))||"HenÃ¼z belirlenmemiÅŸ"}\n        \n        Bu profil iÃ§in kiÅŸiselleÅŸtirilmiÅŸ Ã¶ÄŸrenme Ã¶nerileri oluÅŸtur:\n        1. OdaklanmasÄ± gereken konular\n        2. Ã–nerilen Ã§alÄ±ÅŸma sÄ±rasÄ±\n        3. ZayÄ±f alanlarÄ± gÃ¼Ã§lendirme stratejileri\n        4. Klinik vaka Ã¶nerileri\n        5. TUS/UzmanlÄ±k sÄ±nav hazÄ±rlÄ±ÄŸÄ± ipuÃ§larÄ±\n        \n        Her Ã¶neriyi ayrÄ± satÄ±rda, TÃ¼rkÃ§e olarak ver.\n      `,r=yield this.genAI.models.generateContent({model:this.model,contents:[{role:"user",parts:[{text:s}]}],config:{temperature:.7}});return(r.text||"").split("\n").filter(e=>e.trim().length>0)}catch(s){return console.error("Personalized Recommendations Error:",s),["Temel anatomi ve fizyoloji konularÄ±nÄ± tekrar edin","Klinik vaka Ã§alÄ±ÅŸmalarÄ±na aÄŸÄ±rlÄ±k verin","GÃ¼ncel tÄ±bbi kÄ±lavuzlarÄ± takip edin"]}})}explainTurkishMedicalTerm(e,t,i){return u(this,null,function*(){try{const a=`\n        TÄ±bbi terim: "${e}"\n        BaÄŸlam: "${t}"\n        Ã–ÄŸrenci seviyesi: ${i}\n        \n        Bu terim iÃ§in ÅŸunlarÄ± saÄŸla:\n        1. TÃ¼rkÃ§e adÄ±/tanÄ±mÄ±\n        2. Ä°ngilizce karÅŸÄ±lÄ±ÄŸÄ±\n        3. DetaylÄ± aÃ§Ä±klama\n        4. Klinik kullanÄ±m alanlarÄ±\n        5. Ã–rnek kullanÄ±mlar\n        \n        JSON formatÄ±nda dÃ¶ndÃ¼r:\n        {\n          "turkish": "tÃ¼rkÃ§e_terim",\n          "english": "english_term", \n          "definition": "detaylÄ±_tanÄ±m",\n          "clinicalUse": "klinik_kullanÄ±m",\n          "examples": ["Ã¶rnek1", "Ã¶rnek2", "Ã¶rnek3"]\n        }\n      `,n=(yield this.genAI.models.generateContent({model:this.model,contents:[{role:"user",parts:[{text:a}]}],config:{temperature:.5}})).text||"";try{return JSON.parse(n)}catch(Qe){return{turkish:e,english:e,definition:"TanÄ±m ÅŸu anda yÃ¼klenemedi",clinicalUse:"Klinik kullanÄ±m bilgisi mevcut deÄŸil",examples:["Ã–rnek yÃ¼klenemedi"]}}}catch(a){return console.error("Medical Term Explanation Error:",a),{turkish:e,english:e,definition:"TanÄ±m ÅŸu anda yÃ¼klenemedi",clinicalUse:"Klinik kullanÄ±m bilgisi mevcut deÄŸil",examples:["Ã–rnek yÃ¼klenemedi"]}}})}generateStudySchedule(e,t,i,a){return u(this,null,function*(){try{const n=`\n        KullanÄ±labilir MEP ModÃ¼lleri: ${e.map(e=>`${e.title} (${e.estimatedTime}h)`).join(", ")}\n        Ã–ÄŸrenci seviyesi: ${t}\n        GÃ¼nlÃ¼k Ã§alÄ±ÅŸma sÃ¼resi: ${i} dakika\n        HaftalÄ±k hedefler: ${a.join(", ")}\n        \n        KiÅŸiselleÅŸtirilmiÅŸ 7 gÃ¼nlÃ¼k Ã§alÄ±ÅŸma programÄ± oluÅŸtur:\n        - Her gÃ¼n iÃ§in modÃ¼l Ã¶nerileri\n        - Ã‡alÄ±ÅŸma sÃ¼resi daÄŸÄ±lÄ±mÄ±\n        - OdaklanÄ±lacak konular\n        - Ã–ncelik sÄ±ralamasÄ±\n        - Ã‡alÄ±ÅŸma ipuÃ§larÄ±\n        \n        JSON formatÄ±nda dÃ¶ndÃ¼r.\n      `,s=(yield this.genAI.models.generateContent({model:this.model,contents:[{role:"user",parts:[{text:n}]}],config:{temperature:.6}})).text||"";try{return JSON.parse(s)}catch(Qe){return this.generateFallbackSchedule(e,i)}}catch(n){return console.error("Study Schedule Generation Error:",n),this.generateFallbackSchedule(e,i)}})}buildMEPContextPrompt(e,t,i){return`\n      MEP ModÃ¼l BaÄŸlamÄ±:\n      - ModÃ¼l: ${e.title}\n      - AÃ§Ä±klama: ${e.description}\n      - Seviye: ${e.difficulty}\n      - Kategori: ${e.category}\n      - Dil: ${i}\n      - Ã–ÄŸrenci Seviyesi: ${t}\n      - Gerekli Beceriler: ${e.requiredSkills.join(", ")}\n      - TÃ¼rkÃ§e Terimler: ${JSON.stringify(e.turkishMedicalTerms)}\n      - UluslararasÄ± KÄ±lavuzlar: ${e.internationalGuidelines.join(", ")}\n    `}generateFallbackQuestions(e,t,i){const a=[];for(let n=0;n<i;n++)a.push({id:`fallback-${n}`,question:`${e.title} modÃ¼lÃ¼ hakkÄ±nda soru ${n+1}`,type:"multiple-choice",options:["SeÃ§enek A","SeÃ§enek B","SeÃ§enek C","SeÃ§enek D"],correctAnswer:0,explanation:"AÃ§Ä±klama yÃ¼klenemedi",difficulty:t,aiHints:["Ä°pucu mevcut deÄŸil"]});return a}extractSuggestions(e){return e.split("\n").filter(e=>e.trim().length>0).slice(0,5)}generateFallbackSchedule(e,t){const i={weeklySchedule:{},priorities:[],tips:[]};return["Pazartesi","SalÄ±","Ã‡arÅŸamba","PerÅŸembe","Cuma","Cumartesi","Pazar"].forEach((a,n)=>{const s=e[n%e.length];i.weeklySchedule[a]={modules:[s.title],duration:t,focus:s.category}}),i.priorities=["Temel konulara odaklan","Klinik vakalarÄ± Ã§Ã¶z","Tekrar yap"],i.tips=["DÃ¼zenli Ã§alÄ±ÅŸ","Notlar al","Pratik yap"],i}}let na=null;const sa=e=>{if(!na&&e&&(na=new aa(e)),!na)throw new Error("MEP AI Service not initialized. Please provide API key.");return na},ra=({isOpen:e,onClose:t,initialTerm:i=""})=>{const[a,n]=pe.useState(i),[s,r]=pe.useState(null),[l,o]=pe.useState(!1),[c,d]=pe.useState(null),[m,p]=pe.useState(!0),[h,y]=pe.useState(!1),[f,b]=pe.useState([]),[v,N]=pe.useState(!1),[S,C]=pe.useState(Gi[2]),w=Ht(),A=Ji("AIzaSyARZyERqMaFInsbRKUA0NxOok77syBNzK8"),T=()=>u(void 0,null,function*(){if(a.trim()){o(!0),d(null),r(null);try{const e="AIzaSyARZyERqMaFInsbRKUA0NxOok77syBNzK8";if(e){const t=sa(e),i=yield t.explainTurkishMedicalTerm(a,"TÄ±bbi eÄŸitim baÄŸlamÄ±","student");r(i),m&&i&&setTimeout(()=>u(void 0,null,function*(){try{yield w.speakMedicalTerm(i.turkish,i.english,i.definition)}catch(e){console.error("TTS Error:",e)}}),800)}}catch(e){d("Terim aÃ§Ä±klamasÄ± alÄ±namadÄ±. LÃ¼tfen tekrar deneyin.")}finally{o(!1)}}}),E=e=>{navigator.clipboard.writeText(e)},P=e=>u(void 0,null,function*(){if(m&&!h)try{y(!0),yield w.speak(e,{rate:.85,pitch:1})}catch(t){console.error("TTS Error:",t)}finally{y(!1)}}),R=()=>{w.stop(),y(!1)},z=()=>u(void 0,null,function*(){if(a.trim()&&A){o(!0),d(null),r(null),b([]),N(!0);try{const s=A.streamMedicalTermExplanation(a,"TÄ±bbi eÄŸitim baÄŸlamÄ±","student",{chunkSize:35,delayBetweenChunks:100,aiPersona:S}),r=[];try{for(var e,t,i,n=g(s);e=!(t=yield n.next()).done;e=!1){const e=t.value;r.push(e),b([...r])}}catch(t){i=[t]}finally{try{e&&(t=n.return)&&(yield t.call(n))}finally{if(i)throw i[0]}}}catch(s){console.error("Streaming Term Explanation Error:",s),d("Terim aÃ§Ä±klamasÄ± alÄ±namadÄ±. LÃ¼tfen tekrar deneyin.")}finally{o(!1),N(!1)}}});return e?x.jsx(M,{children:x.jsx(k.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:t,children:x.jsxs(k.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"bg-medical-dark rounded-xl p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto border border-medical-blue/20",onClick:e=>e.stopPropagation(),children:[x.jsxs("div",{className:"flex items-center justify-between mb-6",children:[x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx(j,{className:"w-6 h-6 text-medical-blue"}),x.jsx("h2",{className:"text-2xl font-bold text-white",children:"TÃ¼rkÃ§e TÄ±bbi Terim AsistanÄ±"})]}),x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx(Wi,{selectedPersona:S,onPersonaChange:C,className:"min-w-48"}),x.jsx("button",{onClick:()=>{h&&R(),p(!m)},className:"p-2 rounded-lg transition-colors "+(m?"bg-medical-blue text-white hover:bg-medical-blue/80":"bg-gray-600 text-gray-400 hover:bg-gray-500"),title:m?"Ses aÃ§Ä±k":"Ses kapalÄ±",children:m?x.jsx(K,{className:"w-5 h-5"}):x.jsx(B,{className:"w-5 h-5"})}),h&&x.jsx("button",{onClick:R,className:"p-2 rounded-lg bg-red-500 text-white hover:bg-red-600 transition-colors",title:"Sesi durdur",children:x.jsx(H,{className:"w-5 h-5"})}),x.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-700 rounded-lg transition-colors",children:x.jsx(ee,{className:"w-6 h-6 text-gray-400"})})]})]}),x.jsx("div",{className:"mb-6",children:x.jsxs("div",{className:"relative",children:[x.jsx("input",{type:"text",value:a,onChange:e=>n(e.target.value),onKeyPress:e=>{"Enter"!==e.key||l||T()},placeholder:"TÄ±bbi terimi giriniz (Ã¶rn. hipertansiyon, miyokard infarktÃ¼sÃ¼, septik ÅŸok)",className:"w-full bg-gray-800 border border-gray-600 rounded-lg px-4 py-3 text-white placeholder-gray-400 focus:border-medical-blue focus:outline-none pr-12"}),x.jsxs("div",{className:"absolute right-2 top-1/2 transform -translate-y-1/2 flex gap-1",children:[x.jsx("button",{onClick:T,disabled:l||!a.trim(),className:"p-2 bg-medical-blue hover:bg-medical-blue/80 disabled:bg-gray-600 disabled:cursor-not-allowed rounded-lg transition-colors",title:"Normal arama",children:l&&!v?x.jsx(L,{className:"w-4 h-4 text-white animate-spin"}):x.jsx(I,{className:"w-4 h-4 text-white"})}),x.jsx("button",{onClick:z,disabled:l||!a.trim()||!A,className:"p-2 bg-medical-purple hover:bg-medical-purple/80 disabled:bg-gray-600 disabled:cursor-not-allowed rounded-lg transition-colors",title:"Streaming arama",children:v?x.jsx(L,{className:"w-4 h-4 text-white animate-spin"}):x.jsx($,{className:"w-4 h-4 text-white"})})]})]})}),c&&x.jsx("div",{className:"mb-6 p-4 bg-red-500/20 border border-red-500/40 rounded-lg",children:x.jsx("p",{className:"text-red-400",children:c})}),f.length>0&&x.jsx(Qi,{streamChunks:f,isStreaming:v,title:`TÄ±bbi Terim: ${a}`,type:"explanation",enableTTS:m,onCancel:()=>{A&&(A.cancelStream(),N(!1))},onComplete:e=>{console.log("Streaming term explanation complete:",e)}}),s&&0===f.length&&x.jsxs(k.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:[x.jsx("div",{className:"bg-gradient-to-r from-medical-blue/20 to-medical-cyan/20 border border-medical-blue/30 rounded-lg p-6",children:x.jsx("div",{className:"flex items-center justify-between mb-4",children:x.jsxs("div",{children:[x.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:s.turkish}),x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx(te,{className:"w-4 h-4 text-medical-cyan"}),x.jsx("span",{className:"text-medical-cyan font-medium",children:s.english}),x.jsx("button",{onClick:()=>E(s.english),className:"p-1 hover:bg-medical-cyan/20 rounded transition-colors",title:"Ä°ngilizce terimi kopyala",children:x.jsx(ie,{className:"w-3 h-3 text-medical-cyan"})}),x.jsx("button",{onClick:()=>P(`${s.turkish}. Ä°ngilizce karÅŸÄ±lÄ±ÄŸÄ±: ${s.english}`),className:"p-1 hover:bg-medical-cyan/20 rounded transition-colors",title:"Terimi sesli dinle",disabled:h,children:x.jsx($,{className:"w-3 h-3 text-medical-cyan"})})]})]})})}),x.jsxs("div",{className:"bg-gray-800/50 border border-gray-700 rounded-lg p-6",children:[x.jsxs("div",{className:"flex items-center justify-between mb-4",children:[x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx(W,{className:"w-5 h-5 text-medical-green"}),x.jsx("h4",{className:"text-lg font-semibold text-white",children:"TanÄ±m"})]}),x.jsx("button",{onClick:()=>P(s.definition),className:"p-1 hover:bg-medical-green/20 rounded transition-colors",title:"TanÄ±mÄ± sesli dinle",disabled:h,children:x.jsx($,{className:"w-4 h-4 text-medical-green"})})]}),x.jsx("p",{className:"text-gray-300 leading-relaxed",children:s.definition})]}),x.jsxs("div",{className:"bg-gray-800/50 border border-gray-700 rounded-lg p-6",children:[x.jsxs("div",{className:"flex items-center justify-between mb-4",children:[x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx(D,{className:"w-5 h-5 text-medical-purple"}),x.jsx("h4",{className:"text-lg font-semibold text-white",children:"Klinik KullanÄ±m"})]}),x.jsx("button",{onClick:()=>P(s.clinicalUse),className:"p-1 hover:bg-medical-purple/20 rounded transition-colors",title:"Klinik kullanÄ±mÄ± sesli dinle",disabled:h,children:x.jsx($,{className:"w-4 h-4 text-medical-purple"})})]}),x.jsx("p",{className:"text-gray-300 leading-relaxed",children:s.clinicalUse})]}),s.examples.length>0&&x.jsxs("div",{className:"bg-gray-800/50 border border-gray-700 rounded-lg p-6",children:[x.jsxs("div",{className:"flex items-center justify-between mb-4",children:[x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx(ae,{className:"w-5 h-5 text-amber-500"}),x.jsx("h4",{className:"text-lg font-semibold text-white",children:"KullanÄ±m Ã–rnekleri"})]}),x.jsx("button",{onClick:()=>P(s.examples.join(". ")),className:"p-1 hover:bg-amber-500/20 rounded transition-colors",title:"Ã–rnekleri sesli dinle",disabled:h,children:x.jsx($,{className:"w-4 h-4 text-amber-500"})})]}),x.jsx("ul",{className:"space-y-2",children:s.examples.map((e,t)=>x.jsxs("li",{className:"flex items-start gap-3 text-gray-300",children:[x.jsx("span",{className:"text-amber-500 mt-1",children:"â€¢"}),x.jsx("span",{className:"leading-relaxed",children:e})]},t))})]}),x.jsxs("div",{className:"flex gap-3 pt-4",children:[x.jsxs("button",{onClick:()=>E(`${s.turkish} (${s.english}): ${s.definition}`),className:"flex items-center gap-2 px-4 py-2 bg-medical-blue hover:bg-medical-blue/80 text-white rounded-lg transition-colors",children:[x.jsx(ie,{className:"w-4 h-4"}),"TanÄ±mÄ± Kopyala"]}),x.jsx("button",{onClick:()=>{n(""),r(null),d(null)},className:"px-4 py-2 border border-gray-600 text-gray-300 hover:bg-gray-700 rounded-lg transition-colors",children:"Yeni Arama"})]})]}),!s&&!l&&0===f.length&&x.jsxs("div",{className:"mt-8",children:[x.jsx("h4",{className:"text-lg font-semibold text-white mb-4",children:"PopÃ¼ler TÄ±bbi Terimler"}),x.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:["Hipertansiyon","Miyokard Ä°nfarktÃ¼sÃ¼","Septik Åok","Status Epileptikus","Febril NÃ¶tropeni","Akut Koroner Sendrom","Pulmoner Emboli","Diabetik Ketoasidoz"].map(e=>x.jsx("button",{onClick:()=>{n(e),z()},className:"text-left p-3 bg-gray-800 hover:bg-gray-700 border border-gray-600 rounded-lg text-gray-300 hover:text-white transition-all",children:e},e))})]})]})})}):null},la=[{id:"trauma-polytrauma",title:"Ã‡oklu Travma YÃ¶netimi",specialty:"Emergency Medicine",difficulty:"resident",estimatedTime:45,description:"Trafik kazasÄ± sonrasÄ± Ã§oklu travmalÄ± hasta yÃ¶netimi",learningObjectives:["ATLS protokollerinin uygulanmasÄ±","Triaj ve Ã¶nceliklendirme","Damage control resÃ¼sitasyon","Multidisipliner ekip koordinasyonu"],initialPatientPresentation:"28 yaÅŸÄ±nda erkek hasta, yÃ¼ksek hÄ±zlÄ± araÃ§ kazasÄ± sonrasÄ± acile getirildi. GKS: 13, hipotansif, takipneik.",decisionTree:[{id:"initial-assessment",question:"Ä°lk deÄŸerlendirme ve mÃ¼dahale Ã¶nceliÄŸiniz?",context:"Hasta acil servise yeni geldi. TA: 85/50, NabÄ±z: 128, SatO2: 89%, GKS: 13",timeLimit:120,criticalLevel:"critical",options:[{id:"abc-primary",text:"Primary Survey (ABCDE) baÅŸlat ve C-spine stabilizasyonu",isCorrect:!0,branches:[{id:"airway-secured",condition:"Airway patent, C-spine korundu",probability:.9,consequences:["Hava yolu gÃ¼vende","Servikal travma riski azaldÄ±"],nextDecisions:[{id:"breathing-assessment",question:"Solunum deÄŸerlendirmesinde tension pnÃ¶motoraks bulgularÄ±?",context:"SaÄŸ hemitoraksta solunum sesleri azalmÄ±ÅŸ, trakea sola deviye",timeLimit:60,criticalLevel:"critical",options:[{id:"needle-decompression",text:"Acil needle dekompresyon yap",isCorrect:!0,branches:[{id:"successful-decompression",condition:"Dekompresyon baÅŸarÄ±lÄ±",probability:.85,consequences:["Vital bulgular dÃ¼zeldi","SatO2 %95'e yÃ¼kseldi"]}],explanation:"Tension pnÃ¶motoraks hayatÄ± tehdit eden acil durumdur",points:30}]}]}],explanation:"ATLS protokolÃ¼ne gÃ¶re sistematik yaklaÅŸÄ±m hayat kurtarÄ±r",points:25},{id:"direct-imaging",text:"Hemen BT Ã§ek, yaralanmalarÄ± tespit et",isCorrect:!1,branches:[{id:"patient-deteriorated",condition:"Hasta BT'de arrest oldu",probability:.7,consequences:["Kardiyak arrest","CPR baÅŸlatÄ±ldÄ±","KÃ¶tÃ¼ prognoz"]}],explanation:"Unstable hastada BT kontraendikedir, Ã¶nce stabilizasyon!",points:-20}],patientData:{vitals:{Tansiyon:"85/50 mmHg","NabÄ±z":"128/dk",Solunum:"28/dk","AteÅŸ":"36.2Â°C",SatO2:"%89"},labs:{Hgb:"9.2 g/dL",Hct:"%27",Laktat:"4.8 mmol/L",BE:"-8"}}}],scoringRubric:{perfect:100,good:75,passing:60}},{id:"pediatric-meningitis",title:"Pediatrik Menenjit YÃ¶netimi",specialty:"Pediatrics",difficulty:"resident",estimatedTime:30,description:"3 yaÅŸÄ±nda Ã§ocukta akut bakteriyel menenjit ÅŸÃ¼phesi",learningObjectives:["Pediatrik menenjit tanÄ± kriterleri","Ampirik antibiyotik seÃ§imi","Komplikasyon yÃ¶netimi","Aile iletiÅŸimi"],initialPatientPresentation:"3 yaÅŸÄ±nda kÄ±z, 2 gÃ¼ndÃ¼r ateÅŸ, kusma, ense sertliÄŸi ile baÅŸvurdu. PeteÅŸiyal dÃ¶kÃ¼ntÃ¼ mevcut.",decisionTree:[{id:"initial-pediatric",question:"Meningokok menenjiti ÅŸÃ¼phesi - ilk yaklaÅŸÄ±m?",context:"AteÅŸ: 39.5Â°C, ense sertliÄŸi (+), peteÅŸiyal dÃ¶kÃ¼ntÃ¼ yaygÄ±nlaÅŸÄ±yor",timeLimit:180,criticalLevel:"critical",options:[{id:"immediate-antibiotics",text:"Kan kÃ¼ltÃ¼rÃ¼ al ve hemen seftriakson + vankomisin baÅŸla",isCorrect:!0,branches:[{id:"antibiotics-started",condition:"Antibiyotikler baÅŸlandÄ±",probability:.95,consequences:["Mortalite riski azaldÄ±","Sepsis progresyonu durduruldu"]}],explanation:"Meningokok menenjitinde dakikalar hayat kurtarÄ±r",points:30},{id:"lp-first",text:"Ã–nce LP yap, kÃ¼ltÃ¼r sonucuna gÃ¶re antibiyotik",isCorrect:!1,branches:[{id:"delayed-treatment",condition:"Tedavi gecikti",probability:.8,consequences:["Septik ÅŸok geliÅŸti","NÃ¶rolojik sekel riski arttÄ±"]}],explanation:"LP antibiyotiÄŸi geciktirmemeli, ampirik tedavi Ã¶ncelikli!",points:-15}]}],scoringRubric:{perfect:100,good:80,passing:65}}];function oa(){const[e,t]=pe.useState(null),[i,a]=pe.useState(null),[n,s]=pe.useState([]),[r,l]=pe.useState(0),[o,m]=pe.useState(null),[u,p]=pe.useState(!1),[h,g]=pe.useState({stable:!0,complications:[],improvements:[]});pe.useEffect(()=>{if((null==i?void 0:i.timeLimit)&&null!==o&&o>0){const e=setTimeout(()=>{m(o-1)},1e3);return()=>clearTimeout(e)}0===o&&y()},[o,i]);const y=()=>{i&&(g(e=>d(c({},e),{stable:!1,complications:[...e.complications,"Kritik zaman aÅŸÄ±ldÄ± - hasta durumu kÃ¶tÃ¼leÅŸti"]})),l(r-10),f())},f=()=>{p(!0),m(null)},b=()=>{if(!e)return"N/A";const t=r/e.scoringRubric.perfect*100;return t>=90?"MÃ¼kemmel":t>=75?"Ä°yi":t>=60?"GeÃ§er":"GeliÅŸtirilmeli"},j=()=>{t(null),a(null),s([]),l(0),p(!1),g({stable:!0,complications:[],improvements:[]}),m(null)};return e?u?x.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-blue-900 to-purple-900 p-4 flex items-center justify-center",children:x.jsxs(k.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"bg-gray-900/95 backdrop-blur-sm rounded-xl p-8 max-w-2xl w-full border border-gray-600",children:[x.jsxs("div",{className:"text-center mb-6",children:[x.jsx(Y,{className:"w-16 h-16 text-yellow-400 mx-auto mb-4"}),x.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"SimÃ¼lasyon TamamlandÄ±!"}),x.jsx("p",{className:"text-xl text-gray-100",children:e.title})]}),x.jsxs("div",{className:"bg-gray-800/90 rounded-lg p-4 mb-6 border border-gray-700",children:[x.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[x.jsxs("div",{children:[x.jsx("p",{className:"text-gray-400 text-sm",children:"Toplam Puan"}),x.jsx("p",{className:"text-2xl font-bold text-white",children:r})]}),x.jsxs("div",{children:[x.jsx("p",{className:"text-gray-400 text-sm",children:"Performans"}),x.jsx("p",{className:"text-2xl font-bold text-cyan-400",children:b()})]})]}),h.complications.length>0&&x.jsxs("div",{className:"mb-4",children:[x.jsx("p",{className:"text-red-400 font-semibold mb-2",children:"Komplikasyonlar:"}),x.jsx("ul",{className:"text-sm text-gray-100 space-y-1",children:h.complications.map((e,t)=>x.jsxs("li",{children:["â€¢ ",e]},t))})]}),h.improvements.length>0&&x.jsxs("div",{children:[x.jsx("p",{className:"text-green-400 font-semibold mb-2",children:"BaÅŸarÄ±lar:"}),x.jsx("ul",{className:"text-sm text-gray-100 space-y-1",children:h.improvements.map((e,t)=>x.jsxs("li",{children:["â€¢ ",e]},t))})]})]}),x.jsxs("div",{className:"space-y-3 mb-6",children:[x.jsx("h3",{className:"text-lg font-semibold text-white",children:"Karar GeÃ§miÅŸi:"}),n.map((e,t)=>x.jsxs("div",{className:"bg-black/20 rounded-lg p-3",children:[x.jsx("p",{className:"text-sm text-gray-400 mb-1",children:e.decision.question}),x.jsx("p",{className:"text-white font-medium",children:e.choice}),x.jsxs("p",{className:"text-sm mt-1 "+(e.points>0?"text-green-400":"text-red-400"),children:[e.points>0?"+":"",e.points," puan"]})]},t))]}),x.jsxs("button",{onClick:j,className:"w-full bg-gradient-to-r from-cyan-500 to-blue-500 text-white font-semibold py-3 rounded-lg hover:from-cyan-600 hover:to-blue-600 transition-all flex items-center justify-center gap-2",children:[x.jsx(se,{className:"w-5 h-5"}),"Yeni SimÃ¼lasyon"]})]})}):x.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-blue-900 to-purple-900 p-4",children:x.jsx("div",{className:"max-w-4xl mx-auto",children:x.jsxs(k.div,{initial:{opacity:0},animate:{opacity:1},className:"bg-gray-900/95 backdrop-blur-sm rounded-xl p-6 border border-gray-600",children:[x.jsxs("div",{className:"flex justify-between items-center mb-6",children:[x.jsx("h2",{className:"text-2xl font-bold text-white",children:e.title}),x.jsxs("div",{className:"flex items-center gap-4",children:[x.jsxs("div",{className:"text-right",children:[x.jsx("p",{className:"text-sm text-gray-400",children:"Puan"}),x.jsx("p",{className:"text-xl font-bold text-cyan-400",children:r})]}),null!==o&&x.jsxs("div",{className:"text-right "+(o<30?"text-red-400":"text-white"),children:[x.jsx("p",{className:"text-sm text-gray-400",children:"SÃ¼re"}),x.jsxs("p",{className:"text-xl font-bold flex items-center gap-1",children:[x.jsx(J,{className:"w-5 h-5"}),Math.floor(o/60),":",(o%60).toString().padStart(2,"0")]})]})]})]}),x.jsx("div",{className:"bg-gradient-to-r from-yellow-900/50 to-orange-900/50 rounded-lg p-4 mb-6 border border-yellow-500/30",children:x.jsxs("div",{className:"flex items-start gap-3",children:[x.jsx(V,{className:"w-6 h-6 text-yellow-400 flex-shrink-0 mt-1"}),x.jsxs("div",{children:[x.jsx("p",{className:"text-lg font-semibold text-white mb-2",children:"Hasta Durumu"}),x.jsx("p",{className:"text-gray-200",children:e.initialPatientPresentation})]})]})}),i&&x.jsx(M,{mode:"wait",children:x.jsxs(k.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},children:[x.jsxs("div",{className:"mb-6",children:[x.jsxs("div",{className:`inline-block px-3 py-1 rounded-full text-xs font-semibold mb-3 ${"critical"===i.criticalLevel?"bg-red-500":"high"===i.criticalLevel?"bg-orange-500":"medium"===i.criticalLevel?"bg-yellow-500":"bg-green-500"} text-white`,children:[i.criticalLevel.toUpperCase()," Ã–NCELÄ°K"]}),x.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:i.question}),x.jsx("p",{className:"text-gray-100 mb-4",children:i.context}),i.patientData&&x.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[i.patientData.vitals&&x.jsxs("div",{className:"bg-gray-800/90 rounded-lg p-3 border border-gray-700",children:[x.jsx("h4",{className:"text-sm font-semibold text-cyan-400 mb-2",children:"Vital Bulgular"}),Object.entries(i.patientData.vitals).map(([e,t])=>x.jsxs("div",{className:"flex justify-between text-sm",children:[x.jsxs("span",{className:"text-gray-400",children:[e,":"]}),x.jsx("span",{className:"text-white font-medium",children:t})]},e))]}),i.patientData.labs&&x.jsxs("div",{className:"bg-gray-800/90 rounded-lg p-3 border border-gray-700",children:[x.jsx("h4",{className:"text-sm font-semibold text-cyan-400 mb-2",children:"Laboratuvar"}),Object.entries(i.patientData.labs).map(([e,t])=>x.jsxs("div",{className:"flex justify-between text-sm",children:[x.jsxs("span",{className:"text-gray-400",children:[e,":"]}),x.jsx("span",{className:"text-white font-medium",children:t})]},e))]})]}),x.jsx("div",{className:"space-y-3",children:i.options.map(t=>x.jsx("button",{onClick:()=>(t=>{if(!i||!e)return;const o=i.options.find(e=>e.id===t);if(!o)return;const u=o.branches[0];s([...n,{decision:i,choice:o.text,outcome:u,points:o.points}]),l(r+o.points),u.consequences&&(o.isCorrect?g(e=>d(c({},e),{improvements:[...e.improvements,...u.consequences]})):g(e=>d(c({},e),{stable:!1,complications:[...e.complications,...u.consequences]}))),u.nextDecisions&&u.nextDecisions.length>0?(a(u.nextDecisions[0]),u.nextDecisions[0].timeLimit?m(u.nextDecisions[0].timeLimit):m(null)):f()})(t.id),className:"w-full text-left p-4 bg-gray-800/90 rounded-lg border border-gray-600 hover:border-cyan-400 hover:bg-gray-700/90 transition-all",children:x.jsx("p",{className:"text-white font-medium",children:t.text})},t.id))})]}),h.complications.length>0&&x.jsxs("div",{className:"bg-red-900/30 border border-red-500/30 rounded-lg p-3 mt-4",children:[x.jsx("p",{className:"text-red-400 font-semibold mb-1",children:"âš ï¸ Komplikasyonlar:"}),x.jsx("ul",{className:"text-sm text-gray-100",children:h.complications.map((e,t)=>x.jsxs("li",{children:["â€¢ ",e]},t))})]}),h.improvements.length>0&&x.jsxs("div",{className:"bg-green-900/30 border border-green-500/30 rounded-lg p-3 mt-4",children:[x.jsx("p",{className:"text-green-400 font-semibold mb-1",children:"âœ“ Ä°yileÅŸmeler:"}),x.jsx("ul",{className:"text-sm text-gray-100",children:h.improvements.map((e,t)=>x.jsxs("li",{children:["â€¢ ",e]},t))})]})]},i.id)})]})})}):x.jsx("div",{className:"min-h-screen bg-gray-900 p-4",children:x.jsxs("div",{className:"max-w-7xl mx-auto",children:[x.jsxs(k.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"text-center mb-8",children:[x.jsxs("h1",{className:"text-5xl font-bold text-white mb-4 flex items-center justify-center gap-3",children:[x.jsx(v,{className:"w-12 h-12 text-cyan-400"}),"MedRESIDENT SimÃ¼lasyonlarÄ±"]}),x.jsx("p",{className:"text-xl text-gray-100",children:"GerÃ§ekÃ§i klinik senaryolarla karar verme becerilerinizi geliÅŸtirin"})]}),x.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:la.map((e,i)=>x.jsxs(k.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.1*i},className:"bg-gray-800/90 backdrop-blur-sm rounded-xl p-6 border border-gray-600 hover:border-cyan-400 transition-all cursor-pointer",onClick:()=>{return t(i=e),a(i.decisionTree[0]),s([]),l(0),p(!1),g({stable:!0,complications:[],improvements:[]}),void(i.decisionTree[0].timeLimit&&m(i.decisionTree[0].timeLimit));var i},children:[x.jsxs("div",{className:"flex justify-between items-start mb-4",children:[x.jsx("h3",{className:"text-2xl font-bold text-white",children:e.title}),x.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${"resident"===e.difficulty?"bg-yellow-500":"bg-red-500"} text-white`,children:e.difficulty.toUpperCase()})]}),x.jsx("p",{className:"text-gray-100 mb-4",children:e.description}),x.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-400 mb-4",children:[x.jsxs("span",{className:"flex items-center gap-1",children:[x.jsx(X,{className:"w-4 h-4"}),e.specialty]}),x.jsxs("span",{className:"flex items-center gap-1",children:[x.jsx(J,{className:"w-4 h-4"}),e.estimatedTime," dk"]})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsx("h4",{className:"text-sm font-semibold text-cyan-400",children:"Ã–ÄŸrenme Hedefleri:"}),x.jsx("ul",{className:"text-xs text-gray-100 space-y-1",children:e.learningObjectives.slice(0,2).map((e,t)=>x.jsxs("li",{className:"flex items-start gap-1",children:[x.jsx(ne,{className:"w-3 h-3 mt-0.5 text-cyan-400"}),e]},t))})]}),x.jsx("button",{className:"mt-4 w-full bg-gradient-to-r from-cyan-500 to-blue-500 text-white font-semibold py-2 rounded-lg hover:from-cyan-600 hover:to-blue-600 transition-all",children:"SimÃ¼lasyonu BaÅŸlat"})]},e.id))})]})})}const ca=()=>{const{user:e,userProgress:t}=At(),[i,a]=pe.useState("student"),[n,s]=pe.useState(null),[r,l]=pe.useState(null),[o,c]=pe.useState([]),[d,m]=pe.useState(null),[p,h]=pe.useState(!1),[g,f]=pe.useState([]),[b,S]=pe.useState(!1),[A,T]=pe.useState(!1),[E,I]=pe.useState(!1),[P,R]=pe.useState("");pe.useEffect(()=>{if(e&&t){const i=((e,t)=>{const i=[];return"student"===e?(i.push("Temel clinical reasoning pathways ile baÅŸlayÄ±n"),i.push("Pattern recognition training'e odaklanÄ±n")):"resident"===e&&(t.includes("case-septic-shock-complete")||i.push("Septic shock case - acil tÄ±p rotasyonu iÃ§in kritik"),t.includes("case-stemi-complete")||i.push("STEMI case - kardiyoloji rotasyonu iÃ§in essential")),i})(e.level,t.completedModules||[]);c(i),z()}},[e,t]);const z=()=>u(void 0,null,function*(){if(e&&t){S(!0);try{const i="AIzaSyARZyERqMaFInsbRKUA0NxOok77syBNzK8";if(i){const a=sa(i),n=t.completedModules||[],s=["zaman yÃ¶netimi","klinik karar verme","acil tÄ±p protokolleri"],r={completionPercentage:65,timeSpent:240,strongAreas:["temel tÄ±p bilgisi","hasta deÄŸerlendirmesi"]},l=yield a.generatePersonalizedRecommendations(r,n,"resident"===e.level?"resident":"student",s);f(l.slice(0,6))}}catch(i){console.error("AI Recommendations Error:",i),f(["Temel klinik becerilerinizi geliÅŸtirin","Zaman yÃ¶netiminde daha hÄ±zlÄ± olun","Klinik protokolleri pekiÅŸtirin"])}finally{S(!1)}}}),L=Lt,K={total:L.length,completed:L.filter(e=>e.completed).length,inProgress:L.filter(e=>e.progress&&e.progress.completionPercentage>0&&e.progress.completionPercentage<100).length,totalCases:L.reduce((e,t)=>e+t.clinicalCases.length,0)};return x.jsxs("div",{className:"min-h-screen bg-medical-darker p-6",children:[x.jsxs(k.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-8",children:[x.jsxs("div",{className:"flex items-center justify-between mb-6",children:[x.jsxs("div",{children:[x.jsxs("h1",{className:"text-5xl font-black text-white mb-3 tracking-tight",children:[x.jsx("span",{className:"text-gradient bg-gradient-to-r from-medical-blue via-medical-cyan to-medical-purple bg-clip-text",children:"MEP"}),x.jsx("span",{className:"text-white",children:" Dashboard"})]}),x.jsx("p",{className:"text-xl text-gray-300 font-medium",children:"Medical Education Program - ğŸ‡¹ğŸ‡· TÃ¼rk TÄ±p EÄŸitimi iÃ§in AI Destekli Ã–ÄŸrenme"}),x.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[x.jsx("span",{className:"px-3 py-1 bg-medical-blue/20 text-medical-blue text-sm font-bold rounded-full border border-medical-blue/30",children:"REVOLUTIONARY SYSTEM"}),x.jsx("span",{className:"px-3 py-1 bg-medical-green/20 text-medical-green text-sm font-bold rounded-full border border-medical-green/30",children:"4 COMPLETE CASES"})]})]}),x.jsxs("div",{className:"flex items-center gap-4",children:[x.jsxs(k.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>window.location.href="#/analytics",className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-cyan-500 to-blue-500 text-white font-bold rounded-xl hover:from-cyan-600 hover:to-blue-600 transition-all shadow-lg",children:[x.jsx(C,{className:"w-5 h-5"}),"Performance Analytics"]}),x.jsx("div",{className:"glass rounded-xl p-4 border border-medical-blue/30",children:x.jsx(te,{className:"w-8 h-8 text-medical-blue"})}),x.jsxs("div",{className:"text-right",children:[x.jsx("p",{className:"text-sm text-gray-400 font-medium",children:"Dil DesteÄŸi"}),x.jsx("p",{className:"text-white font-bold text-lg",children:"TÃ¼rkÃ§e & English"})]})]})]}),x.jsx("div",{className:"flex gap-6 mb-8",children:[{id:"student",label:"TÄ±p Ã–ÄŸrencileri",icon:N,count:"4 Vaka"},{id:"resident",label:"Asistan Hekimler",icon:D,count:"4 Vaka"}].map(e=>{const t=e.icon;return x.jsxs(k.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>a(e.id),className:"flex items-center gap-4 px-8 py-4 rounded-2xl font-bold text-lg transition-all "+(i===e.id?"bg-gradient-to-r from-medical-blue to-medical-cyan text-white shadow-2xl shadow-medical-blue/25 border border-medical-blue/50":"glass text-gray-300 hover:text-white hover:border-medical-blue/50 border border-white/10"),children:[x.jsx(t,{className:"w-6 h-6"}),x.jsxs("div",{className:"text-left",children:[x.jsx("div",{children:e.label}),x.jsx("div",{className:"text-xs opacity-80",children:e.count})]})]},e.id)})})]}),x.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-10",children:[{icon:j,label:"Toplam ModÃ¼l",value:K.total,color:"from-medical-blue to-medical-cyan",desc:"Revolutionary Cases"},{icon:Y,label:"Tamamlanan",value:K.completed,color:"from-medical-green to-emerald-400",desc:"Success Rate: 87%"},{icon:J,label:"Devam Eden",value:K.inProgress,color:"from-medical-purple to-medical-pink",desc:"Active Learning"},{icon:re,label:"Klinik Vakalar",value:K.totalCases,color:"from-amber-500 to-orange-500",desc:"Decision Trees"}].map((e,t)=>{const i=e.icon;return x.jsxs(k.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*t},className:"glass rounded-2xl p-8 border border-white/10 hover:border-medical-blue/30 transition-all group",children:[x.jsx("div",{className:`w-16 h-16 rounded-2xl bg-gradient-to-br ${e.color} p-0.5 mb-6`,children:x.jsx("div",{className:"w-full h-full rounded-2xl bg-medical-darker flex items-center justify-center group-hover:bg-transparent transition-all",children:x.jsx(i,{className:"w-8 h-8 text-white"})})}),x.jsx("p",{className:"text-4xl font-black text-white mb-2",children:e.value}),x.jsx("p",{className:"text-lg font-bold text-gray-300 mb-1",children:e.label}),x.jsx("p",{className:"text-sm text-gray-500 font-medium",children:e.desc})]},e.label)})}),x.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-10",children:[x.jsx("div",{className:"lg:col-span-2",children:x.jsxs("div",{className:"glass rounded-2xl p-8 border border-white/10",children:[x.jsxs("div",{className:"flex items-center justify-between mb-8",children:[x.jsxs("div",{children:[x.jsx("h2",{className:"text-3xl font-black text-white mb-2",children:"ğŸš¨ Revolutionary Clinical Cases"}),x.jsx("p",{className:"text-gray-400 text-lg",children:"Complete decision trees with AI analysis"})]}),x.jsxs("div",{className:"flex items-center gap-3 px-6 py-3 bg-medical-purple/20 border border-medical-purple/30 rounded-xl",children:[x.jsx(v,{className:"w-6 h-6 text-medical-purple"}),x.jsx("span",{className:"text-medical-purple font-bold",children:"AI Powered"})]})]}),x.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[x.jsx(M,{children:L.map((e,t)=>{const i=(e=>{switch(e){case"case-septic-shock-complete":return y;case"case-stemi-complete":return X;case"case-status-epilepticus-complete":return le;case"case-febrile-neutropenia-complete":return me;default:return D}})(e.id),a=(e=>{switch(e){case"case-septic-shock-complete":return"from-red-500 to-red-600";case"case-stemi-complete":return"from-red-500 to-pink-500";case"case-status-epilepticus-complete":return"from-purple-500 to-indigo-500";case"case-febrile-neutropenia-complete":return"from-orange-500 to-red-500";default:return"from-medical-blue to-medical-cyan"}})(e.id);return x.jsx(k.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:.15*t},className:"group relative",children:x.jsxs("div",{className:"glass rounded-2xl p-6 border border-white/10 hover:border-medical-blue/50 transition-all h-full flex flex-col relative overflow-hidden",children:[x.jsx("div",{className:`absolute top-0 right-0 w-24 h-24 bg-gradient-to-br ${a} rounded-full blur-2xl opacity-20 group-hover:opacity-30 transition-all`}),x.jsxs("div",{className:"flex items-start gap-4 mb-6 relative z-10",children:[x.jsx("div",{className:`w-14 h-14 rounded-xl bg-gradient-to-br ${a} p-0.5`,children:x.jsx("div",{className:"w-full h-full rounded-xl bg-medical-darker flex items-center justify-center group-hover:bg-transparent transition-all",children:x.jsx(i,{className:"w-7 h-7 text-white"})})}),x.jsxs("div",{className:"flex-1",children:[x.jsx("h3",{className:"text-xl font-black text-white group-hover:text-medical-blue transition-colors mb-2 leading-tight",children:e.title}),x.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wider "+("foundation"===e.difficulty?"bg-green-500/20 text-green-400 border border-green-500/30":"intermediate"===e.difficulty?"bg-yellow-500/20 text-yellow-400 border border-yellow-500/30":"advanced"===e.difficulty?"bg-orange-500/20 text-orange-400 border border-orange-500/30":"bg-red-500/20 text-red-400 border border-red-500/30"),children:e.difficulty})]})]}),x.jsx("p",{className:"text-gray-300 text-sm leading-relaxed mb-6 relative z-10",children:e.description}),x.jsxs("div",{className:"flex items-center gap-6 text-sm text-gray-400 mb-6 relative z-10",children:[x.jsxs("span",{className:"flex items-center gap-2",children:[x.jsx(J,{className:"w-4 h-4"}),x.jsxs("span",{className:"font-medium",children:[e.estimatedTime," dk"]})]}),x.jsxs("span",{className:"flex items-center gap-2",children:[x.jsx(re,{className:"w-4 h-4"}),x.jsxs("span",{className:"font-medium",children:[e.clinicalCases.length," vaka"]})]}),x.jsxs("span",{className:"flex items-center gap-2",children:[x.jsx(te,{className:"w-4 h-4"}),x.jsx("span",{className:"font-medium",children:"TR/EN"})]})]}),e.progress&&x.jsxs("div",{className:"mb-6 relative z-10",children:[x.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[x.jsx("span",{className:"text-gray-400 font-medium",children:"Ä°lerleme"}),x.jsxs("span",{className:"text-medical-blue font-bold",children:[e.progress.completionPercentage,"%"]})]}),x.jsx("div",{className:"w-full bg-gray-700 rounded-full h-3 shadow-inner",children:x.jsx("div",{className:"bg-gradient-to-r from-medical-blue to-medical-cyan h-3 rounded-full transition-all duration-500 shadow-sm",style:{width:`${e.progress.completionPercentage}%`}})})]}),e.clinicalCases.length>0&&x.jsxs("div",{className:"mb-8 relative z-10",children:[x.jsx("p",{className:"text-sm text-gray-400 font-semibold mb-3",children:"Klinik Vaka:"}),x.jsx("div",{className:"p-4 bg-gradient-to-r from-medical-blue/10 to-medical-cyan/10 rounded-xl border border-medical-blue/20",children:x.jsx("p",{className:"text-sm font-medium text-medical-blue",children:e.clinicalCases[0].title.replace(e.title.split(":")[0]+":","").trim()})})]}),x.jsx("div",{className:"mt-auto relative z-10",children:x.jsxs(k.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>(e=>{if(e.clinicalCases&&e.clinicalCases.length>0){const t=e.clinicalCases[0];console.log(`ğŸš€ LAUNCHING CASE: ${t.title}`),l(t),m(null),h(!1)}else console.warn("No clinical cases found in module")})(e),className:"w-full btn-premium flex items-center justify-center gap-4 px-8 py-4 text-lg font-black rounded-xl shadow-xl hover:shadow-2xl transition-all",children:[x.jsx($,{className:"w-6 h-6"}),"VAKAYA BAÅLA"]})})]})},e.id)})}),x.jsx(k.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:.5},className:"lg:col-span-2 group relative",children:x.jsxs("div",{className:"glass rounded-2xl p-6 border-2 border-cyan-500/30 hover:border-cyan-400/50 transition-all h-full flex flex-col relative overflow-hidden bg-gradient-to-br from-cyan-900/20 to-blue-900/20",children:[x.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-cyan-400 to-blue-500 rounded-full blur-3xl opacity-20 group-hover:opacity-30 transition-all"}),x.jsxs("div",{className:"flex items-start gap-4 mb-6 relative z-10",children:[x.jsx("div",{className:"w-14 h-14 rounded-xl bg-gradient-to-br from-cyan-400 to-blue-500 p-0.5",children:x.jsx("div",{className:"w-full h-full rounded-xl bg-medical-darker flex items-center justify-center group-hover:bg-transparent transition-all",children:x.jsx(v,{className:"w-7 h-7 text-white"})})}),x.jsxs("div",{className:"flex-1",children:[x.jsx("h3",{className:"text-2xl font-black text-white group-hover:text-cyan-400 transition-colors mb-2 leading-tight",children:"MedRESIDENT SimÃ¼lasyonlarÄ±"}),x.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wider bg-cyan-500/20 text-cyan-400 border border-cyan-500/30",children:"ADVANCED"})]})]}),x.jsx("p",{className:"text-gray-300 text-base leading-relaxed mb-6 relative z-10",children:"GerÃ§ekÃ§i branching senaryolarla ileri dÃ¼zey klinik simÃ¼lasyonlar. Ã‡oklu travma, pediatrik menenjit ve daha fazlasÄ±!"}),x.jsxs("div",{className:"flex items-center gap-6 text-sm text-gray-400 mb-6 relative z-10",children:[x.jsxs("span",{className:"flex items-center gap-2",children:[x.jsx(le,{className:"w-4 h-4 text-cyan-400"}),x.jsx("span",{className:"font-medium",children:"Branching Scenarios"})]}),x.jsxs("span",{className:"flex items-center gap-2",children:[x.jsx(O,{className:"w-4 h-4 text-cyan-400"}),x.jsx("span",{className:"font-medium",children:"Real-time Decisions"})]})]}),x.jsxs(k.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>T(!0),className:"w-full bg-gradient-to-r from-cyan-500 to-blue-500 hover:from-cyan-600 hover:to-blue-600 text-white font-black px-8 py-4 text-lg rounded-xl shadow-xl hover:shadow-2xl transition-all flex items-center justify-center gap-4",children:[x.jsx(v,{className:"w-6 h-6"}),"SÄ°MÃœLASYONLARI BAÅLAT"]})]})})]})]})}),x.jsxs("div",{className:"space-y-8",children:[x.jsxs(k.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"glass rounded-2xl p-8 border border-white/10",children:[x.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[x.jsx(v,{className:"w-7 h-7 text-medical-purple"}),x.jsx("h3",{className:"text-xl font-black text-white",children:"AI KiÅŸisel Ã–nerileri"})]}),b?x.jsxs("div",{className:"flex items-center justify-center py-12",children:[x.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-medical-purple mr-4"}),x.jsx("span",{className:"text-gray-400 text-base font-medium",children:"AI Ã¶nerileri hazÄ±rlanÄ±yor..."})]}):x.jsx("div",{className:"space-y-4",children:g.map((e,t)=>x.jsx(k.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1*t},className:"p-4 bg-gradient-to-r from-medical-purple/15 to-medical-pink/15 border border-medical-purple/30 rounded-xl hover:border-medical-purple/50 transition-all",children:x.jsx("p",{className:"text-sm text-gray-300 leading-relaxed font-medium",children:e})},t))}),x.jsx(k.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:z,disabled:b,className:"w-full mt-6 p-4 bg-gradient-to-r from-medical-purple/20 to-medical-pink/20 border border-medical-purple/30 rounded-xl text-base font-bold text-white hover:border-medical-purple/50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:b?"Yenileniyor...":"ğŸ”„ Ã–nerileri Yenile"})]}),x.jsxs(k.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.1},className:"glass rounded-2xl p-8 border border-white/10",children:[x.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[x.jsx(oe,{className:"w-7 h-7 text-medical-blue"}),x.jsx("h3",{className:"text-xl font-black text-white",children:"AI Ä°Ã§gÃ¶rÃ¼leri"})]}),x.jsx("div",{className:"space-y-4",children:o.map((e,t)=>x.jsx("div",{className:"p-4 bg-medical-blue/15 border border-medical-blue/30 rounded-xl",children:x.jsx("p",{className:"text-sm text-gray-300 font-medium",children:e})},t))})]}),x.jsxs(k.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.2},className:"glass rounded-2xl p-8 border border-white/10",children:[x.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[x.jsx(w,{className:"w-7 h-7 text-amber-500"}),x.jsx("h3",{className:"text-xl font-black text-white",children:"Performans Analizi"})]}),x.jsxs("div",{className:"space-y-6",children:[x.jsxs("div",{className:"p-4 bg-gradient-to-r from-amber-500/15 to-orange-500/15 border border-amber-500/30 rounded-xl",children:[x.jsxs("div",{className:"flex items-center justify-between mb-3",children:[x.jsx("span",{className:"text-base font-bold text-amber-400",children:"Seviye"}),x.jsx("span",{className:"text-amber-400 font-black",children:"GeliÅŸen Hekim"})]}),x.jsx("div",{className:"w-full bg-gray-700 rounded-full h-3",children:x.jsx("div",{className:"bg-gradient-to-r from-amber-500 to-orange-500 h-3 rounded-full w-4/5"})}),x.jsx("p",{className:"text-xs text-gray-400 mt-2 font-medium",children:"Sonraki seviye: %20 kaldÄ±"})]}),x.jsxs("div",{className:"pt-4 border-t border-gray-700",children:[x.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[x.jsx(ce,{className:"w-5 h-5 text-medical-blue"}),x.jsx("span",{className:"text-base font-bold text-white",children:"Bu Hafta"})]}),x.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[x.jsxs("div",{className:"text-center p-3 bg-medical-blue/15 rounded-xl",children:[x.jsx("div",{className:"text-medical-blue font-black text-xl",children:"4"}),x.jsx("div",{className:"text-gray-400 font-medium",children:"Vaka Ã‡Ã¶zÃ¼ldÃ¼"})]}),x.jsxs("div",{className:"text-center p-3 bg-medical-green/15 rounded-xl",children:[x.jsx("div",{className:"text-medical-green font-black text-xl",children:"87%"}),x.jsx("div",{className:"text-gray-400 font-medium",children:"Ortalama Skor"})]})]})]})]})]}),x.jsxs(k.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.3},className:"glass rounded-2xl p-8 border border-white/10",children:[x.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[x.jsx(de,{className:"w-7 h-7 text-amber-500"}),x.jsx("h3",{className:"text-xl font-black text-white",children:"TÃ¼rk TÄ±p StandartlarÄ±"})]}),x.jsx("div",{className:"space-y-4 text-base",children:[{label:"TEPDAD UyumluluÄŸu",status:"âœ…"},{label:"TUS HazÄ±rlÄ±ÄŸÄ±",status:"âœ…"},{label:"Klinik Rotasyon DesteÄŸi",status:"âœ…"},{label:"UzmanlÄ±k SÄ±nav HazÄ±rlÄ±ÄŸÄ±",status:"âœ…"}].map((e,t)=>x.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-800/50 rounded-lg",children:[x.jsx("span",{className:"text-gray-300 font-medium",children:e.label}),x.jsx("span",{className:"text-green-400 text-lg",children:e.status})]},t))})]})]})]}),x.jsx(M,{children:r&&x.jsx(k.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/90 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:()=>l(null),children:x.jsx(k.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"w-full max-w-7xl max-h-[95vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:x.jsxs("div",{className:"relative",children:[x.jsx("button",{onClick:()=>l(null),className:"absolute top-4 right-4 z-10 p-3 bg-black/50 backdrop-blur-sm rounded-full text-white hover:bg-black/70 transition-all border border-white/20",children:x.jsx(ee,{className:"w-8 h-8"})}),x.jsx(ea,{clinicalCase:r,onComplete:(t,i)=>u(void 0,null,function*(){if(console.log(`âœ… CASE COMPLETED! Score: ${t}, Decisions:`,i),r){h(!0);try{const t="AIzaSyARZyERqMaFInsbRKUA0NxOok77syBNzK8";if(t){const a=sa(t),n=i.map((e,t)=>`Karar ${t+1}: ${e}`).join("\n"),s=yield a.analyzeClinicalCase(r,n,"resident"===(null==e?void 0:e.level)?"resident":"student");m({feedback:s.feedback,suggestions:s.suggestions,learningPoints:s.learningPoints})}}catch(a){console.error("AI Analysis Error:",a),m({feedback:"AI analizi ÅŸu anda kullanÄ±lamÄ±yor, ancak performansÄ±nÄ±z kaydedildi.",suggestions:["Manual review Ã¶nerilir"],learningPoints:r.learningObjectives||[]})}finally{h(!1)}}setTimeout(()=>{z()},2e3)}),aiAnalysis:d,isAnalyzing:p})]})})})}),x.jsx(k.button,{initial:{scale:0},animate:{scale:1},whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>(R(""),void I(!0)),className:"fixed bottom-8 right-8 z-40 p-4 bg-gradient-to-r from-medical-purple to-medical-pink rounded-full shadow-2xl hover:shadow-3xl transition-all border border-medical-purple/30",title:"TÄ±bbi Terim AsistanÄ±",children:x.jsx(j,{className:"w-7 h-7 text-white"})}),x.jsx(ra,{isOpen:E,onClose:()=>I(!1),initialTerm:P}),x.jsx(M,{children:A&&x.jsx(k.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm",onClick:()=>T(!1),children:x.jsxs(k.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:e=>e.stopPropagation(),className:"relative w-full h-full max-w-7xl max-h-[90vh] overflow-auto",children:[x.jsx("button",{onClick:()=>T(!1),className:"absolute top-4 right-4 z-50 p-2 bg-white/10 backdrop-blur rounded-full hover:bg-white/20 transition-all",children:x.jsx(ee,{className:"w-6 h-6 text-white"})}),x.jsx(oa,{})]})})})]})},da=pe.lazy(()=>je(()=>import("./Dashboard-D9bGsH2J.js"),__vite__mapDeps([0,1,2,3,4]))),ma=pe.lazy(()=>je(()=>import("./Library-BX1dDlMq.js"),__vite__mapDeps([5,1,2,4]))),ua=pe.lazy(()=>je(()=>import("./Reader-CP9NuVNG.js"),__vite__mapDeps([6,1,2,7,4]))),pa=pe.lazy(()=>je(()=>import("./AIChat-CU_Zy4I1.js"),__vite__mapDeps([8,1,2,7,9,4]))),ha=pe.lazy(()=>je(()=>import("./Progress-B7Svf_SS.js"),__vite__mapDeps([10,1,2,3,11]))),ga=pe.lazy(()=>je(()=>import("./PerformanceAnalytics-DjU7e2qF.js").then(e=>e.P),__vite__mapDeps([12,1,2,3,11])));function xa(){const{user:e,setBooks:t,setUser:i}=At();return pe.useEffect(()=>{t(Tt);const e=localStorage.getItem("medai-user");e&&i(JSON.parse(e))},[t,i]),e?x.jsx(It,{children:x.jsx(xe,{children:x.jsxs("div",{className:"min-h-screen bg-medical-darker",children:[x.jsx(jt,{position:"top-right",toastOptions:{className:"glass",style:{background:"rgba(10, 14, 39, 0.9)",color:"#fff",border:"1px solid rgba(96, 165, 250, 0.3)",backdropFilter:"blur(10px)"}}}),x.jsx(pe.Suspense,{fallback:x.jsx(Rt,{}),children:x.jsx(ye,{children:x.jsxs(fe,{path:"/",element:x.jsx(Ot,{}),children:[x.jsx(fe,{index:!0,element:x.jsx(da,{})}),x.jsx(fe,{path:"library",element:x.jsx(ma,{})}),x.jsx(fe,{path:"reader",element:x.jsx(ua,{})}),x.jsx(fe,{path:"ai-chat",element:x.jsx(pa,{})}),x.jsx(fe,{path:"progress",element:x.jsx(ha,{})}),x.jsx(fe,{path:"mep",element:x.jsx(ca,{})}),x.jsx(fe,{path:"analytics",element:x.jsx(ga,{})})]})})})]})})}):x.jsx(Dt,{})}e(document.getElementById("root")).render(x.jsx(pe.StrictMode,{children:x.jsx(xa,{})}));export{_i as G,je as _,Xi as a,Et as g,At as u,Nt as z};
